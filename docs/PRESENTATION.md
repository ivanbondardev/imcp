# IMCP — Iron Man Case Platform
## Презентація (короткий огляд)

**Версія:** 1.1  
**Дата:** січень 2026  
**Тип:** презентація / огляд

**Для кого:** менеджери операцій, керівники напрямів, технічна команда.

> **Ключова ідея:** IMCP — це «костюм Iron Man» для кейс-менеджменту: система знімає рутину, підсвічує ризики та готує рішення, а людина лишається відповідальною за критичні підтвердження.

---

## Зміст

1. [Проблема та контекст](#проблема-та-контекст)
2. [Рішення: що таке IMCP](#рішення-що-таке-imcp)
3. [Як це виглядає в роботі (Case Cockpit)](#як-це-виглядає-в-роботі-case-cockpit)
4. [Human-in-the-Loop: межі автоматизації](#human-in-the-loop-межі-автоматизації)
5. [Цінність для бізнесу та ROI](#цінність-для-бізнесу-та-roi)
6. [Дорожня карта та метрики успіху](#дорожня-карта-та-метрики-успіху)
7. [Для розробників: технічна архітектура](#для-розробників-технічна-архітектура)
8. [Демо-сценарій](#демо-сценарій)
9. [Наступні кроки](#наступні-кроки)

---

## Проблема та контекст

### Типові «болі» логістичної операції

| Проблема | Наслідок | Орієнтовна вартість |
|----------|----------|---------------------|
| **Помилки в документах** | Затримки, штрафи, повторні подачі | $500–5,000/кейс |
| **Пропущені дедлайни** | Штрафи / втрата слотів / простій | $1,000–10,000 |
| **Розбіжності в даних** | Перерахунок, конфлікти, зіпсована довіра | час + репутація |
| **Рутина та контекст-перемикання** | вигорання, плинність кадрів | найм + онбординг |
| **Залежність від «знань у голові»** | ризик при відпустці/звільненні | операційний ризик |

### Ілюстрація: «хаос контексту» без IMCP

```
Вхідні (37)                       Таблиця (8 вкладок)              Чат (12)
┌───────────────────────┐         ┌───────────────────────┐        ┌──────────────┐
│ FW: BL final??         │         │ "Морські вантажі"     │        │ «Є апдейт?»  │
│ RE: rate update        │         │  - габарити           │        │ «Коли ETA?»  │
│ "Терміново!"           │         │  - ставки             │        │ «Підтверди»  │
│ вкладення: bl_v7.pdf   │         │  - маржа              │        └──────────────┘
│ вкладення: invoice.doc │         │  - дедлайни           │
└───────────────────────┘         └───────────────────────┘

Менеджер збирає кейс «з пазлів» → контекст роз’їжджається → ризик пропустити деталь.
```

---

## Рішення: що таке IMCP

IMCP — це платформа керування кейсами, яка:
- **збирає контекст** з листів/документів/форм у єдину картку кейса;
- **готує чернетки** (листи, інструкції, запити);
- **перевіряє дані** (суперечності, пропуски, підозрілі значення);
- **рахує та пояснює** (калькуляції, маржа, припущення);
- **підсвічує ризики і дедлайни** та веде таймлайн подій.

Важливо: **IMCP не виконує незворотні дії без людського підтвердження**.

### Ілюстрація: «кейс як контейнер контексту»

```
КЕЙС = один екран + одна «правда»
┌─────────────────────────────────────────────────────────┐
│ F1-SEA-02451  |  СТАН: QUOTE_READY  |  ДЕДЛАЙН: 2 дні    │
├─────────────────────────────────────────────────────────┤
│ Резюме: що відбувається зараз (1 абзац)                  │
│ Ризики: 2 попередження (склад, Incoterms)                │
├───────────────────────┬─────────────────────────────────┤
│ Документи             │ Таймлайн                         │
│ - BL v7 (pdf)         │ 10:12 дані отримано              │
│ - Invoice (doc)       │ 10:18 екстракція полів           │
│ - Packing List        │ 10:25 знайдено розбіжність       │
└───────────────────────┴─────────────────────────────────┘
```

---

## Як це виглядає в роботі (Case Cockpit)

### Ранок: «кабіна пілота» з фокусом на рішеннях

```
┌──────────────────────────────────────────────────────────────────────┐
│ IMCP ▸ Мої кейси                                      Привіт, Іване! │
├──────────────────────────────────────────────────────────────────────┤
│ 🔴 Потребує рішення (3)                                              │
│   • F1-SEA-02451 — Підтвердити калькуляцію         [Переглянути]     │
│   • F1-SEA-02449 — Перевірити коносамент           [Переглянути]     │
│   • F1-SEA-02445 — Зміна габаритів від складу      [Переглянути]     │
│                                                                      │
│ 🟡 На контролі / дедлайни (5)                                        │
│   • F1-SEA-02448 — Чекаємо підтвердження клієнта   (залишилось 2 дні)│
│                                                                      │
│ 🟢 У роботі (12)                                                     │
└──────────────────────────────────────────────────────────────────────┘
```

### Як працюємо з кейсом (типовий цикл)

1. **Контекст зібрано** → ви бачите коротке резюме і повний таймлайн.
2. **Калькуляція підготовлена** → ви перевіряєте та підтверджуєте (або редагуєте).
3. **Дані з документів витягнуто** → ви верифікуєте підсвічені поля.
4. **Розбіжності знайдено** → ви приймаєте рішення, система фіксує аудит.

### Ілюстрація: таймлайн як «чорний ящик» кейса

```
10:12  HUMAN    Кейс створено
10:18  SYSTEM   Додано документи: BL_v7.pdf, Invoice.doc
10:19  AI       Витягнуто поля: shipper, consignee, weights...
10:21  SYSTEM   Перевірка: вага в BL ≠ вага в Invoice
10:24  HUMAN    Рішення: оновити вагу згідно складу
10:25  SYSTEM   Створено підтвердження: CALC_APPROVAL (PENDING)
10:30  HUMAN    Підтверджено калькуляцію (APPROVED)
```

---

## Human-in-the-Loop: межі автоматизації

### Що система робить автоматично

| Дія | Як це працює |
|-----|--------------|
| **Збір даних з листів/документів** | ШІ витягує ключові поля → вам лишається перевірка |
| **Розрахунок калькуляції** | система рахує собівартість/маржу та показує припущення |
| **Чернетки комунікацій** | листи/інструкції/запити готові до відправки |
| **Перевірка узгодженості** | виявляє розбіжності (габарити, ціни, дати, Incoterms тощо) |
| **Нагадування** | дедлайни, очікування відповіді, блокери |
| **Аудит і таймлайн** | хто/що/коли зробив — завжди відтворювано |

### Що лишається за людиною (контроль і відповідальність)

| Рішення | Чому це критично |
|---------|------------------|
| **Підтвердження комерційної пропозиції** | фінансова відповідальність |
| **Створення/проведення в 1С** | юридичні зобов’язання |
| **Погодження коносаменту** | документ права/контролю вантажу |
| **Зміна габаритів/ваги** | напряму впливає на ціну та умови |
| **Рішення про страхування** | ризик-менеджмент |

> Принцип: **система пропонує — людина вирішує**. Автоматизація має бути керованою й аудитованою.

### Ілюстрація: «гейти» підтверджень (approvals) як запобіжники

```
Система готує → людина підтверджує → система виконує

┌──────────────┐     ┌──────────────────┐     ┌─────────────────────┐
│ Підготовка   │     │ ПІДТВЕРДЖЕННЯ     │     │ Виконання/інтеграції │
│ (ШІ+правила) ├────►│ (людина в циклі)  ├────►│ (n8n, 1С, email)     │
└──────────────┘     └──────────────────┘     └─────────────────────┘

Приклади гейтів:
- CALC_APPROVAL (ціна/маржа)
- BL_APPROVAL (коносамент)
- DIMENSIONS_CHANGE (габарити/вага)
```

### Приклад: підтвердження калькуляції

```
┌──────────────────────────────────────────────────────────────────┐
│ Підтвердження калькуляції                                         │
├──────────────────────────────────────────────────────────────────┤
│ Система підготувала розрахунок:                                  │
│   Базова вартість:        $2,450                                 │
│   Маржа:                    $350                                 │
│   ─────────────────────────────                                  │
│   Разом:                  $2,800                                 │
│                                                                  │
│ Термін дії: 7–9 днів                                             │
│                                                                  │
│ ⚠️ Попередження:                                                 │
│   • Габарити вказані клієнтом, склад ще не підтвердив            │
│                                                                  │
│ [ ✅ Підтвердити ]   [ ✏️ Редагувати ]   [ ❌ Відхилити ]          │
└──────────────────────────────────────────────────────────────────┘
```

---

## Цінність для бізнесу та ROI

### Де IMCP створює цінність (оцінка)

**1) Менше помилок**

```
Помилка через втому         →  перевірка 100% документів/полів
Пропущена розбіжність      →  автоматичне порівняння джерел
«Забув надіслати/попросити»→  нагадування + чернетки
```

Очікуваний ефект: **-40–60%** помилок документообігу.

**2) Швидші процеси**

| Операція | Без IMCP | З IMCP |
|----------|----------|--------|
| Збір даних від клієнта | 2–3 дні | 1 день |
| Формування калькуляції | 30–60 хв | 5 хв (перевірка) |
| Підготовка інструкцій | 20 хв | 2 хв (підтвердження) |
| Пошук історії кейса | 15–30 хв | 30 сек |

Очікуваний ефект: **+25–40%** швидкості закриття кейсів.

**3) Масштабування без пропорційного росту команди**

```
Сьогодні:  1 менеджер = 15–20 кейсів/місяць
З IMCP:    1 менеджер = 25–35 кейсів/місяць
```

Очікуваний ефект: **+50–75%** продуктивності на людину.

### Ілюстрація: міні-діаграма ефектів (умовно)

```
Помилки (↓)          ██████████░░░░   -50%
Час на кейс (↓)      ████████░░░░░░   -30%
Кейси/менеджер (↑)   ███████░░░░░░    +40%
```

---

### Модель ROI (приклад)

**Вхідні параметри**

| Параметр | Значення |
|----------|----------|
| Кількість менеджерів | 5 |
| Кейсів на місяць | 100 |
| Середній чек | $3,000 |
| Частка помилок (поточна) | 8% |
| Вартість помилки | $1,000 |

**Очікувані результати (рік 1)**

| Показник | Розрахунок | Економія |
|----------|------------|----------|
| Зменшення помилок (-50%) | 100 × 12 × 8% × 50% × $1,000 | **$48,000** |
| Зростання пропускної здатності (+40%) | 40 дод. кейсів/міс × 12 × $500 маржі | **$240,000** |
| Економія часу менеджерів | 5 × 5 год/тиж × 50 тиж × $20/год | **$25,000** |
| **Загальна вигода** |  | **$313,000/рік** |

> Примітка: цифри — модель для калібрування; реальні значення уточнюються на PoC/MVP.

---

## Дорожня карта та метрики успіху

### Фаза 1: PoC (4–6 тижнів)
- 1 тип кейса (наприклад, **F1 Sea Import**)
- базовий UI + 3–5 точок підтвердження (approvals)
- інтеграція з 1С у режимі **лише читання**

### Ілюстрація: що саме робимо в PoC (мінімум, але показово)

```
PoC = 1 сценарій → 1 кейс-тип → 3–5 гейтів → демо без «магії»
┌───────────────┬──────────────────────────────────────────┐
│ Вхід           │ email + 2 документи + форма від клієнта  │
│ Перевірки      │ 3 правила (вага/габарити/дати)           │
│ Підтвердження  │ калькуляція + BL + зміна габаритів       │
│ Вихід          │ аудит + таймлайн + оновлення в 1С (лише читання) │
└───────────────┴──────────────────────────────────────────┘
```

### Фаза 2: MVP (2–3 місяці)
- версія, **готова до продакшну**
- повна інтеграція з 1С (за потреби — поетапно)
- екстракція даних з ключових документів
- 2–3 типи кейсів

### Фаза 3: Scale (6–12 місяців)
- покриття всіх типів кейсів
- розширені інтеграції
- аналітика та звітність
- стандартизований онбординг нових клієнтів/напрямів

### Ключові метрики (приклад цілей на 6 місяців)

| Метрика | Як вимірювати | Ціль |
|---------|---------------|------|
| **Час закриття кейса** | від створення до `CLOSED` | -30% |
| **Частка помилок у документах** | повернення/виправлення | -50% |
| **Кейсів на менеджера** | пропускна здатність на місяць | +40% |
| **Задоволеність менеджерів** | внутрішнє опитування | >7/10 |
| **Підтвердження без правок (approvals)** | частка підтверджень без редагування | >80% |

---

## Для розробників: технічна архітектура

### Архітектурні принципи (коротко)

```
Supabase  — джерело істини (source of truth)
n8n       — оркестрація та виконання (воркфлоу)
UI        — «кабіна пілота» (керований інтерфейс)
ШІ        — інструмент, не суб’єкт рішення
```

### High-level схема

```
┌─────────────────────────────────────────────────────────────────────┐
│  ┌──────────────┐      ┌──────────────────┐      ┌──────────────┐  │
│  │   imcp-ui    │      │     Supabase     │      │ imcp-workflows│  │
│  │   Next.js    │◄────►│   DB + Storage   │◄────►│      n8n      │  │
│  │ Case Cockpit │      │ Source of Truth  │      │ Orchestration │  │
│  └──────────────┘      └──────────────────┘      └──────┬───────┘  │
│                                                         │          │
│                              ┌──────────────────────────┼─────┐    │
│                              │     Спеціалізовані ноди   │     │    │
│                              │  ┌─────┐ ┌─────┐ ┌─────┐ │     │    │
│                              │  │ ШІ  │ │ 1С  │ │Email│ │     │    │
│                              │  └─────┘ └─────┘ └─────┘ │     │    │
│                              └──────────────────────────┴─────┘    │
└─────────────────────────────────────────────────────────────────────┘
```

### Дані: core-модель (коротко)

```sql
cases
├── id, case_type, case_number
├── state         -- бізнес-стан (state machine)
├── status        -- агрегат: OPEN|BLOCKED|DONE|ARCHIVED
├── payload       -- JSONB: доменні дані
├── computed      -- JSONB: результати ШІ/воркфлоу
└── owner, org, sla_deadline

case_events        -- append-only аудит подій
approvals          -- точки human-in-the-loop
documents          -- файли + extracted_data
```

**state vs status**

| Поняття | Що це | Приклад |
|---------|-------|---------|
| **state** | бізнес-стан у state machine | `WAITING_CLIENT_INFO`, `QUOTE_READY` |
| **status** | технічний агрегат для UI | `OPEN`, `BLOCKED`, `DONE` |

### Event-driven модель (коротко)

```
1) UI змінює дозволені поля (payload / approvals)
2) Подія/тригер → воркфлоу в n8n
3) n8n читає контекст → виконує логіку → пише результати
4) UI отримує оновлення (у реальному часі)
```

### Ілюстрація: «контракт» як обмеження заради керованості

```
UI = кермо і педалі  (вносить дані / підтверджує)
n8n = двигун         (виконує дії / інтегрується)
Supabase = панель    (зберігає правду / транслює події)

Навіщо: щоб UI не міг «перескочити» бізнес-логіку, а рішення завжди мали аудит.
```

**Контракт UI (принцип)**

| ✅ UI МОЖЕ | ❌ UI НЕ МОЖЕ |
|------------|---------------|
| змінювати `cases.payload` (доменні поля) | напряму змінювати `cases.state` |
| створювати `approvals` зі `status=PENDING` | напряму змінювати `cases.computed` |
| фіксувати рішення в `approvals.decision_*` | «вручну» запускати воркфлоу |
| логувати `case_events` як `HUMAN` | видаляти `case_events` |

### Approval Pattern (коротко)

```
PENDING ──┬──► APPROVED
          ├──► REJECTED
          └──► CANCELLED
```

Ключове: **snapshot semantics** — `request_snapshot` фіксує, що саме підтверджувала людина.

---

## Демо-сценарій

Щоб презентація «приземлялась», показуємо 5–7 хв демо на одному кейсі:

1. **Список кейсів**: черга «потребує рішення» + дедлайни.
2. **Картка кейса**: резюме, таймлайн, вкладка документів.
3. **Екстракція**: документ → підсвічені поля → верифікація.
4. **Калькуляція**: пояснення складових, попередження, підтвердження (approval).
5. **Аудит**: хто підтвердив, які дані були в snapshot, що змінилось далі.

### Ілюстрація: «кадри» демо (сторіборд)

```
[Кадр 1] Список кейсів → клік у «Потребує рішення»
   ↓
[Кадр 2] Картка кейса → резюме + 2 попередження
   ↓
[Кадр 3] Документ → підсвічені поля → «Підтвердити»
   ↓
[Кадр 4] Калькуляція → «Підтвердити / Редагувати / Відхилити»
   ↓
[Кадр 5] Таймлайн → видно, хто і що підтвердив
```

---

## Наступні кроки

- **Узгодити PoC-скоуп**: 1 тип кейса, список підтверджень (approvals), список інтеграцій (мінімум).
- **Затвердити метрики PoC**: час циклу, частка помилок, кількість ручних перевірок.
- **Підготувати дані**: шаблони документів, приклади кейсів, доступи (email/1С/таблиці).
- **Запланувати демо-ретроспективу** через 2 тижні: що працює, що ні, що масштабуємо.

---

*Документ узгоджений з Core Documentation IMCP v1.1 (див. `./core/`).*
