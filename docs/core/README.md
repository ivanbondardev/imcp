# IMCP Core Documentation
## Iron Man Case Platform ‚Äî –Ø–¥—Ä–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó

**–í–µ—Ä—Å—ñ—è:** 1.1  
**–°—Ç–∞—Ç—É—Å:** Core / Contract  
**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –í—Å—Ç—É–ø–Ω–∞ —Ç–æ—á–∫–∞ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó —è–¥—Ä–∞ IMCP  
**–ê—É–¥–∏—Ç–æ—Ä—ñ—è:** Product, Engineering, Operations, Leadership

---

## –©–æ —Ç–∞–∫–µ IMCP?

**IMCP (Iron Man Case Platform)** ‚Äî —Ü–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —á–∞—Å—Ç–∫–æ–≤–æ—ó –∞–≤—Ç–æ–Ω–æ–º—ñ—ó –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏–º–∏ –±—ñ–∑–Ω–µ—Å-–∫–µ–π—Å–∞–º–∏.

–ö–ª—é—á–æ–≤–∞ —ñ–¥–µ—è:
> **–®–Ü –ø—ñ–¥—Å–∏–ª—é—î –ª—é–¥–∏–Ω—É, –∞–ª–µ –Ω–µ –∑–∞–º—ñ–Ω—é—î —ó—ó –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å.**

–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–±—É–¥–æ–≤–∞–Ω–∞ –Ω–∞ –º–µ—Ç–∞—Ñ–æ—Ä—ñ "Iron Man Suit":
- **–õ—é–¥–∏–Ω–∞** ‚Äî –ø—ñ–ª–æ—Ç, —è–∫–∏–π –≤–µ—Ä–∏—Ñ—ñ–∫—É—î —Ä—ñ—à–µ–Ω–Ω—è —Ç–∞ –Ω–µ—Å–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å
- **–®–Ü** ‚Äî –µ–∫–∑–æ—Å–∫–µ–ª–µ—Ç, —è–∫–∏–π –ø—Ä–∏—à–≤–∏–¥—à—É—î –∞–Ω–∞–ª—ñ–∑ —Ç–∞ –∑–Ω—ñ–º–∞—î —Ä—É—Ç–∏–Ω—É
- **–°–∏—Å—Ç–µ–º–∞** ‚Äî –∫–æ—Å—Ç—é–º, –∞ –Ω–µ –∞–≤—Ç–æ–ø—ñ–ª–æ—Ç

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó (–ø–æ—Ä—è–¥–æ–∫ —á–∏—Ç–∞–Ω–Ω—è)

| # | –î–æ–∫—É–º–µ–Ω—Ç | –¢–∏–ø | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|---|----------|-----|-------------|
| 1 | [00_shared_mental_model.md](./00_shared_mental_model.md) | Concept | **–ú–µ–Ω—Ç–∞–ª—å–Ω–∞ –º–æ–¥–µ–ª—å** ‚Äî —è–∫ –º–∏ –¥—É–º–∞—î–º–æ –ø—Ä–æ —Å–∏—Å—Ç–µ–º—É |
| 2 | [01_architecture_overview.md](./01_architecture_overview.md) | Contract | **–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞** ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏, –º–µ–∂—ñ, sequence flows |
| 3 | [02_core_data_model.md](./02_core_data_model.md) | Contract | **–ú–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö** ‚Äî —Ç–∞–±–ª–∏—Ü—ñ, —Å—Ö–µ–º–∏, invariants |
| 4 | [03_approval_pattern.md](./03_approval_pattern.md) | Contract | **–ü–∞—Ç–µ—Ä–Ω –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω—å** ‚Äî Human Approval Gates |
| 5 | [04_case_cockpit_ux.md](./04_case_cockpit_ux.md) | Spec | **UX/UI** ‚Äî —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ç–∞ –≤–∑–∞—î–º–æ–¥—ñ—è |

### –¢–∏–ø–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤

| –¢–∏–ø | –û–ø–∏—Å |
|-----|------|
| **Concept** | –ú–µ–Ω—Ç–∞–ª—å–Ω–∞ –º–æ–¥–µ–ª—å, –ø—Ä–∏–Ω—Ü–∏–ø–∏, "—è–∫ –¥—É–º–∞—î–º–æ" |
| **Contract** | –°–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è –¥–ª—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó, "—â–æ –≥–∞—Ä–∞–Ω—Ç—É—î–º–æ" |
| **Spec** | –î–µ—Ç–∞–ª—å–Ω–∞ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—É |

---

## –ö–ª—é—á–æ–≤—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏ IMCP

| –ü—Ä–∏–Ω—Ü–∏–ø | –û–ø–∏—Å |
|---------|------|
| **Case-Driven** | –£—Å–µ –æ–±–µ—Ä—Ç–∞—î—Ç—å—Å—è –Ω–∞–≤–∫–æ–ª–æ –∫–µ–π—Å—É ‚Äî –æ–¥–∏–Ω–∏—Ü—ñ —Ä–æ–±–æ—Ç–∏ |
| **Human-in-the-Loop** | –õ—é–¥–∏–Ω–∞ –∑–∞–≤–∂–¥–∏ –≤–∏—Ä—ñ—à—É—î –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è |
| **Draft-First** | –°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä—É—î —á–µ—Ä–Ω–µ—Ç–∫–∏, –ª—é–¥–∏–Ω–∞ –≤–µ—Ä–∏—Ñ—ñ–∫—É—î |
| **Event-Driven** | –ó–º—ñ–Ω–∏ ‚Äî —Ü–µ –ø–æ–¥—ñ—ó, —è–∫—ñ —Ç—Ä–∏–≥–µ—Ä—è—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—é |
| **Auditability** | –ö–æ–∂–Ω–∞ –¥—ñ—è –ª–æ–≥—É—î—Ç—å—Å—è: —Ö—Ç–æ, —â–æ, –∫–æ–ª–∏ |

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—è | –†–æ–ª—å |
|-----------|------------|------|
| **UI** | Next.js | –ö–∞–±—ñ–Ω–∞ –ø—ñ–ª–æ—Ç–∞ (Case Cockpit) |
| **Database** | Supabase (Postgres) | –î–∂–µ—Ä–µ–ª–æ —ñ—Å—Ç–∏–Ω–∏ (SoT) |
| **Storage** | Supabase Storage | –î–æ–∫—É–º–µ–Ω—Ç–∏ |
| **Orchestration** | n8n | –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è —Ç–∞ workflow |
| **AI** | LLM (via n8n nodes) | Extract / Generate / Verify |

---

## –ü–æ–≤'—è–∑–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- üìÅ **[/docs/case_templates/](../case_templates/)** ‚Äî —à–∞–±–ª–æ–Ω–∏ —Ç–∏–ø—ñ–≤ –∫–µ–π—Å—ñ–≤
- üö¢ **[/docs/case_templates/f1_sea_import/](../case_templates/f1_sea_import/)** ‚Äî –ø—Ä–∏–∫–ª–∞–¥: –º–æ—Ä—Å—å–∫–∏–π —ñ–º–ø–æ—Ä—Ç

---

## –ì–ª–æ—Å–∞—Ä—ñ–π –∫–ª—é—á–æ–≤–∏—Ö —Ç–µ—Ä–º—ñ–Ω—ñ–≤

### –ó–∞–≥–∞–ª—å–Ω—ñ —Ç–µ—Ä–º—ñ–Ω–∏

| –¢–µ—Ä–º—ñ–Ω | –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|--------|------------|
| **Case** | –û–¥–∏–Ω–∏—Ü—è —Ä–æ–±–æ—Ç–∏ –∑ –ø–æ—á–∞—Ç–∫–æ–º, –∫—ñ–Ω—Ü–µ–º —Ç–∞ state machine |
| **Case Type** | –¢–∏–ø –∫–µ–π—Å–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `F1_SEA_IMPORT`) |
| **Owner** | –í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä –∑–∞ –∫–µ–π—Å |

### State & Status

| –¢–µ—Ä–º—ñ–Ω | –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|--------|------------|
| **State** | –ë—ñ–∑–Ω–µ—Å-—Å—Ç–∞–Ω —É state machine (`WAITING_CLIENT_INFO`, `QUOTE_READY`) |
| **Status** | –¢–µ—Ö–Ω—ñ—á–Ω–∏–π –∞–≥—Ä–µ–≥–∞—Ç (`OPEN`, `BLOCKED`, `DONE`, `ARCHIVED`) |
| **Primary State** | –ì–æ–ª–æ–≤–Ω–∏–π –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω (–æ–¥–∏–Ω –Ω–∞ –∫–µ–π—Å) |
| **Substate** | –ü–∞—Ä–∞–ª–µ–ª—å–Ω–∏–π –ø—ñ–¥—Å—Ç–∞–Ω –¥–ª—è –Ω–µ–∑–∞–ª–µ–∂–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤ |

### Approvals & Decisions

| –¢–µ—Ä–º—ñ–Ω | –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|--------|------------|
| **Approval** | –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞ —Ç–æ—á–∫–∞, –¥–µ –ª—é–¥–∏–Ω–∞ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î —Ä—ñ—à–µ–Ω–Ω—è |
| **Approval Gate** | Human-in-the-loop —Ç–æ—á–∫–∞ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö —Ä—ñ—à–µ–Ω—å |
| **Snapshot** | –ó–±–µ—Ä–µ–∂–µ–Ω–∏–π —Å—Ç–∞–Ω –¥–∞–Ω–∏—Ö —É –º–æ–º–µ–Ω—Ç —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è approval |
| **Draft** | –ß–µ—Ä–Ω–µ—Ç–∫–∞, –ø—ñ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–æ—é –¥–ª—è –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó |

### UI & UX

| –¢–µ—Ä–º—ñ–Ω | –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|--------|------------|
| **NBA** | Next Best Action ‚Äî –Ω–∞—Å—Ç—É–ø–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∞ –¥—ñ—è |
| **Case Cockpit** | –ì–æ–ª–æ–≤–Ω–∏–π –µ–∫—Ä–∞–Ω —Ä–æ–±–æ—Ç–∏ –∑ –∫–µ–π—Å–æ–º |
| **Timeline** | –•—Ä–æ–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π –∂—É—Ä–Ω–∞–ª –ø–æ–¥—ñ–π –∫–µ–π—Å–∞ |

### Data & Events

| –¢–µ—Ä–º—ñ–Ω | –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|--------|------------|
| **Payload** | JSONB-–ø–æ–ª–µ –¥–ª—è –¥–æ–º–µ–Ω–Ω–∏—Ö –¥–∞–Ω–∏—Ö –∫–µ–π—Å–∞ |
| **Computed** | JSONB-–ø–æ–ª–µ –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö (AI, workflow) |
| **Case Event** | –ó–∞–ø–∏—Å —É –∂—É—Ä–Ω–∞–ª—ñ –ø–æ–¥—ñ–π (audit log) |
| **Idempotency Key** | –ö–ª—é—á –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –¥—É–±–ª—é–≤–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ–π |

### Technical

| –¢–µ—Ä–º—ñ–Ω | –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|--------|------------|
| **SoT** | Source of Truth ‚Äî —î–¥–∏–Ω–µ –¥–∂–µ—Ä–µ–ª–æ —ñ—Å—Ç–∏–Ω–∏ (Supabase) |
| **n8n Node** | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó —É n8n |
| **RLS** | Row Level Security ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø—É –Ω–∞ —Ä—ñ–≤–Ω—ñ —Ä—è–¥–∫—ñ–≤ |
| **SLA** | Service Level Agreement ‚Äî —á–∞—Å–æ–≤—ñ —Ä–∞–º–∫–∏ –¥–ª—è –∫–µ–π—Å–∞ |
| **Flag** | –ü—Ä–∞–ø–æ—Ä–µ—Ü—å —Ä–∏–∑–∏–∫—É –∞–±–æ —Å—Ç–∞–Ω—É (`LOW_CONFIDENCE`, `MISSING_DATA`) |

---

## Onboarding Guide

### –î–ª—è –Ω–æ–≤–∏—Ö —É—á–∞—Å–Ω–∏–∫—ñ–≤ –∫–æ–º–∞–Ω–¥–∏:

1. **–ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ —Ü–µ–π README** ‚Äî –∑–∞–≥–∞–ª—å–Ω–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è
2. **–ü—Ä–æ–π–¥—ñ—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∏ 00‚Äì04 –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ** ‚Äî –≥–ª–∏–±–æ–∫–µ –∑–∞–Ω—É—Ä–µ–Ω–Ω—è
3. **–ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ø—Ä–∏–∫–ª–∞–¥ –∫–µ–π—Å–∞** ‚Äî [F1 Sea Import](../case_templates/f1_sea_import/)
4. **–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É –Ω–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∏:**
   - [State vs Status](./02_core_data_model.md#2-—Ç–µ—Ä–º—ñ–Ω–æ–ª–æ–≥—ñ—è-state-vs-status)
   - [Event Taxonomy](./02_core_data_model.md#4-event-taxonomy--–∫–∞–Ω–æ–Ω—ñ—á–Ω—ñ-—Ç–∏–ø–∏-–ø–æ–¥—ñ–π)
   - [UI Contract](./01_architecture_overview.md#5-ui-contract--—â–æ-ui-—Ä–æ–±–∏—Ç—å-—ñ-–Ω–µ-—Ä–æ–±–∏—Ç—å)

### –ö–ª—é—á–æ–≤—ñ –ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ä–æ–∑—É–º—ñ–Ω–Ω—è:

- [ ] –Ø–∫–∞ —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ `state` —ñ `status`?
- [ ] –©–æ —Ç–∞–∫–µ approval snapshot —ñ –Ω–∞–≤—ñ—â–æ –≤—ñ–Ω –ø–æ—Ç—Ä—ñ–±–µ–Ω?
- [ ] –©–æ UI –º–æ–∂–µ —ñ –Ω–µ –º–æ–∂–µ –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ –≤ Supabase?
- [ ] –Ø–∫ n8n –æ–±—Ä–æ–±–ª—è—î failure scenarios?
- [ ] –Ø–∫ –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π —Ç–∏–ø –∫–µ–π—Å–∞ –±–µ–∑ –∑–º—ñ–Ω–∏ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏?
