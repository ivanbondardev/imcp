# Approvals Specification
## IMCP â€” Human Approval Gates Ğ´Ğ»Ñ Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€Ñ–Ğ²

**Ğ’ĞµÑ€ÑÑ–Ñ:** 1.0  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** Spec (PoC â†’ MVP)  
**Ğ¢Ğ¸Ğ¿ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°:** Spec  
**ĞÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ñ–Ñ:** Product, UX/UI, Frontend, Operations Manager  
**Changelog:**  
- v1.0 â€” initial spec based on demo/approvals.html

**ĞŸĞ¾Ğ¿ĞµÑ€ĞµĞ´Ğ½Ñ– Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¸:**  
- [00_shared_mental_model.md](../core/00_shared_mental_model.md) â€” Ğ¼ĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ° Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ  
- [01_architecture_overview.md](../core/01_architecture_overview.md) â€” Ğ°Ñ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°  
- [02_core_data_model.md](../core/02_core_data_model.md) â€” Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ´Ğ°Ğ½Ğ¸Ñ…  
- [03_approval_pattern.md](../core/03_approval_pattern.md) â€” Ğ¿Ğ°Ñ‚ĞµÑ€Ğ½ Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½ÑŒ  
- [04_case_cockpit_ux.md](../core/04_case_cockpit_ux.md) â€” UX/UI Case Cockpit  

**ĞŸĞ¾Ğ²'ÑĞ·Ğ°Ğ½Ñ– Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¸:**  
- [UI Style Reference](./ui_style_reference.md) â€” Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½-Ñ‚Ğ¾ĞºĞµĞ½Ğ¸  
- [Owner Dashboard Spec](./owner_dashboard_spec.md) â€” ÑĞ¿ĞµÑ†Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ Owner Dashboard  
- [Case List Spec](./case_list_spec.md) â€” ÑĞ¿ĞµÑ†Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ Case List  
- [Personal Settings Spec](./personal_settings_spec.md) â€” Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ– Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ  

---

## 1. Purpose â€” ĞĞ°Ğ²Ñ–Ñ‰Ğ¾ Ğ¿Ğ¾Ñ‚Ñ€Ñ–Ğ±Ğ½Ğ° ÑÑ‚Ğ¾Ñ€Ñ–Ğ½ĞºĞ° Approvals

Approvals Ğ² IMCP â€” Ñ†Ğµ **Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ñ–Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹ Ñ–Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ğ´Ğ»Ñ Human Approval Gates**, Ğ´Ğµ Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ Ğ¿Ñ€Ğ¸Ğ¹Ğ¼Ğ°Ñ” Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ Ñ‰Ğ¾Ğ´Ğ¾ Ğ¿Ñ–Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ… ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¾Ñ Ñ‡ĞµÑ€Ğ½ĞµÑ‚Ğ¾Ğº.

### 1.1 ĞÑĞ½Ğ¾Ğ²Ğ½Ñ– Ğ·Ğ°Ğ´Ğ°Ñ‡Ñ– Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€Ğ°

| Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | ĞĞ¿Ğ¸Ñ |
|--------|------|
| **ĞŸÑ€Ğ¸Ğ¹Ğ½ÑÑ‚Ñ‚Ñ Ñ€Ñ–ÑˆĞµĞ½ÑŒ** | Approve / Edit & Approve / Reject Ñ‡ĞµÑ€Ğ½ĞµÑ‚ĞºĞ¸ |
| **ĞĞ³Ğ»ÑĞ´ Ñ‡ĞµÑ€Ğ³Ğ¸** | Ğ‘Ğ°Ñ‡Ğ¸Ñ‚Ğ¸ Ğ²ÑÑ– pending approvals Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¼Ñƒ Ğ¼Ñ–ÑÑ†Ñ– |
| **ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ** | ĞŸĞµÑ€ĞµĞ³Ğ»ÑĞ½ÑƒÑ‚Ğ¸ request_snapshot, Ñ€Ğ¸Ğ·Ğ¸ĞºĞ¸, AI-Ğ°Ğ½Ğ°Ğ»Ñ–Ğ· |
| **Ğ†ÑÑ‚Ğ¾Ñ€Ñ–Ñ Ñ€Ñ–ÑˆĞµĞ½ÑŒ** | Ğ‘Ğ°Ñ‡Ğ¸Ñ‚Ğ¸ Ğ½ĞµÑ‰Ğ¾Ğ´Ğ°Ğ²Ğ½Ğ¾ Ğ¿Ñ€Ğ¸Ğ¹Ğ½ÑÑ‚Ñ– Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ |
| **ĞŸÑ€Ñ–Ğ¾Ñ€Ğ¸Ñ‚ĞµĞ·Ğ°Ñ†Ñ–Ñ** | ĞĞ±Ñ€Ğ¾Ğ±Ğ»ÑÑ‚Ğ¸ ÑĞ¿Ğ¾Ñ‡Ğ°Ñ‚ĞºÑƒ SLA-ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ– approvals |

### 1.2 Approvals â‰  Case Cockpit

| ĞÑĞ¿ĞµĞºÑ‚ | Approvals Page | Case Cockpit |
|--------|----------------|--------------|
| **Ğ¤Ğ¾ĞºÑƒÑ** | Ğ£ÑÑ– pending approvals | ĞĞ´Ğ¸Ğ½ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¸Ğ¹ ĞºĞµĞ¹Ñ |
| **ĞÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ñ–Ñ** | ĞœĞµĞ½ĞµĞ´Ğ¶ĞµÑ€/Ğ¾Ğ¿ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€ | ĞœĞµĞ½ĞµĞ´Ğ¶ĞµÑ€/Ğ¾Ğ¿ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€ |
| **ĞšĞ»ÑÑ‡Ğ¾Ğ²Ğµ Ğ¿Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ** | "Ğ©Ğ¾ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±ÑƒÑ” Ğ¼Ğ¾Ğ³Ğ¾ Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ?" | "Ğ©Ğ¾ Ğ²Ñ–Ğ´Ğ±ÑƒĞ²Ğ°Ñ”Ñ‚ÑŒÑÑ Ğ² Ñ†ÑŒĞ¾Ğ¼Ñƒ ĞºĞµĞ¹ÑÑ–?" |
| **Ğ”Ñ–Ñ—** | Approve/Reject inline | ĞŸĞ¾Ğ²Ğ½Ğ¸Ğ¹ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒ ĞºĞµĞ¹ÑĞ° |
| **ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚** | Request snapshot | Timeline, docs, chat |

> **Approvals** â€” Ñ†Ğµ "Ñ‡ĞµÑ€Ğ³Ğ° Ñ€Ñ–ÑˆĞµĞ½ÑŒ", Ğ° Ğ½Ğµ "Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¹ Ğ²Ğ¸Ğ³Ğ»ÑĞ´ ĞºĞµĞ¹ÑĞ°".

### 1.3 Human Approval Gates â€” ĞšĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ñ–Ñ

Approval â€” Ñ†Ğµ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒĞ½Ğ° Ñ‚Ğ¾Ñ‡ĞºĞ°, Ğ´Ğµ:
1. **Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¿Ñ–Ğ´Ğ³Ğ¾Ñ‚ÑƒĞ²Ğ°Ğ»Ğ°** Ñ‡ĞµÑ€Ğ½ĞµÑ‚ĞºÑƒ Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ (quote, BL draft, dims change Ñ‚Ğ¾Ñ‰Ğ¾)
2. **Ğ›ÑĞ´Ğ¸Ğ½Ğ° Ğ¿Ğ¾Ğ²Ğ¸Ğ½Ğ½Ğ°** Ğ¿Ñ€Ğ¸Ğ¹Ğ½ÑÑ‚Ğ¸ Ğ¾Ğ´Ğ½Ğµ Ğ· Ñ€Ñ–ÑˆĞµĞ½ÑŒ:
   - **Approve** â€” Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğ¸ ÑĞº Ñ”
   - **Edit & Approve** â€” Ñ€ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ñ‚Ğ¸ Ñ– Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğ¸
   - **Reject** â€” Ğ²Ñ–Ğ´Ñ…Ğ¸Ğ»Ğ¸Ñ‚Ğ¸

ĞšĞ¾Ğ¶Ğ½Ğµ Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ Ñ„Ñ–ĞºÑÑƒÑ”Ñ‚ÑŒÑÑ Ğ· Ğ¿Ğ¾Ğ²Ğ½Ğ¾Ñ Ğ°ÑƒĞ´Ğ¸Ñ‚-Ñ–ÑÑ‚Ğ¾Ñ€Ñ–Ñ”Ñ Ğ² `case_events`.

### 1.4 Ğ’Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ½Ñ–ÑÑ‚ÑŒ Shared Mental Model

Approvals Ñ€ĞµĞ°Ğ»Ñ–Ğ·ÑƒÑ” Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ğ¸ [Shared Mental Model](../core/00_shared_mental_model.md):

| ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿ | Ğ ĞµĞ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ Ğ² Approvals |
|---------|------------------------|
| **Human-in-the-Loop** | Ğ›ÑĞ´Ğ¸Ğ½Ğ° Ğ¿Ñ€Ğ¸Ğ¹Ğ¼Ğ°Ñ” Ñ„Ñ–Ğ½Ğ°Ğ»ÑŒĞ½Ğµ Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ |
| **AI Ğ³Ğ¾Ñ‚ÑƒÑ”, Ğ»ÑĞ´Ğ¸Ğ½Ğ° Ğ·Ğ°Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ÑƒÑ”** | Request snapshot + decision buttons |
| **Accountability** | Ğ¥Ñ‚Ğ¾ Ğ¿Ñ€Ğ¸Ğ¹Ğ½ÑĞ² Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ, ĞºĞ¾Ğ»Ğ¸, Ğ· ÑĞºĞ¸Ğ¼Ğ¸ Ğ·Ğ¼Ñ–Ğ½Ğ°Ğ¼Ğ¸ |
| **Fatigue-Aware Design** | Risk flags, SLA badges Ğ´Ğ»Ñ Ğ¿Ñ€Ñ–Ğ¾Ñ€Ğ¸Ñ‚ĞµĞ·Ğ°Ñ†Ñ–Ñ— |
| **Actionable Interface** | ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ´Ñ–Ğ¹ Ğ¿Ñ€ÑĞ¼Ğ¾ Ğ½Ğ° ĞºĞ°Ñ€Ñ‚Ñ†Ñ– approval |

---

## 2. Scope (PoC vs MVP)

### 2.1 PoC (Minimal Viable)

| Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ–ÑÑ‚ÑŒ | ĞŸÑ€Ñ–Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ | ĞĞ¿Ğ¸Ñ |
|------------------|-----------|------|
| **Pending Section** | HIGH | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº PENDING approvals Ğ· ĞºĞ°Ñ€Ñ‚ĞºĞ°Ğ¼Ğ¸ |
| **Approval Card** | HIGH | Type, snapshot, risks, action buttons |
| **Action Buttons** | HIGH | Approve / Edit & Approve / Reject |
| **Recently Decided** | MEDIUM | Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ Ğ½ĞµÑ‰Ğ¾Ğ´Ğ°Ğ²Ğ½Ñ–Ñ… Ñ€Ñ–ÑˆĞµĞ½ÑŒ |
| **Sidebar Filters** | MEDIUM | Pending / Approved / Rejected |

### 2.2 MVP (Extended)

| Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ–ÑÑ‚ÑŒ | ĞŸÑ€Ñ–Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ | ĞĞ¿Ğ¸Ñ |
|------------------|-----------|------|
| PoC features | â€” | Ğ’ÑĞµ Ğ· PoC |
| **Edit Modal** | HIGH | Inline Ñ€ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ request_snapshot |
| **Reject Reason** | HIGH | ĞĞ±Ğ¾Ğ²'ÑĞ·ĞºĞ¾Ğ²Ğ¸Ğ¹ ĞºĞ¾Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€ Ğ¿Ñ€Ğ¸ reject |
| **Filter by Type** | MEDIUM | Ğ¤Ñ–Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ approval_type |
| **Search** | MEDIUM | ĞŸĞ¾ÑˆÑƒĞº Ğ¿Ğ¾ case_number |
| **Batch Approve** | LOW | Multi-select + bulk approve |

### 2.3 v2 (Scale)

| Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ–ÑÑ‚ÑŒ | ĞĞ¿Ğ¸Ñ |
|------------------|------|
| Delegation | ĞŸĞµÑ€ĞµĞ½Ğ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ approval Ñ–Ğ½ÑˆĞ¾Ğ¼Ñƒ |
| Auto-approve rules | ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğµ Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ½Ñ low-risk |
| SLA notifications | Push/email Ğ¿Ñ€Ğ¸ Ğ½Ğ°Ğ±Ğ»Ğ¸Ğ¶ĞµĞ½Ğ½Ñ– SLA |
| Keyboard shortcuts | Quick approve/reject |

---

## 3. Information Architecture

### 3.1 Ğ—Ğ°Ğ³Ğ°Ğ»ÑŒĞ½Ğ° ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ÑÑ‚Ğ¾Ñ€Ñ–Ğ½ĞºĞ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Sidebar Navigation                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Header: "ĞŸÑ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ½Ñ (Approvals)" + Filter Button           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Info Banner: ĞŸĞ¾ÑÑĞ½ĞµĞ½Ğ½Ñ Human Approval Gates                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Section: "ĞÑ‡Ñ–ĞºÑƒÑÑ‚ÑŒ Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ (PENDING)" + count                 â”‚
â”‚ â””â”€â”€ Approval Card 1 (QUOTE_APPROVAL)                         â”‚
â”‚ â””â”€â”€ Approval Card 2 (DIMS_CHANGE_APPROVAL)                   â”‚
â”‚ â””â”€â”€ Approval Card 3 (BL_DRAFT_APPROVAL)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Section: "ĞĞµÑ‰Ğ¾Ğ´Ğ°Ğ²Ğ½Ğ¾ Ğ²Ğ¸Ñ€Ñ–ÑˆĞµĞ½Ñ–" + count                         â”‚
â”‚ â””â”€â”€ Table with decided approvals                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Reference: "Ğ¢Ğ¸Ğ¿Ğ¸ Approvals" (Ğ´Ğ¾Ğ²Ñ–Ğ´ĞºĞ¾Ğ²Ğ° Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Sidebar Navigation

| Ğ¡ĞµĞºÑ†Ñ–Ñ | ĞŸÑƒĞ½ĞºÑ‚Ğ¸ | Badge |
|--------|--------|-------|
| **Main** | Owner Dashboard, ĞšĞµĞ¹ÑĞ¸, ĞŸÑ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ½Ñ, Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¸, Ğ¢Ğ°Ğ¹Ğ¼Ğ»Ğ°Ğ¹Ğ½ | ĞŸÑ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ½Ñ: pending count |
| **Ğ¤Ñ–Ğ»ÑŒÑ‚Ñ€Ğ¸** | ĞÑ‡Ñ–ĞºÑƒÑÑ‚ÑŒ Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ, Ğ—Ğ°Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ñ–, Ğ’Ñ–Ğ´Ñ…Ğ¸Ğ»ĞµĞ½Ñ– | Counts |
| **ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ** | ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ– | â€” |

### 3.3 Drill-down Model

```
Approvals Page â†’ Case Link in Card â†’ Case Cockpit
      â†“
Approval Card â†’ Approve/Reject â†’ Updated status
      â†“
Approval Card â†’ Edit & Approve â†’ Edit Modal â†’ Updated with changes
      â†“
Recently Decided â†’ Details â†’ Case Cockpit
```

---

## 4. Approval Card Specification

### 4.1 Card Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Approval Type Icon] QUOTE_APPROVAL    [PENDING] [Case: F1-..] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ ĞŸÑ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğ¸ ĞºĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ†Ñ–Ñ Ñ†Ñ–Ğ½Ğ¸                                   â”‚
â”‚ Client: ACME Ltd â€¢ Route: Yiwu â†’ Kyiv (SEA) â€¢ Cargo: 12 pcs    â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Request Snapshot:                                           â”‚ â”‚
â”‚ â”‚ {                                                           â”‚ â”‚
â”‚ â”‚   "base_cost_usd": 2450,                                    â”‚ â”‚
â”‚ â”‚   "margin_usd": 350,                                        â”‚ â”‚
â”‚ â”‚   "total_usd": 2800,                                        â”‚ â”‚
â”‚ â”‚   "assumptions": [...],                                     â”‚ â”‚
â”‚ â”‚   "risks": [...]                                            â”‚ â”‚
â”‚ â”‚ }                                                           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ âš ï¸ Ğ Ğ¸Ğ·Ğ¸Ğº: Ğ³Ğ°Ğ±Ğ°Ñ€Ğ¸Ñ‚Ğ¸ ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ğ° Ñ‰Ğµ Ğ½Ğµ Ğ²ĞµÑ€Ğ¸Ñ„Ñ–ĞºĞ¾Ğ²Ğ°Ğ½Ñ– ÑĞºĞ»Ğ°Ğ´Ğ¾Ğ¼          â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    [âœ“ Approve] [âœ Edit & Approve] [âœ• Reject]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Card Header

| Ğ•Ğ»ĞµĞ¼ĞµĞ½Ñ‚ | ĞĞ¿Ğ¸Ñ | ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´ |
|---------|------|---------|
| **Icon** | SVG Ñ–ĞºĞ¾Ğ½ĞºĞ° Ñ‚Ğ¸Ğ¿Ñƒ | $ (quote), ğŸ“¦ (dims), ğŸ“„ (BL) |
| **Approval Type** | Badge Ğ· Ñ‚Ğ¸Ğ¿Ğ¾Ğ¼ | `QUOTE_APPROVAL` |
| **Status Badge** | ĞŸĞ¾Ñ‚Ğ¾Ñ‡Ğ½Ğ¸Ğ¹ ÑÑ‚Ğ°Ñ‚ÑƒÑ | `[PENDING]` â€” Ğ¶Ğ¾Ğ²Ñ‚Ğ¸Ğ¹ |
| **SLA Badge** | Ğ¯ĞºÑ‰Ğ¾ SLA ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¸Ğ¹ | `[SLA: 8h]` â€” Ñ‡ĞµÑ€Ğ²Ğ¾Ğ½Ğ¸Ğ¹ |
| **Case Link** | ĞŸĞ¾ÑĞ¸Ğ»Ğ°Ğ½Ğ½Ñ Ğ½Ğ° ĞºĞµĞ¹Ñ | `Case: F1-SEA-2026-02451` |

### 4.3 Card Body

| Ğ•Ğ»ĞµĞ¼ĞµĞ½Ñ‚ | ĞĞ¿Ğ¸Ñ |
|---------|------|
| **Title** | Ğ›ÑĞ´ÑÑŒĞºĞ¸Ğ¹ Ğ¾Ğ¿Ğ¸Ñ Ğ´Ñ–Ñ— ("ĞŸÑ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğ¸ ĞºĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ†Ñ–Ñ Ñ†Ñ–Ğ½Ğ¸") |
| **Context Line** | Client, Route, Cargo â€” ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ |
| **Request Snapshot** | JSON/structured view Ğ¿Ñ–Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ… Ğ´Ğ°Ğ½Ğ¸Ñ… |
| **Risk Flag** | Ğ’Ğ¸Ğ´Ñ–Ğ»ĞµĞ½Ğ¸Ğ¹ Ğ±Ğ»Ğ¾Ğº Ğ· Ñ€Ğ¸Ğ·Ğ¸ĞºĞ°Ğ¼Ğ¸ (ÑĞºÑ‰Ğ¾ Ñ”) |
| **AI Check** | Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ AI-Ğ°Ğ½Ğ°Ğ»Ñ–Ğ·Ñƒ (ÑĞºÑ‰Ğ¾ Ñ”) |

### 4.4 Request Snapshot Display

| Approval Type | Ğ©Ğ¾ Ğ¿Ğ¾ĞºĞ°Ğ·ÑƒÑ”Ğ¼Ğ¾ |
|---------------|--------------|
| `QUOTE_APPROVAL` | Base cost, margin, total, assumptions, risks |
| `DIMS_CHANGE_APPROVAL` | Client dims vs Warehouse dims, % change, price impact |
| `BL_DRAFT_APPROVAL` | BL number, shipper, consignee, vessel, AI check results |
| `ONEC_DEAL_CREATE_APPROVAL` | 1C payload preview, idempotency key |
| `POA_SCAN_APPROVAL` | Document preview link, checklist |

### 4.5 Risk Flag Styles

| Risk Level | Background | Border | Icon |
|------------|------------|--------|------|
| **Low** | `#F0FDF4` (green-50) | `#22C55E` | â„¹ï¸ |
| **Medium** | `#FEF3C7` (amber-50) | `#F59E0B` | âš ï¸ |
| **High** | `#FEE2E2` (red-50) | `#EF4444` | ğŸš¨ |

### 4.6 Action Buttons

| Button | Style | Icon | Behavior |
|--------|-------|------|----------|
| **Approve** | `btn-success` | âœ“ | Instant approve, toast confirmation |
| **Edit & Approve** | `btn-secondary` | âœ | Open edit modal, then approve |
| **Reject** | `btn-danger` | âœ• | Open reject modal with required comment |

---

## 5. Approval Types Reference

### 5.1 Types Ğ´Ğ»Ñ F1_SEA_IMPORT

| Type | ĞĞ¿Ğ¸Ñ | Request Snapshot | Risk Level |
|------|------|------------------|------------|
| `QUOTE_APPROVAL` | ĞŸÑ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ½Ñ ĞºĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ†Ñ–Ñ— Ñ†Ñ–Ğ½Ğ¸ Ğ¿ĞµÑ€ĞµĞ´ Ğ²Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²ĞºĞ¾Ñ ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ñƒ | Breakdown ÑĞ¾Ğ±Ñ–Ğ²Ğ°Ñ€Ñ‚Ğ¾ÑÑ‚Ñ–, Ğ¼Ğ°Ñ€Ğ¶Ğ°, ÑƒĞ¼Ğ¾Ğ²Ğ¸, Ñ€Ğ¸Ğ·Ğ¸ĞºĞ¸ | Medium |
| `ONEC_DEAL_CREATE_APPROVAL` | ĞŸÑ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ½Ñ ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ ÑƒĞ³Ğ¾Ğ´Ğ¸ Ğ² 1Ğ¡ | Payload Ğ´Ğ»Ñ 1C, idempotency_key | High |
| `DIMS_CHANGE_APPROVAL` | ĞŸÑ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ½Ñ Ğ·Ğ¼Ñ–Ğ½Ğ¸ Ğ³Ğ°Ğ±Ğ°Ñ€Ğ¸Ñ‚Ñ–Ğ² (client vs warehouse) | ĞŸĞ¾Ñ€Ñ–Ğ²Ğ½ÑĞ½Ğ½Ñ dims, Ğ²Ğ¿Ğ»Ğ¸Ğ² Ğ½Ğ° Ñ†Ñ–Ğ½Ñƒ | Medium |
| `BL_DRAFT_APPROVAL` | ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ° Ğ´Ñ€Ğ°Ñ„Ñ‚Ñƒ ĞºĞ¾Ğ½Ğ¾ÑĞ°Ğ¼ĞµĞ½Ñ‚Ñƒ | BL version, diff Ğ· ĞºĞ¾Ğ½Ñ‚Ñ€Ğ°ĞºÑ‚Ğ¾Ğ¼, AI check | High |
| `POA_SCAN_APPROVAL` | ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ° ÑĞºĞ°Ğ½Ñƒ Ğ´Ğ¾Ğ²Ñ–Ñ€ĞµĞ½Ğ¾ÑÑ‚Ñ– | Document preview, checklist | Medium |

### 5.2 Approval Type Thresholds

| approval_type | Warning Time | Critical Time |
|---------------|--------------|---------------|
| `QUOTE_APPROVAL` | > 30m | > 2h |
| `DIMS_CHANGE_APPROVAL` | > 1h | > 4h |
| `BL_DRAFT_APPROVAL` | > 1h | > 4h |
| `ONEC_DEAL_CREATE_APPROVAL` | > 15m | > 1h |
| `POA_SCAN_APPROVAL` | > 2h | > 8h |

---

## 6. Recently Decided Section

### 6.1 Table Columns

| ĞšĞ¾Ğ»Ğ¾Ğ½ĞºĞ° | ĞšĞ»ÑÑ‡ | ĞĞ¿Ğ¸Ñ | ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´ |
|---------|------|------|---------|
| Ğ¢Ğ¸Ğ¿ | `approval_type` | Type badge | `[QUOTE_APPROVAL]` |
| Case | `case_number` | Case ID | `F1-SEA-2026-02444` |
| Ğ Ñ–ÑˆĞµĞ½Ğ½Ñ | `status` | Decision badge | `[APPROVED]` / `[REJECTED]` |
| Ğ¥Ñ‚Ğ¾ | `decided_by` | Avatar + name | `[ĞœĞš] ĞœĞ°Ñ€Ñ–Ñ Ğš.` |
| ĞšĞ¾Ğ»Ğ¸ | `decided_at` | Relative time | `Ğ’Ñ‡Ğ¾Ñ€Ğ°, 16:42` |
| Action | â€” | Details button | `[Details]` |

### 6.2 Decision Badges

| Status | Background | Color |
|--------|------------|-------|
| `APPROVED` | `#DCFCE7` (green-100) | `#166534` (green-800) |
| `REJECTED` | `#FEE2E2` (red-100) | `#991B1B` (red-800) |
| `APPROVED_WITH_EDITS` | `#DBEAFE` (blue-100) | `#1E40AF` (blue-800) |

### 6.3 SQL Query

```sql
SELECT 
  a.id,
  a.approval_type,
  a.status,
  a.decided_at,
  a.decided_by_user_id,
  a.request_snapshot,
  a.decision_snapshot,
  c.case_number,
  u.raw_user_meta_data->>'full_name' as decided_by_name,
  u.raw_user_meta_data->>'initials' as decided_by_initials
FROM approvals a
JOIN cases c ON c.id = a.case_id
LEFT JOIN auth.users u ON u.id = a.decided_by_user_id
WHERE a.status IN ('APPROVED', 'REJECTED')
  AND c.org_id = $org_id
ORDER BY a.decided_at DESC
LIMIT 20;
```

---

## 7. Sidebar Filters

### 7.1 Filter Options

| Ğ¤Ñ–Ğ»ÑŒÑ‚Ñ€ | Icon | ĞĞ¿Ğ¸Ñ | Query |
|--------|------|------|-------|
| ĞÑ‡Ñ–ĞºÑƒÑÑ‚ÑŒ Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ | â± | PENDING approvals | `status = 'PENDING'` |
| Ğ—Ğ°Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ñ– | âœ“ | APPROVED approvals | `status = 'APPROVED'` |
| Ğ’Ñ–Ğ´Ñ…Ğ¸Ğ»ĞµĞ½Ñ– | âœ• | REJECTED approvals | `status = 'REJECTED'` |

### 7.2 Filter Behavior

- Ğ¤Ñ–Ğ»ÑŒÑ‚Ñ€Ğ¸ Ñ” **Ğ²Ğ·Ğ°Ñ”Ğ¼Ğ¾Ğ²Ğ¸ĞºĞ»ÑÑ‡Ğ½Ğ¸Ğ¼Ğ¸** (radio logic)
- ĞĞºÑ‚Ğ¸Ğ²Ğ½Ğ¸Ğ¹ Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€ Ğ¿Ñ–Ğ´ÑĞ²Ñ–Ñ‡ÑƒÑ”Ñ‚ÑŒÑÑ
- Badge Ğ¿Ğ¾ĞºĞ°Ğ·ÑƒÑ” count
- Default: "ĞÑ‡Ñ–ĞºÑƒÑÑ‚ÑŒ Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ"

---

## 8. Wireframe â€” Approvals Page (PoC)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ IMCP â–¸ ĞŸÑ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ½Ñ                                            [User Avatar]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ğ†ĞœĞ¡Ğ                â”‚ ĞŸÑ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ½Ñ (Approvals)                               â”‚
â”‚ Case Platform      â”‚ Human Approval Gates â€” 3 Ğ¾Ñ‡Ñ–ĞºÑƒÑÑ‚ÑŒ Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ               â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                                              [Ğ¤Ñ–Ğ»ÑŒÑ‚Ñ€Ğ¸]  â”‚
â”‚                    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ â–¡ Owner Dashboard  â”‚                                                         â”‚
â”‚ â–¡ ĞšĞµĞ¹ÑĞ¸        12  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â–  ĞŸÑ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ½Ñ 3  â”‚ â”‚ â„¹ï¸ ĞŸÑ€Ğ¾ Human Approval Gates                         â”‚ â”‚
â”‚ â–¡ Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¸        â”‚ â”‚                                                     â”‚ â”‚
â”‚ â–¡ Ğ¢Ğ°Ğ¹Ğ¼Ğ»Ğ°Ğ¹Ğ½         â”‚ â”‚ Approval â€” Ñ†Ğµ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒĞ½Ğ° Ñ‚Ğ¾Ñ‡ĞºĞ°, Ğ´Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°          â”‚ â”‚
â”‚                    â”‚ â”‚ Ğ¿Ñ–Ğ´Ğ³Ğ¾Ñ‚ÑƒĞ²Ğ°Ğ»Ğ° Ñ‡ĞµÑ€Ğ½ĞµÑ‚ĞºÑƒ Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ, Ñ– Ğ»ÑĞ´Ğ¸Ğ½Ğ° Ğ¿Ğ¾Ğ²Ğ¸Ğ½Ğ½Ğ°      â”‚ â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚ Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğ¸, Ğ²Ñ–Ğ´Ñ€ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ñ‚Ğ¸ Ñ– Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğ¸, Ğ°Ğ±Ğ¾       â”‚ â”‚
â”‚ Ğ¤Ñ–Ğ»ÑŒÑ‚Ñ€Ğ¸            â”‚ â”‚ Ğ²Ñ–Ğ´Ñ…Ğ¸Ğ»Ğ¸Ñ‚Ğ¸.                                          â”‚ â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â± ĞÑ‡Ñ–ĞºÑƒÑÑ‚ÑŒ        â”‚                                                         â”‚
â”‚   Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ       3  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ âœ“ Ğ—Ğ°Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ñ–      â”‚ â± ĞĞ§Ğ†ĞšĞ£Ğ®Ğ¢Ğ¬ Ğ Ğ†Ğ¨Ğ•ĞĞĞ¯ (PENDING)                         3  â”‚
â”‚ âœ• Ğ’Ñ–Ğ´Ñ…Ğ¸Ğ»ĞµĞ½Ñ–        â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                    â”‚                                                         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ       â”‚ â”‚ [$] QUOTE_APPROVAL        [PENDING] [Case: F1-..51] â”‚ â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚ âš™ ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ–      â”‚ â”‚ ĞŸÑ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğ¸ ĞºĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ†Ñ–Ñ Ñ†Ñ–Ğ½Ğ¸                        â”‚ â”‚
â”‚                    â”‚ â”‚ Client: ACME Ltd â€¢ Route: Yiwu â†’ Kyiv â€¢ 12 pcs      â”‚ â”‚
â”‚                    â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚                    â”‚ â”‚ â”‚ Request Snapshot:                               â”‚ â”‚ â”‚
â”‚                    â”‚ â”‚ â”‚ { base_cost: 2450, margin: 350, total: 2800 }   â”‚ â”‚ â”‚
â”‚                    â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚                    â”‚ â”‚ âš ï¸ Ğ Ğ¸Ğ·Ğ¸Ğº: Ğ³Ğ°Ğ±Ğ°Ñ€Ğ¸Ñ‚Ğ¸ Ğ½Ğµ Ğ²ĞµÑ€Ğ¸Ñ„Ñ–ĞºĞ¾Ğ²Ğ°Ğ½Ñ– ÑĞºĞ»Ğ°Ğ´Ğ¾Ğ¼          â”‚ â”‚
â”‚                    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚                    â”‚ â”‚              [âœ“ Approve] [âœ Edit] [âœ• Reject]       â”‚ â”‚
â”‚                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                    â”‚                                                         â”‚
â”‚                    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                    â”‚ â”‚ [ğŸ“¦] DIMS_CHANGE_APPROVAL [PENDING] [SLA: 8h] ğŸ”´    â”‚ â”‚
â”‚                    â”‚ â”‚                              [Case: F1-SEA-..48]   â”‚ â”‚
â”‚                    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚                    â”‚ â”‚ ĞŸÑ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğ¸ Ğ·Ğ¼Ñ–Ğ½Ñƒ Ğ³Ğ°Ğ±Ğ°Ñ€Ğ¸Ñ‚Ñ–Ğ²                         â”‚ â”‚
â”‚                    â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚                    â”‚ â”‚ â”‚ Client Declared  â”‚ Warehouse Measured        â”‚   â”‚ â”‚
â”‚                    â”‚ â”‚ â”‚ 3.2 cbm          â”‚ 4.1 cbm (+28%) ğŸ”´         â”‚   â”‚ â”‚
â”‚                    â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚                    â”‚ â”‚ âš ï¸ Ğ—Ğ¼Ñ–Ğ½Ğ° Ğ³Ğ°Ğ±Ğ°Ñ€Ğ¸Ñ‚Ñ–Ğ² >10% Ğ²Ğ¿Ğ»Ğ¸Ğ½Ğµ Ğ½Ğ° Ñ†Ñ–Ğ½Ñƒ (+$180)      â”‚ â”‚
â”‚                    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚                    â”‚ â”‚       [âœ“ Approve New Dims] [âœ Edit] [âœ• Reject]     â”‚ â”‚
â”‚                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                    â”‚                                                         â”‚
â”‚                    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                    â”‚ â”‚ [ğŸ“„] BL_DRAFT_APPROVAL     [PENDING] [Case: ..45]  â”‚ â”‚
â”‚                    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚                    â”‚ â”‚ ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€Ğ¸Ñ‚Ğ¸ Ğ´Ñ€Ğ°Ñ„Ñ‚ ĞºĞ¾Ğ½Ğ¾ÑĞ°Ğ¼ĞµĞ½Ñ‚Ñƒ (BL)                   â”‚ â”‚
â”‚                    â”‚ â”‚ { bl_number: "MSKU123...", vessel: "EVER GOLDEN" }  â”‚ â”‚
â”‚                    â”‚ â”‚ âš ï¸ AI Ğ²Ğ¸ÑĞ²Ğ¸Ğ²: ĞĞ°Ğ·Ğ²Ğ° ĞºĞ¾Ğ½ÑĞ¸Ğ³Ğ½Ğ°Ñ‚Ğ¾Ñ€Ğ° Ğ²Ñ–Ğ´Ñ€Ñ–Ğ·Ğ½ÑÑ”Ñ‚ÑŒÑÑ      â”‚ â”‚
â”‚                    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚                    â”‚ â”‚   [âœ“ Approve BL] [ğŸ“„ View Document] [âœ• Correction] â”‚ â”‚
â”‚                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                    â”‚                                                         â”‚
â”‚                    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                    â”‚ âœ“ ĞĞ•Ğ©ĞĞ”ĞĞ’ĞĞ Ğ’Ğ˜Ğ Ğ†Ğ¨Ğ•ĞĞ†                                 5  â”‚
â”‚                    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                    â”‚                                                         â”‚
â”‚                    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                    â”‚ â”‚ Ğ¢Ğ¸Ğ¿          â”‚ Case      â”‚ Ğ Ñ–ÑˆĞµĞ½Ğ½Ñ  â”‚ Ğ¥Ñ‚Ğ¾    â”‚ ĞšĞ¾Ğ»Ğ¸ â”‚ â”‚
â”‚                    â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚                    â”‚ â”‚ QUOTE_APPR.. â”‚ ..02444   â”‚ APPROVED â”‚ ĞœĞš     â”‚ Ğ’Ñ‡Ğ¾Ñ€ â”‚ â”‚
â”‚                    â”‚ â”‚ ONEC_DEAL..  â”‚ ..02443   â”‚ APPROVED â”‚ Ğ†ĞŸ     â”‚ Ğ’Ñ‡Ğ¾Ñ€ â”‚ â”‚
â”‚                    â”‚ â”‚ DIMS_CHANGE  â”‚ ..02442   â”‚ REJECTED â”‚ ĞĞ¡     â”‚ Ğ’Ñ‡Ğ¾Ñ€ â”‚ â”‚
â”‚                    â”‚ â”‚ BL_DRAFT     â”‚ ..02441   â”‚ APPROVED â”‚ Ğ†ĞŸ     â”‚ 2 Ğ´Ğ½ â”‚ â”‚
â”‚                    â”‚ â”‚ POA_SCAN     â”‚ ..02440   â”‚ APPROVED â”‚ ĞœĞš     â”‚ 2 Ğ´Ğ½ â”‚ â”‚
â”‚                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                    â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. UX Behavior & Interactions

### 9.1 Approve Flow

```
1. User clicks "Approve" button
   â†“
2. Optimistic UI: Button shows spinner
   â†“
3. API: POST /approvals/{id}/decide
   { decision: 'APPROVED', decision_snapshot: request_snapshot }
   â†“
4. Success:
   - Card animates out
   - Toast: "âœ“ Approval Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ¾"
   - Pending count decrements
   - Card moves to "Recently Decided"
   â†“
5. Error:
   - Toast: "ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ°: [message]"
   - Button returns to normal state
```

### 9.2 Edit & Approve Flow

```
1. User clicks "Edit & Approve" button
   â†“
2. Modal opens with editable request_snapshot
   â†“
3. User edits fields
   â†“
4. User clicks "Save & Approve"
   â†“
5. API: POST /approvals/{id}/decide
   { decision: 'APPROVED', decision_snapshot: edited_data, has_edits: true }
   â†“
6. Success:
   - Modal closes
   - Card animates out
   - Toast: "âœ“ Approval Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ¾ Ğ·Ñ– Ğ·Ğ¼Ñ–Ğ½Ğ°Ğ¼Ğ¸"
```

### 9.3 Reject Flow

```
1. User clicks "Reject" button
   â†“
2. Modal opens with:
   - Reason field (required)
   - Request snapshot (read-only)
   â†“
3. User enters reason
   â†“
4. User clicks "Confirm Reject"
   â†“
5. API: POST /approvals/{id}/decide
   { decision: 'REJECTED', rejection_reason: "..." }
   â†“
6. Success:
   - Modal closes
   - Card animates out
   - Toast: "Approval Ğ²Ñ–Ğ´Ñ…Ğ¸Ğ»ĞµĞ½Ğ¾"
   - Trigger fallback workflow in case
```

### 9.4 Case Link Click

| Element | Action | Result |
|---------|--------|--------|
| Case badge in header | Click | â†’ Navigate to Case Cockpit |
| Details button (history) | Click | â†’ Navigate to Case Cockpit |

### 9.5 Empty States

| Section | Empty State |
|---------|-------------|
| Pending approvals | "ĞĞµĞ¼Ğ°Ñ” approvals, Ñ‰Ğ¾ Ğ¾Ñ‡Ñ–ĞºÑƒÑÑ‚ÑŒ Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ ğŸ‰" |
| Recently decided | "ĞĞµĞ¼Ğ°Ñ” Ğ½ĞµÑ‰Ğ¾Ğ´Ğ°Ğ²Ğ½Ñ–Ñ… Ñ€Ñ–ÑˆĞµĞ½ÑŒ" |
| All filters empty | "ĞĞ±ĞµÑ€Ñ–Ñ‚ÑŒ Ñ–Ğ½ÑˆĞ¸Ğ¹ Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€" |

### 9.6 Loading States

| Component | Loading Behavior |
|-----------|-----------------|
| Approval cards | Skeleton cards (3 placeholders) |
| History table | Skeleton table rows |
| Action buttons | Spinner on clicked button |

---

## 10. Data Sources (Supabase)

### 10.1 Core Tables

| Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ | Ğ”Ğ°Ğ½Ñ– Ğ´Ğ»Ñ Approvals |
|---------|-------------------|
| `approvals` | All approval data, status, snapshots |
| `cases` | Case context, case_number, client |
| `users` | Decided by name, avatar |
| `case_events` | Audit trail |

### 10.2 Key Queries

```sql
-- Pending approvals for current user's org
SELECT 
  a.id,
  a.approval_type,
  a.status,
  a.requested_at,
  a.request_snapshot,
  a.sla_deadline,
  c.id as case_id,
  c.case_number,
  c.payload->'client'->>'name' as client_name,
  c.payload->>'route' as route
FROM approvals a
JOIN cases c ON c.id = a.case_id
WHERE a.status = 'PENDING'
  AND c.org_id = $org_id
ORDER BY 
  CASE WHEN a.sla_deadline < now() + interval '4h' THEN 0 ELSE 1 END,
  a.requested_at ASC;

-- Count by status
SELECT 
  status,
  COUNT(*) as count
FROM approvals a
JOIN cases c ON c.id = a.case_id
WHERE c.org_id = $org_id
GROUP BY status;
```

### 10.3 Views (Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ¾Ğ²Ğ°Ğ½Ğ¾)

```sql
-- View for pending approvals with context
CREATE VIEW v_pending_approvals AS
SELECT 
  a.id,
  a.approval_type,
  a.status,
  a.requested_at,
  a.request_snapshot,
  a.sla_deadline,
  c.id as case_id,
  c.case_number,
  c.case_type,
  c.org_id,
  c.payload->'client'->>'name' as client_name,
  c.payload->'route' as route_info,
  -- SLA status
  CASE 
    WHEN a.sla_deadline < now() THEN 'OVERDUE'
    WHEN a.sla_deadline < now() + interval '4h' THEN 'CRITICAL'
    WHEN a.sla_deadline < now() + interval '24h' THEN 'WARNING'
    ELSE 'OK'
  END as sla_status,
  -- Risks from request_snapshot
  a.request_snapshot->'risks' as risks
FROM approvals a
JOIN cases c ON c.id = a.case_id
WHERE a.status = 'PENDING';
```

### 10.4 RLS Policies

```sql
-- User can see approvals for their org
CREATE POLICY "org_approvals" ON approvals
  FOR SELECT
  USING (
    case_id IN (
      SELECT id FROM cases WHERE org_id = auth.jwt() ->> 'org_id'
    )
  );

-- User can update approvals (decide) for their org
CREATE POLICY "decide_approvals" ON approvals
  FOR UPDATE
  USING (
    case_id IN (
      SELECT id FROM cases WHERE org_id = auth.jwt() ->> 'org_id'
    )
  );
```

---

## 11. UI Components

### 11.1 Approval Card

```css
.approval-item {
  background: var(--bg-editor);         /* #FFFFFF */
  border: 1px solid var(--border);      /* #D0D0D0 */
  border-radius: var(--radius-lg);      /* 12px */
  margin-bottom: 16px;
  overflow: hidden;
}

.approval-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  background: var(--bg-panel);          /* #F3F3F3 */
  border-bottom: 1px solid var(--divider);
}

.approval-type {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--text-secondary);
}

.approval-body {
  padding: 16px;
}

.approval-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  padding: 12px 16px;
  background: var(--bg-panel);
  border-top: 1px solid var(--divider);
}
```

### 11.2 Request Snapshot

```css
.approval-snapshot {
  background: var(--bg-sidebar);        /* #F3F3F3 */
  border-radius: var(--radius-md);      /* 10px */
  padding: 12px;
  font-family: monospace;
  font-size: 12px;
  margin: 12px 0;
  overflow-x: auto;
}

.approval-snapshot pre {
  margin: 0;
  white-space: pre-wrap;
  word-break: break-word;
}
```

### 11.3 Risk Flag

```css
.risk-flag {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 10px 12px;
  border-radius: var(--radius-md);
  font-size: 13px;
  margin-top: 12px;
}

.risk-flag svg {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  margin-top: 2px;
}

.risk-medium {
  background: #FEF3C7;                  /* Amber-50 */
  color: #92400E;                       /* Amber-800 */
}

.risk-high {
  background: #FEE2E2;                  /* Red-50 */
  color: #991B1B;                       /* Red-800 */
}
```

### 11.4 Info Banner

```css
.info-banner {
  background: linear-gradient(135deg, #EFF6FF 0%, #DBEAFE 100%);
  border: 1px solid #93C5FD;
  border-radius: var(--radius-lg);
  padding: 16px;
  margin-bottom: 24px;
}

.info-banner-content {
  display: flex;
  gap: 12px;
}

.info-banner-icon {
  width: 36px;
  height: 36px;
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.info-banner h4 {
  margin: 0 0 4px;
  font-size: 14px;
  font-weight: 600;
}

.info-banner p {
  margin: 0;
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 1.5;
}
```

### 11.5 Action Buttons

```css
.btn-success {
  background: #22C55E;
  color: white;
  border: none;
}

.btn-success:hover {
  background: #16A34A;
}

.btn-danger {
  background: #EF4444;
  color: white;
  border: none;
}

.btn-danger:hover {
  background: #DC2626;
}
```

---

## 12. Edit Modal Specification

### 12.1 Modal Structure (MVP)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ñ‚Ğ¸ Ñ‚Ğ° Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğ¸                              [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ QUOTE_APPROVAL â€” F1-SEA-2026-02451                          â”‚
â”‚                                                             â”‚
â”‚ Base Cost (USD) *                                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 2450                                                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ Margin (USD) *                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 350                                                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ Total (USD)                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 2800                                    (auto-calculated)â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ Validity (days)                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ 7                                                       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ Comment (optional)                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     [Ğ¡ĞºĞ°ÑÑƒĞ²Ğ°Ñ‚Ğ¸]  [âœ“ Ğ—Ğ±ĞµÑ€ĞµĞ³Ñ‚Ğ¸ Ñ‚Ğ° Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğ¸]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.2 Editable Fields per Type

| Approval Type | Editable Fields |
|---------------|-----------------|
| `QUOTE_APPROVAL` | base_cost, margin, validity_days |
| `DIMS_CHANGE_APPROVAL` | cbm, packages_count |
| `BL_DRAFT_APPROVAL` | â€” (view only, or request correction) |
| `ONEC_DEAL_CREATE_APPROVAL` | â€” (view only, high risk) |

---

## 13. Reject Modal Specification

### 13.1 Modal Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ’Ñ–Ğ´Ñ…Ğ¸Ğ»Ğ¸Ñ‚Ğ¸ approval                                     [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ QUOTE_APPROVAL â€” F1-SEA-2026-02451                          â”‚
â”‚                                                             â”‚
â”‚ âš ï¸ Ğ¦Ğµ Ğ²Ñ–Ğ´Ñ…Ğ¸Ğ»Ğ¸Ñ‚ÑŒ Ñ‡ĞµÑ€Ğ½ĞµÑ‚ĞºÑƒ Ñ– Ğ¿Ğ¾Ğ²ĞµÑ€Ğ½Ğµ ĞºĞµĞ¹Ñ Ğ½Ğ° Ğ´Ğ¾Ğ¾Ğ¿Ñ€Ğ°Ñ†ÑĞ²Ğ°Ğ½Ğ½Ñ   â”‚
â”‚                                                             â”‚
â”‚ ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ° Ğ²Ñ–Ğ´Ñ…Ğ¸Ğ»ĞµĞ½Ğ½Ñ *                                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ [Ğ’Ğ²ĞµĞ´Ñ–Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ñƒ Ğ²Ñ–Ğ´Ñ…Ğ¸Ğ»ĞµĞ½Ğ½Ñ...]                         â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ Min 10 characters                                           â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           [Ğ¡ĞºĞ°ÑÑƒĞ²Ğ°Ñ‚Ğ¸]  [âœ• ĞŸÑ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğ¸ Ğ²Ñ–Ğ´Ñ…Ğ¸Ğ»ĞµĞ½Ğ½Ñ]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 13.2 Validation

| Rule | Message |
|------|---------|
| Reason required | "Ğ’ĞºĞ°Ğ¶Ñ–Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ñƒ Ğ²Ñ–Ğ´Ñ…Ğ¸Ğ»ĞµĞ½Ğ½Ñ" |
| Min 10 chars | "ĞœÑ–Ğ½Ñ–Ğ¼ÑƒĞ¼ 10 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ–Ğ²" |

---

## 14. Accessibility (A11y)

### 14.1 Keyboard Navigation

| Key | Action |
|-----|--------|
| Tab | Navigate through cards and buttons |
| Enter/Space | Activate button |
| Escape | Close modal |
| Arrow Up/Down | Navigate between cards (MVP) |

### 14.2 ARIA Attributes

```html
<!-- Approval Card -->
<article 
  class="approval-item"
  role="article"
  aria-label="QUOTE_APPROVAL Ğ´Ğ»Ñ ĞºĞµĞ¹ÑĞ° F1-SEA-2026-02451"
>
  <!-- ... -->
</article>

<!-- Action Buttons -->
<button 
  class="btn btn-success"
  aria-label="ĞŸÑ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğ¸ approval"
>
  Approve
</button>

<!-- Risk Flag -->
<div 
  class="risk-flag risk-medium"
  role="alert"
  aria-live="polite"
>
  âš ï¸ Ğ Ğ¸Ğ·Ğ¸Ğº: Ğ³Ğ°Ğ±Ğ°Ñ€Ğ¸Ñ‚Ğ¸ Ğ½Ğµ Ğ²ĞµÑ€Ğ¸Ñ„Ñ–ĞºĞ¾Ğ²Ğ°Ğ½Ñ–
</div>

<!-- Modal -->
<div 
  role="dialog" 
  aria-modal="true" 
  aria-labelledby="modal-title"
>
  <h3 id="modal-title">Ğ ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ñ‚Ğ¸ Ñ‚Ğ° Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğ¸</h3>
</div>
```

### 14.3 Focus Management

| Action | Focus Behavior |
|--------|----------------|
| Page load | Focus on first approval card |
| Open modal | Focus on first form field |
| Close modal | Return focus to trigger button |
| Approve/Reject | Focus moves to next card |

---

## 15. Anti-patterns (Ñ‡Ğ¾Ğ³Ğ¾ ĞĞ• Ñ€Ğ¾Ğ±Ğ¸Ñ‚Ğ¸)

| âŒ Anti-pattern | ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° | âœ… Ğ Ñ–ÑˆĞµĞ½Ğ½Ñ |
|-----------------|----------|------------|
| Approve Ğ±ĞµĞ· ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ñƒ | ĞœĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ Ğ½Ğµ Ñ€Ğ¾Ğ·ÑƒĞ¼Ñ–Ñ” Ñ‰Ğ¾ Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ÑƒÑ” | ĞŸĞ¾ĞºĞ°Ğ·ÑƒĞ²Ğ°Ñ‚Ğ¸ request_snapshot |
| Reject Ğ±ĞµĞ· Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ğ¸ | ĞĞµĞ¼Ğ° audit trail | ĞĞ±Ğ¾Ğ²'ÑĞ·ĞºĞ¾Ğ²Ğµ Ğ¿Ğ¾Ğ»Ğµ reason |
| Ğ’ÑÑ– approvals Ğ¾Ğ´Ğ½Ğ°ĞºĞ¾Ğ²Ğ¾ | ĞĞµĞ¼Ğ° Ğ¿Ñ€Ñ–Ğ¾Ñ€Ğ¸Ñ‚ĞµĞ·Ğ°Ñ†Ñ–Ñ— | SLA badges, risk flags |
| Confirm Ğ´Ğ»Ñ ĞºĞ¾Ğ¶Ğ½Ğ¾Ñ— Ğ´Ñ–Ñ— | Fatigue, Ğ¿Ğ¾Ğ²Ñ–Ğ»ÑŒĞ½Ñ–ÑÑ‚ÑŒ | Instant action + undo (v2) |
| ĞŸĞ¾ĞºĞ°Ğ·ÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ»Ğ¸ÑˆĞµ pending | ĞœĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ Ğ½Ğµ Ğ±Ğ°Ñ‡Ğ¸Ñ‚ÑŒ ÑĞ²Ğ¾Ñ Ñ–ÑÑ‚Ğ¾Ñ€Ñ–Ñ | Recently Decided ÑĞµĞºÑ†Ñ–Ñ |
| Auto-refresh Ğ±ĞµĞ· warning | Ğ’Ñ‚Ñ€Ğ°Ñ‚Ğ° ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ñƒ | Manual refresh Ğ°Ğ±Ğ¾ "New items" indicator |

---

## 16. Acceptance Criteria (Definition of Done)

### 16.1 PoC Acceptance

Approvals Page v0 Ğ²Ğ²Ğ°Ğ¶Ğ°Ñ”Ñ‚ÑŒÑÑ ÑƒÑĞ¿Ñ–ÑˆĞ½Ğ¸Ğ¼, ÑĞºÑ‰Ğ¾:

**Functional:**
- [ ] ĞœĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ Ğ±Ğ°Ñ‡Ğ¸Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº PENDING approvals
- [ ] ĞšĞ¾Ğ¶ĞµĞ½ approval Ğ¿Ğ¾ĞºĞ°Ğ·ÑƒÑ” type, snapshot, risks
- [ ] "Approve" â†’ ÑƒÑĞ¿Ñ–ÑˆĞ½Ğµ Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ½Ñ + toast
- [ ] "Reject" â†’ modal Ğ· Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ğ¾Ñ â†’ ÑƒÑĞ¿Ñ–ÑˆĞ½Ğµ Ğ²Ñ–Ğ´Ñ…Ğ¸Ğ»ĞµĞ½Ğ½Ñ
- [ ] Case link â†’ Ğ¿ĞµÑ€ĞµÑ…Ñ–Ğ´ Ğ´Ğ¾ Case Cockpit
- [ ] Recently Decided Ğ¿Ğ¾ĞºĞ°Ğ·ÑƒÑ” Ñ–ÑÑ‚Ğ¾Ñ€Ñ–Ñ

**UX:**
- [ ] SLA-ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ– approvals Ğ²Ñ–Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ¾ Ğ²Ğ¸Ğ´Ñ–Ğ»ĞµĞ½Ñ–
- [ ] Risk flags Ñ‡Ñ–Ñ‚ĞºĞ¾ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ñ–
- [ ] Action buttons Ğ¼Ğ°ÑÑ‚ÑŒ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ– ÑÑ‚Ğ¸Ğ»Ñ– (success/danger)
- [ ] Empty state Ğ¿Ñ€Ğ¸ Ğ²Ñ–Ğ´ÑÑƒÑ‚Ğ½Ğ¾ÑÑ‚Ñ– approvals

**Performance:**
- [ ] Page load < 1s
- [ ] Approve action < 500ms

### 16.2 MVP Acceptance (Ğ´Ğ¾Ğ´Ğ°Ñ‚ĞºĞ¾Ğ²Ğ¾)

- [ ] Edit & Approve modal Ğ¿Ñ€Ğ°Ñ†ÑÑ”
- [ ] Reject reason Ğ¾Ğ±Ğ¾Ğ²'ÑĞ·ĞºĞ¾Ğ²Ğ¸Ğ¹
- [ ] Filter by approval_type
- [ ] Real-time updates Ğ¿Ñ€Ğ¸ Ğ½Ğ¾Ğ²Ğ¾Ğ¼Ñƒ approval

---

## 17. Roadmap: v0 â†’ v1 â†’ v2

### v0 (PoC)

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ’ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾ |
|-----------|----------|
| Pending approvals list | âœ… |
| Approval cards | âœ… |
| Approve button | âœ… |
| Reject button (simple) | âœ… |
| Recently Decided table | âœ… |
| Sidebar filters | âœ… |
| Edit modal | â€” |
| Reject reason modal | â€” |

### v1 (MVP)

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ’ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾ |
|-----------|----------|
| v0 features | âœ… |
| Edit & Approve modal | âœ… |
| Reject reason (required) | âœ… |
| Filter by type | âœ… |
| Search | âœ… |
| Real-time updates | âœ… |

### v2 (Scale)

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ’ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾ |
|-----------|----------|
| v1 features | âœ… |
| Batch approve | âœ… |
| Delegation | âœ… |
| Auto-approve rules | âœ… |
| Keyboard shortcuts | âœ… |
| Push notifications | âœ… |

---

## 18. Technical Implementation Notes

### 18.1 API Endpoints

| Endpoint | Method | ĞĞ¿Ğ¸Ñ |
|----------|--------|------|
| `/approvals` | GET | List approvals with filters |
| `/approvals/{id}` | GET | Get single approval |
| `/approvals/{id}/decide` | POST | Submit decision |

### 18.2 Decision Payload

```typescript
interface ApprovalDecision {
  decision: 'APPROVED' | 'REJECTED';
  decision_snapshot?: object;  // For APPROVED with edits
  rejection_reason?: string;   // For REJECTED
  has_edits?: boolean;         // Track if snapshot was modified
}
```

### 18.3 Real-time Subscriptions

```typescript
// Subscribe to new approvals
supabase
  .channel('new_approvals')
  .on(
    'postgres_changes',
    {
      event: 'INSERT',
      schema: 'public',
      table: 'approvals',
      filter: `case_id=in.(SELECT id FROM cases WHERE org_id='${orgId}')`
    },
    (payload) => {
      // Show toast: "ĞĞ¾Ğ²Ğ¸Ğ¹ approval Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±ÑƒÑ” Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ"
      // Refetch pending list
    }
  )
  .subscribe();
```

### 18.4 Audit Event on Decision

```typescript
// Insert case_event on approval decision
await supabase.from('case_events').insert({
  case_id: approval.case_id,
  event_type: decision === 'APPROVED' ? 'APPROVAL_APPROVED' : 'APPROVAL_REJECTED',
  actor_user_id: currentUser.id,
  metadata: {
    approval_id: approval.id,
    approval_type: approval.approval_type,
    has_edits: hasEdits,
    rejection_reason: rejectionReason
  }
});
```

---

## 19. Integration Points

### 19.1 Integration with Case Cockpit

| Ğ’Ğ·Ğ°Ñ”Ğ¼Ğ¾Ğ´Ñ–Ñ | ĞĞ°Ğ¿Ñ€ÑĞ¼Ğ¾Ğº | ĞĞ¿Ğ¸Ñ |
|-----------|----------|------|
| Case link | Approvals â†’ Cockpit | Click on case badge opens Cockpit |
| Approval detail | Approvals â†” Cockpit | Same approval visible in Cockpit |
| After decision | Approvals â†’ Cockpit | Case workflow advances |

### 19.2 Integration with Owner Dashboard

| Metric | Shared Data |
|--------|-------------|
| Pending approvals count | Same query |
| Approval latency | Calculated from same data |
| Overdue approvals | Same thresholds |

### 19.3 Integration with Notifications

| Event | Notification |
|-------|-------------|
| New approval created | Push/email to assigned user |
| SLA approaching | Reminder notification |
| Approval decided | Event in case timeline |

---

## 20. End Note

Approvals Page Ğ² IMCP â€” Ñ†Ğµ **Ñ†ĞµĞ½Ñ‚Ñ€ Ğ¿Ñ€Ğ¸Ğ¹Ğ½ÑÑ‚Ñ‚Ñ Ñ€Ñ–ÑˆĞµĞ½ÑŒ** Ğ´Ğ»Ñ Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€Ğ°.

> Ğ¡Ñ‚Ğ¾Ñ€Ñ–Ğ½ĞºĞ° Ñ€ĞµĞ°Ğ»Ñ–Ğ·ÑƒÑ” core Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿: **"AI Ğ³Ğ¾Ñ‚ÑƒÑ”, Ğ»ÑĞ´Ğ¸Ğ½Ğ° Ğ·Ğ°Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ÑƒÑ”"**

ĞšĞ»ÑÑ‡Ğ¾Ğ²Ñ– Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ğ¸:
- Request snapshot Ğ·Ğ°Ğ²Ğ¶Ğ´Ğ¸ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ğ¸Ğ¹
- Risks Ñ‚Ğ° AI-Ğ°Ğ½Ğ°Ğ»Ñ–Ğ· Ğ²Ğ¸Ğ´Ñ–Ğ»ĞµĞ½Ñ–
- Ğ”Ñ–Ñ— (Approve/Reject) Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ– inline
- ĞŸĞ¾Ğ²Ğ½Ğ¸Ğ¹ audit trail ĞºĞ¾Ğ¶Ğ½Ğ¾Ğ³Ğ¾ Ñ€Ñ–ÑˆĞµĞ½Ğ½Ñ
- SLA-Ğ¿Ñ€Ñ–Ğ¾Ñ€Ğ¸Ñ‚ĞµĞ·Ğ°Ñ†Ñ–Ñ Ğ´Ğ»Ñ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¸Ñ… approvals

---

**ĞŸĞ¾Ğ²'ÑĞ·Ğ°Ğ½Ğ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ:**
- [/docs/core/](../core/) â€” core Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ IMCP
- [/docs/core/03_approval_pattern.md](../core/03_approval_pattern.md) â€” Ğ¿Ğ°Ñ‚ĞµÑ€Ğ½ Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½ÑŒ
- [ui_style_reference.md](./ui_style_reference.md) â€” Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½-Ñ‚Ğ¾ĞºĞµĞ½Ğ¸
- [owner_dashboard_spec.md](./owner_dashboard_spec.md) â€” Owner Dashboard
- [case_list_spec.md](./case_list_spec.md) â€” Case List
