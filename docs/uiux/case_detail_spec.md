# Case Detail Specification
## IMCP â€” Case Cockpit (Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ð¸Ð¹ ÐµÐºÑ€Ð°Ð½ ÐºÐµÐ¹ÑÐ°)

**Ð’ÐµÑ€ÑÑ–Ñ:** 1.0  
**Ð¡Ñ‚Ð°Ñ‚ÑƒÑ:** Spec (PoC â†’ MVP)  
**Ð¢Ð¸Ð¿ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°:** Spec  
**ÐÑƒÐ´Ð¸Ñ‚Ð¾Ñ€Ñ–Ñ:** Product, UX/UI, Frontend, Operations Manager  
**Changelog:**  
- v1.0 â€” initial spec based on demo/case-detail.html

**ÐŸÐ¾Ð¿ÐµÑ€ÐµÐ´Ð½Ñ– Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸:**  
- [00_shared_mental_model.md](../core/00_shared_mental_model.md) â€” Ð¼ÐµÐ½Ñ‚Ð°Ð»ÑŒÐ½Ð° Ð¼Ð¾Ð´ÐµÐ»ÑŒ  
- [01_architecture_overview.md](../core/01_architecture_overview.md) â€” Ð°Ñ€Ñ…Ñ–Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°  
- [02_core_data_model.md](../core/02_core_data_model.md) â€” Ð¼Ð¾Ð´ÐµÐ»ÑŒ Ð´Ð°Ð½Ð¸Ñ…  
- [03_approval_pattern.md](../core/03_approval_pattern.md) â€” Ð¿Ð°Ñ‚ÐµÑ€Ð½ Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½ÑŒ  
- [04_case_cockpit_ux.md](../core/04_case_cockpit_ux.md) â€” UX/UI Case Cockpit  

**ÐŸÐ¾Ð²'ÑÐ·Ð°Ð½Ñ– Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸:**  
- [UI Style Reference](./ui_style_reference.md) â€” Ð´Ð¸Ð·Ð°Ð¹Ð½-Ñ‚Ð¾ÐºÐµÐ½Ð¸  
- [Case List Spec](./case_list_spec.md) â€” ÑÐ¿ÐµÑ†Ð¸Ñ„Ñ–ÐºÐ°Ñ†Ñ–Ñ ÑÐ¿Ð¸ÑÐºÑƒ ÐºÐµÐ¹ÑÑ–Ð²  
- [Owner Dashboard Spec](./owner_dashboard_spec.md) â€” ÑÐ¿ÐµÑ†Ð¸Ñ„Ñ–ÐºÐ°Ñ†Ñ–Ñ Owner Dashboard  
- [Personal Settings Spec](./personal_settings_spec.md) â€” Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð»ÑŒÐ½Ñ– Ð½Ð°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ  

---

## 1. Purpose â€” ÐÐ°Ð²Ñ–Ñ‰Ð¾ Ð¿Ð¾Ñ‚Ñ€Ñ–Ð±Ð½Ð° ÑÑ‚Ð¾Ñ€Ñ–Ð½ÐºÐ° Case Detail

Case Detail (Case Cockpit) â€” Ñ†Ðµ **Ð¾ÑÐ½Ð¾Ð²Ð½Ð¸Ð¹ Ñ€Ð¾Ð±Ð¾Ñ‡Ð¸Ð¹ ÐµÐºÑ€Ð°Ð½ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ð°**, Ð´Ðµ Ð²Ñ–Ð´Ð±ÑƒÐ²Ð°Ñ”Ñ‚ÑŒÑÑ Ð²ÑÑ Ñ€Ð¾Ð±Ð¾Ñ‚Ð° Ð· Ð¾ÐºÑ€ÐµÐ¼Ð¸Ð¼ ÐºÐµÐ¹ÑÐ¾Ð¼.

### 1.1 ÐžÑÐ½Ð¾Ð²Ð½Ñ– Ð·Ð°Ð´Ð°Ñ‡Ñ– Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ð°

| Ð—Ð°Ð´Ð°Ñ‡Ð° | ÐžÐ¿Ð¸Ñ |
|--------|------|
| **Ð—Ñ€Ð¾Ð·ÑƒÐ¼Ñ–Ñ‚Ð¸ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚** | Ð‘Ð°Ñ‡Ð¸Ñ‚Ð¸ Ð¿Ð¾Ð²Ð½Ñƒ ÐºÐ°Ñ€Ñ‚Ð¸Ð½Ñƒ ÐºÐµÐ¹ÑÐ° (ÐºÐ»Ñ–Ñ”Ð½Ñ‚, Ð²Ð°Ð½Ñ‚Ð°Ð¶, Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚) |
| **Ð’Ð¸ÐºÐ¾Ð½Ð°Ñ‚Ð¸ Ð½Ð°ÑÑ‚ÑƒÐ¿Ð½Ñƒ Ð´Ñ–ÑŽ** | NBA Ð¿Ð¾ÐºÐ°Ð·ÑƒÑ” Ñ‰Ð¾ Ñ€Ð¾Ð±Ð¸Ñ‚Ð¸ Ð´Ð°Ð»Ñ– |
| **ÐŸÑ€Ð¸Ð¹Ð½ÑÑ‚Ð¸ Ñ€Ñ–ÑˆÐµÐ½Ð½Ñ** | Approve / Edit / Reject ÑÐ¸ÑÑ‚ÐµÐ¼Ð½Ð¸Ñ… drafts |
| **ÐŸÐµÑ€ÐµÐ³Ð»ÑÐ½ÑƒÑ‚Ð¸ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸** | Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸ ÐºÐµÐ¹ÑÐ° Ð· ÑÑ‚Ð°Ñ‚ÑƒÑÐ°Ð¼Ð¸ Ð²ÐµÑ€Ð¸Ñ„Ñ–ÐºÐ°Ñ†Ñ–Ñ— |
| **Ð’Ñ–Ð´ÑÑ‚ÐµÐ¶Ð¸Ñ‚Ð¸ Ñ–ÑÑ‚Ð¾Ñ€Ñ–ÑŽ** | Timeline Ð¿Ð¾Ð´Ñ–Ð¹ Ñ‚Ð° Ð´Ñ–Ð¹ |

### 1.2 Case Cockpit = "ÐšÐ°Ð±Ñ–Ð½Ð° Ð¿Ñ–Ð»Ð¾Ñ‚Ð°"

> **ÐžÐ´Ð¸Ð½ ÐºÐµÐ¹Ñ = Ð¾Ð´Ð¸Ð½ Ð³Ð¾Ð»Ð¾Ð²Ð½Ð¸Ð¹ ÐµÐºÑ€Ð°Ð½**, Ð´Ðµ Ð·Ñ–Ð±Ñ€Ð°Ð½Ð¾ Ð²ÑÐµ Ð½ÐµÐ¾Ð±Ñ…Ñ–Ð´Ð½Ðµ Ð´Ð»Ñ Ñ€Ð¾Ð±Ð¾Ñ‚Ð¸.

| ÐÑÐ¿ÐµÐºÑ‚ | Case Cockpit | Case List |
|--------|--------------|-----------|
| **Ð¤Ð¾ÐºÑƒÑ** | ÐžÐ´Ð¸Ð½ ÐºÐµÐ¹Ñ | Ð’ÑÑ– Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ– ÐºÐµÐ¹ÑÐ¸ |
| **ÐÑƒÐ´Ð¸Ñ‚Ð¾Ñ€Ñ–Ñ** | ÐœÐµÐ½ÐµÐ´Ð¶ÐµÑ€/Ð¾Ð¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€ | ÐœÐµÐ½ÐµÐ´Ð¶ÐµÑ€/Ð¾Ð¿ÐµÑ€Ð°Ñ‚Ð¾Ñ€ |
| **ÐšÐ»ÑŽÑ‡Ð¾Ð²Ðµ Ð¿Ð¸Ñ‚Ð°Ð½Ð½Ñ** | "Ð©Ð¾ Ñ€Ð¾Ð±Ð¸Ñ‚Ð¸ Ð´Ð°Ð»Ñ– Ð² Ñ†ÑŒÐ¾Ð¼Ñƒ ÐºÐµÐ¹ÑÑ–?" | "Ð©Ð¾ Ð¼ÐµÐ½Ñ– Ñ€Ð¾Ð±Ð¸Ñ‚Ð¸ Ð·Ð°Ñ€Ð°Ð·?" |
| **Ð”Ñ–Ñ—** | Approve/Edit/Reject drafts | Ð’Ñ–Ð´ÐºÑ€Ð¸Ñ‚Ð¸ ÐºÐµÐ¹Ñ, ÑÑ‚Ð²Ð¾Ñ€Ð¸Ñ‚Ð¸ ÐºÐµÐ¹Ñ |

### 1.3 Ð’Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ð½Ñ–ÑÑ‚ÑŒ Shared Mental Model

Case Cockpit Ñ€ÐµÐ°Ð»Ñ–Ð·ÑƒÑ” Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿Ð¸ [Shared Mental Model](../core/00_shared_mental_model.md):

| ÐŸÑ€Ð¸Ð½Ñ†Ð¸Ð¿ | Ð ÐµÐ°Ð»Ñ–Ð·Ð°Ñ†Ñ–Ñ Ð² Case Cockpit |
|---------|---------------------------|
| **Human-in-the-Loop** | Approval Gates Ð· Approve/Edit/Reject |
| **Draft-First Interaction** | Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð³Ð¾Ñ‚ÑƒÑ” draft, Ð»ÑŽÐ´Ð¸Ð½Ð° Ð²ÐµÑ€Ð¸Ñ„Ñ–ÐºÑƒÑ” |
| **Actionable Interface** | NBA Ð·Ð°Ð²Ð¶Ð´Ð¸ Ð¿Ð¾ÐºÐ°Ð·ÑƒÑ” Ð½Ð°ÑÑ‚ÑƒÐ¿Ð½Ð¸Ð¹ ÐºÑ€Ð¾Ðº |
| **Iron Man UX** | AI = ÐµÐºÐ·Ð¾ÑÐºÐµÐ»ÐµÑ‚, Human = Ð¿Ñ–Ð»Ð¾Ñ‚ |
| **Audit Trail** | Timeline Ð¿Ð¾ÐºÐ°Ð·ÑƒÑ” Ð²ÑÑ– Ð¿Ð¾Ð´Ñ–Ñ— Ñ‚Ð° Ñ€Ñ–ÑˆÐµÐ½Ð½Ñ |

---

## 2. Scope (PoC vs MVP)

### 2.1 PoC (Minimal Viable)

| Ð¤ÑƒÐ½ÐºÑ†Ñ–Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ–ÑÑ‚ÑŒ | ÐŸÑ€Ñ–Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚ | ÐžÐ¿Ð¸Ñ |
|------------------|-----------|------|
| **Case Header** | HIGH | ID, status, state, SLA, owner, priority, client |
| **Next Best Action** | HIGH | Sticky NBA card Ð· action buttons |
| **Quote Draft** | HIGH | ÐŸÐµÑ€ÐµÐ³Ð»ÑÐ´ draft ÐºÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ†Ñ–Ñ— |
| **Documents Section** | HIGH | Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ñ–Ð² Ð· ÑÑ‚Ð°Ñ‚ÑƒÑÐ°Ð¼Ð¸ |
| **Timeline** | HIGH | Ð†ÑÑ‚Ð¾Ñ€Ñ–Ñ Ð¿Ð¾Ð´Ñ–Ð¹ (Ð¾ÑÑ‚Ð°Ð½Ð½Ñ– 5-10) |
| **Context Sidebar** | HIGH | Cargo, Route, Client, Dates, Risks |

### 2.2 MVP (Extended)

| Ð¤ÑƒÐ½ÐºÑ†Ñ–Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ–ÑÑ‚ÑŒ | ÐŸÑ€Ñ–Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚ | ÐžÐ¿Ð¸Ñ |
|------------------|-----------|------|
| PoC features | â€” | Ð’ÑÐµ Ð· PoC |
| **Edit & Approve Modal** | HIGH | Ð ÐµÐ´Ð°Ð³ÑƒÐ²Ð°Ð½Ð½Ñ draft Ð¿ÐµÑ€ÐµÐ´ Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½ÑÐ¼ |
| **Document Preview** | MEDIUM | Inline preview Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ñ–Ð² |
| **Full Timeline** | MEDIUM | ÐŸÐ¾Ð²Ð½Ð° Ñ–ÑÑ‚Ð¾Ñ€Ñ–Ñ Ð· Ñ„Ñ–Ð»ÑŒÑ‚Ñ€Ð°Ð¼Ð¸ |
| **Comments** | MEDIUM | ÐšÐ¾Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ñ– Ð´Ð¾ ÐºÐµÐ¹ÑÐ° |
| **Attachments Upload** | MEDIUM | Ð—Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶ÐµÐ½Ð½Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ñ–Ð² |

### 2.3 v2 (Scale)

| Ð¤ÑƒÐ½ÐºÑ†Ñ–Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ–ÑÑ‚ÑŒ | ÐžÐ¿Ð¸Ñ |
|------------------|------|
| Split view | Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚ + Ð´Ð°Ð½Ñ– Ð¿Ð¾Ñ€ÑÐ´ |
| AI reasoning | Expandable Ð¿Ð¾ÑÑÐ½ÐµÐ½Ð½Ñ AI Ñ€Ñ–ÑˆÐµÐ½ÑŒ |
| Real-time collaboration | Ð¥Ñ‚Ð¾ Ð·Ð°Ñ€Ð°Ð· Ð´Ð¸Ð²Ð¸Ñ‚ÑŒÑÑ ÐºÐµÐ¹Ñ |
| Keyboard shortcuts | Ð¨Ð²Ð¸Ð´ÐºÑ– Ð´Ñ–Ñ— Ð· ÐºÐ»Ð°Ð²Ñ–Ð°Ñ‚ÑƒÑ€Ð¸ |

---

## 3. Information Architecture

### 3.1 Ð—Ð°Ð³Ð°Ð»ÑŒÐ½Ð° ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° ÑÑ‚Ð¾Ñ€Ñ–Ð½ÐºÐ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Sidebar Navigation                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Case Header (ID, type, status, state, SLA, owner, priority)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Next Best Action (Sticky)                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Main Work Area (8/12)             â”‚ Context Sidebar (4/12)   â”‚
â”‚                                   â”‚                          â”‚
â”‚ - Quote Draft                     â”‚ - Cargo Summary          â”‚
â”‚ - Documents Section               â”‚ - Route Info             â”‚
â”‚ - Timeline                        â”‚ - Client Info            â”‚
â”‚                                   â”‚ - Key Dates              â”‚
â”‚                                   â”‚ - Risk Flags             â”‚
â”‚                                   â”‚ - Integration IDs        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Sidebar Navigation

| Ð¡ÐµÐºÑ†Ñ–Ñ | ÐŸÑƒÐ½ÐºÑ‚Ð¸ | ÐžÐ¿Ð¸Ñ |
|--------|--------|------|
| **Main** | Owner Dashboard, ÐšÐµÐ¹ÑÐ¸, ÐŸÑ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ, Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸, Ð¢Ð°Ð¹Ð¼Ð»Ð°Ð¹Ð½ | Ð“Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ð° Ð½Ð°Ð²Ñ–Ð³Ð°Ñ†Ñ–Ñ |
| **Ð¦ÐµÐ¹ ÐºÐµÐ¹Ñ** | Next Best Action, Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸, Ð†ÑÑ‚Ð¾Ñ€Ñ–Ñ | Ð¯ÐºÐ¾Ñ€Ñ Ð½Ð° ÑÐµÐºÑ†Ñ–Ñ— ÑÑ‚Ð¾Ñ€Ñ–Ð½ÐºÐ¸ |
| **ÐÐ°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ** | ÐŸÐµÑ€ÑÐ¾Ð½Ð°Ð»ÑŒÐ½Ñ– | ÐÐ°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ð° |

### 3.3 Navigation Flow

```
Case List â†’ Case Row Click â†’ Case Detail (Cockpit)
     â†“
Case Detail â†’ Back Button â†’ Case List
     â†“
Case Detail â†’ Approve â†’ Next State â†’ Updated Case Detail
     â†“
Case Detail â†’ Document Click â†’ Document Preview/Detail
```

---

## 4. Case Header Specification

### 4.1 Header Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â†] [F1_SEA_IMPORT] F1-SEA-2026-02451                        [Ð©Ðµ ...]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [QUOTE_APPROVAL_PENDING] [OPEN]  â± SLA: 2d 4h  ðŸ‘¤ Owner: Ð†Ð²Ð°Ð½ ÐŸ.        â”‚
â”‚ âš ï¸ Urgent  ðŸ”– Client: ACME Ltd                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 Header Elements

| Ð•Ð»ÐµÐ¼ÐµÐ½Ñ‚ | Ð¢Ð¸Ð¿ | ÐžÐ¿Ð¸Ñ | ÐŸÑ€Ð¸ÐºÐ»Ð°Ð´ |
|---------|-----|------|---------|
| Back Button | Icon Button | ÐŸÐ¾Ð²ÐµÑ€Ð½ÐµÐ½Ð½Ñ Ð´Ð¾ Case List | `[â†]` |
| Case Type Badge | Badge | Ð¢Ð¸Ð¿ ÐºÐµÐ¹ÑÐ° | `F1_SEA_IMPORT` |
| Case Number | Text | Ð£Ð½Ñ–ÐºÐ°Ð»ÑŒÐ½Ð¸Ð¹ ID ÐºÐµÐ¹ÑÐ° | `F1-SEA-2026-02451` |
| State Badge | Status Badge | Ð‘Ñ–Ð·Ð½ÐµÑ-ÑÑ‚Ð°Ð½ | `QUOTE_APPROVAL_PENDING` |
| Status Badge | Status Badge | Ð¢ÐµÑ…Ð½Ñ–Ñ‡Ð½Ð¸Ð¹ ÑÑ‚Ð°Ñ‚ÑƒÑ | `OPEN` / `BLOCKED` |
| SLA Indicator | Text + Icon | Ð§Ð°Ñ Ð´Ð¾ Ð´ÐµÐ´Ð»Ð°Ð¹Ð½Ñƒ | `SLA: 2d 4h` |
| Owner | Text + Icon | Ð’Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ð°Ð»ÑŒÐ½Ð¸Ð¹ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€ | `Owner: Ð†Ð²Ð°Ð½ ÐŸ.` |
| Priority | Badge + Icon | ÐŸÑ€Ñ–Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚ ÐºÐµÐ¹ÑÐ° | `Urgent` ðŸ”´ |
| Client | Text + Icon | ÐÐ°Ð·Ð²Ð° ÐºÐ»Ñ–Ñ”Ð½Ñ‚Ð° | `Client: ACME Ltd` |
| Actions Menu | Dropdown | Ð”Ð¾Ð´Ð°Ñ‚ÐºÐ¾Ð²Ñ– Ð´Ñ–Ñ— | `[Ð©Ðµ ...]` |

### 4.3 Status Badge Colors

| Status | Background | Text Color | CSS Class |
|--------|------------|------------|-----------|
| `OPEN` | `#DBEAFE` | `#1E40AF` | `status-open` |
| `BLOCKED` | `#FEE2E2` | `#991B1B` | `status-blocked` |
| `DONE` | `#D1FAE5` | `#065F46` | `status-done` |

### 4.4 State Badge Colors

| State Pattern | Background | Text Color | CSS Class |
|---------------|------------|------------|-----------|
| `*_PENDING` | `#FEF3C7` | `#92400E` | `status-pending` |
| `*_READY` | `#DBEAFE` | `#1E40AF` | `status-ready` |
| `WAITING_*` | `#F3F4F6` | `#374151` | `status-waiting` |

### 4.5 SLA Indicator Colors

| Ð£Ð¼Ð¾Ð²Ð° | ÐšÐ¾Ð»Ñ–Ñ€ | CSS Class |
|-------|-------|-----------|
| SLA > 48h | default (text-secondary) | â€” |
| SLA 24h-48h | ðŸŸ¡ `#F59E0B` | `sla-warning` |
| SLA < 24h | ðŸ”´ `#EF4444` | `sla-danger` |
| SLA overdue | ðŸ”´ `#DC2626` + bold | `sla-overdue` |

### 4.6 Priority Indicators

| Priority | Icon | Color | CSS Class |
|----------|------|-------|-----------|
| `LOW` | â€” | `#6B7280` | `priority-low` |
| `NORMAL` | â€” | `#1E1E1E` | `priority-normal` |
| `HIGH` | âš ï¸ | `#F59E0B` | `priority-high` |
| `URGENT` | âš ï¸ | `#EF4444` | `priority-urgent` |

---

## 5. Next Best Action (NBA) Specification

### 5.1 NBA Card Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ”´ Next Best Action                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ÐŸÑ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚Ð¸ ÐºÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ†Ñ–ÑŽ (QUOTE_APPROVAL)                                 â”‚
â”‚                                                                          â”‚
â”‚ â€¢ Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¿Ñ–Ð´Ð³Ð¾Ñ‚ÑƒÐ²Ð°Ð»Ð° Ñ€Ð¾Ð·Ñ€Ð°Ñ…ÑƒÐ½Ð¾Ðº Ñ†Ñ–Ð½Ð¸                                    â”‚
â”‚ â€¢ Ð¢ÐµÑ€Ð¼Ñ–Ð½ Ð´Ñ–Ñ— Ñ†Ñ–Ð½Ð¸: 7â€“9 Ð´Ð½Ñ–Ð²                                              â”‚
â”‚ â€¢ Base cost: $2,450 + Margin: $350 = Total: $2,800                       â”‚
â”‚                                                                          â”‚
â”‚ âš ï¸ Ð Ð¸Ð·Ð¸Ðº: Ð³Ð°Ð±Ð°Ñ€Ð¸Ñ‚Ð¸ ÐºÐ»Ñ–Ñ”Ð½Ñ‚Ð° Ñ‰Ðµ Ð½Ðµ Ð²ÐµÑ€Ð¸Ñ„Ñ–ÐºÐ¾Ð²Ð°Ð½Ñ– ÑÐºÐ»Ð°Ð´Ð¾Ð¼                    â”‚
â”‚                                                                          â”‚
â”‚ [âœ“ Approve]  [âœï¸ Edit & Approve]  [âœ— Reject]                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 NBA Elements

| Ð•Ð»ÐµÐ¼ÐµÐ½Ñ‚ | ÐžÐ¿Ð¸Ñ | ÐžÐ±Ð¾Ð²'ÑÐ·ÐºÐ¾Ð²Ð¸Ð¹ |
|---------|------|--------------|
| **Indicator** | ÐšÐ¾Ð»ÑŒÐ¾Ñ€Ð¾Ð²Ð° Ð¼Ñ–Ñ‚ÐºÐ° ÑÑ‚Ð°Ð½Ñƒ | âœ… |
| **Label** | "Next Best Action" | âœ… |
| **Title** | ÐÐ°Ð·Ð²Ð° Ð´Ñ–Ñ— + approval type | âœ… |
| **Context Points** | 2-4 bullet points ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚Ñƒ | âœ… |
| **Risk Warning** | ÐŸÐ¾Ð¿ÐµÑ€ÐµÐ´Ð¶ÐµÐ½Ð½Ñ Ð¿Ñ€Ð¾ Ñ€Ð¸Ð·Ð¸ÐºÐ¸ (ÑÐºÑ‰Ð¾ Ñ”) | âŒ |
| **Primary CTA** | Approve button | âœ… |
| **Secondary CTAs** | Edit & Approve, Reject | âœ… |

### 5.3 NBA States

| Ð¡Ñ‚Ð°Ð½ | Indicator Color | ÐžÐ¿Ð¸Ñ |
|------|-----------------|------|
| ðŸ”´ Approval required | `#EF4444` | ÐŸÐ¾Ñ‚Ñ€ÐµÐ±ÑƒÑ” Ñ€Ñ–ÑˆÐµÐ½Ð½Ñ |
| ðŸŸ¡ Waiting for input | `#F59E0B` | Ð§ÐµÐºÐ°Ñ”Ð¼Ð¾ Ð´Ð°Ð½Ñ– |
| ðŸ”µ Processing | `#3B82F6` | Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¾Ð±Ñ€Ð¾Ð±Ð»ÑÑ” |
| âšª Blocked | `#6B7280` | Ð—Ð°Ð±Ð»Ð¾ÐºÐ¾Ð²Ð°Ð½Ð¾ |
| ðŸŸ¢ Completed | `#22C55E` | Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¾ |

### 5.4 Action Buttons

| Button | Style | Icon | Action |
|--------|-------|------|--------|
| **Approve** | `btn-primary btn-lg` | âœ“ checkmark | ÐŸÑ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚Ð¸ draft |
| **Edit & Approve** | `btn-secondary btn-lg` | âœï¸ pencil | Ð’Ñ–Ð´ÐºÑ€Ð¸Ñ‚Ð¸ edit modal |
| **Reject** | `btn-secondary btn-lg` | âœ— cross | Ð’Ñ–Ð´Ñ…Ð¸Ð»Ð¸Ñ‚Ð¸ draft |

### 5.5 NBA by Approval Type

| Approval Type | Title | Context Points |
|---------------|-------|----------------|
| `QUOTE_APPROVAL` | ÐŸÑ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚Ð¸ ÐºÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ†Ñ–ÑŽ | Base cost, Margin, Total, Validity |
| `BL_DRAFT_APPROVAL` | ÐŸÐµÑ€ÐµÐ²Ñ–Ñ€Ð¸Ñ‚Ð¸ ÐºÐ¾Ð½Ð¾ÑÐ°Ð¼ÐµÐ½Ñ‚ | Shipper, Consignee, Goods |
| `DIMS_CHANGE_APPROVAL` | ÐŸÑ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚Ð¸ Ð·Ð¼Ñ–Ð½Ñƒ Ð³Ð°Ð±Ð°Ñ€Ð¸Ñ‚Ñ–Ð² | Old dims, New dims, Price impact |
| `ONEC_DEAL_CREATE_APPROVAL` | Ð¡Ñ‚Ð²Ð¾Ñ€Ð¸Ñ‚Ð¸ ÑƒÐ³Ð¾Ð´Ñƒ Ð² 1C | Deal number, Client, Amount |

### 5.6 Risk Warning Variants

| Risk Level | Background | Icon | Example |
|------------|------------|------|---------|
| `LOW` | `#F0FDF4` | â„¹ï¸ | Ð†Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ñ–Ð¹Ð½Ðµ Ð¿Ð¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ |
| `MEDIUM` | `#FEF3C7` | âš ï¸ | Ð“Ð°Ð±Ð°Ñ€Ð¸Ñ‚Ð¸ Ð½Ðµ Ð²ÐµÑ€Ð¸Ñ„Ñ–ÐºÐ¾Ð²Ð°Ð½Ñ– |
| `HIGH` | `#FEE2E2` | ðŸš¨ | ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡Ð½Ð° Ð½ÐµÐ²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ð½Ñ–ÑÑ‚ÑŒ |

---

## 6. Quote Draft Section

### 6.1 Quote Draft Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ’° Quote Draft                                           [Version 1]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Base freight cost ..................................... $1,850           â”‚
â”‚ Terminal handling ..................................... $350             â”‚
â”‚ Documentation fee ..................................... $150             â”‚
â”‚ Insurance (optional) .................................. $100             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚
â”‚ Subtotal (Base cost) .................................. $2,450           â”‚
â”‚ Margin ................................................ $350             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚
â”‚ Total ................................................. $2,800 ðŸŸ¢        â”‚
â”‚                                                                          â”‚
â”‚ Assumptions:                                                             â”‚
â”‚ â€¢ Stackable cargo                                                        â”‚
â”‚ â€¢ No dangerous goods                                                     â”‚
â”‚ â€¢ Standard container load                                                â”‚
â”‚ â€¢ Yiwu â†’ Shenzhen â†’ Odessa â†’ Kyiv                                        â”‚
â”‚                                                                          â”‚
â”‚ Validity: 7â€“9 days from issue date                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 Quote Draft Elements

| Ð•Ð»ÐµÐ¼ÐµÐ½Ñ‚ | Ð¢Ð¸Ð¿ | ÐžÐ¿Ð¸Ñ |
|---------|-----|------|
| **Header** | Card Header | Ð†ÐºÐ¾Ð½ÐºÐ° + Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº + version badge |
| **Line Items** | List | ÐŸÐ¾Ð·Ð¸Ñ†Ñ–Ñ— ÐºÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ†Ñ–Ñ— Ð· Ñ†Ñ–Ð½Ð°Ð¼Ð¸ |
| **Subtotal** | Row | ÐŸÑ€Ð¾Ð¼Ñ–Ð¶Ð½Ð¸Ð¹ Ð¿Ñ–Ð´ÑÑƒÐ¼Ð¾Ðº (base cost) |
| **Margin** | Row | ÐœÐ°Ñ€Ð¶Ð° ÐºÐ¾Ð¼Ð¿Ð°Ð½Ñ–Ñ— |
| **Total** | Row (highlighted) | Ð¤Ñ–Ð½Ð°Ð»ÑŒÐ½Ð° ÑÑƒÐ¼Ð° |
| **Assumptions** | List | ÐŸÑ€Ð¸Ð¿ÑƒÑ‰ÐµÐ½Ð½Ñ Ð´Ð»Ñ ÐºÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ†Ñ–Ñ— |
| **Validity** | Note | Ð¢ÐµÑ€Ð¼Ñ–Ð½ Ð´Ñ–Ñ— Ñ†Ñ–Ð½Ð¸ |

### 6.3 Quote Version Badge

| Version | Badge Style |
|---------|-------------|
| Version 1 | `badge-info` |
| Version 2+ | `badge-warning` (edited) |

---

## 7. Documents Section

### 7.1 Documents Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ“„ Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸                                             [+ Ð—Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶Ð¸Ñ‚Ð¸] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ðŸ“„ Contract_ACME_2026.pdf                                                â”‚
â”‚    CONTRACT â€¢ CLIENT â€¢ 2.4 MB                   [VERIFIED] ðŸŸ¢  [View]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ðŸ“„ Invoice_INV2026-0451.pdf                                              â”‚
â”‚    INVOICE â€¢ ZED â€¢ 890 KB                       [UPLOADED] ðŸ”µ  [View] [Verify] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ðŸ“„ Packing_List.xlsx                                                     â”‚
â”‚    PACKING_LIST â€¢ CLIENT â€¢ 156 KB               [VERIFIED] ðŸŸ¢  [View]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 Document Item Elements

| Ð•Ð»ÐµÐ¼ÐµÐ½Ñ‚ | Ð¢Ð¸Ð¿ | ÐžÐ¿Ð¸Ñ |
|---------|-----|------|
| **Icon** | Icon | Ð†ÐºÐ¾Ð½ÐºÐ° Ñ„Ð°Ð¹Ð»Ñƒ |
| **Name** | Text | ÐÐ°Ð·Ð²Ð° Ñ„Ð°Ð¹Ð»Ñƒ |
| **Type** | Badge | Ð¢Ð¸Ð¿ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð° (CONTRACT, INVOICE, etc.) |
| **Source** | Badge | Ð”Ð¶ÐµÑ€ÐµÐ»Ð¾ (CLIENT, ZED, SYSTEM) |
| **Size** | Text | Ð Ð¾Ð·Ð¼Ñ–Ñ€ Ñ„Ð°Ð¹Ð»Ñƒ |
| **Status Badge** | Badge | Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð° |
| **Actions** | Buttons | View, Verify, Download |

### 7.3 Document Status Badges

| Status | Badge Style | Icon |
|--------|-------------|------|
| `UPLOADED` | `badge-info` | ðŸ”µ |
| `PROCESSING` | `badge-warning` | ðŸŸ¡ |
| `VERIFIED` | `badge-success` | ðŸŸ¢ |
| `REJECTED` | `badge-danger` | ðŸ”´ |
| `EXPIRED` | `badge-secondary` | âšª |

### 7.4 Document Types

| Type | Icon | Description |
|------|------|-------------|
| `CONTRACT` | ðŸ“„ | Ð”Ð¾Ð³Ð¾Ð²Ñ–Ñ€ |
| `INVOICE` | ðŸ“„ | Ð Ð°Ñ…ÑƒÐ½Ð¾Ðº/Ñ–Ð½Ð²Ð¾Ð¹Ñ |
| `PACKING_LIST` | ðŸ“¦ | ÐŸÐ°ÐºÑƒÐ²Ð°Ð»ÑŒÐ½Ð¸Ð¹ Ð»Ð¸ÑÑ‚ |
| `BILL_OF_LADING` | ðŸš¢ | ÐšÐ¾Ð½Ð¾ÑÐ°Ð¼ÐµÐ½Ñ‚ |
| `CUSTOMS_DECLARATION` | ðŸ“‹ | ÐœÐ¸Ñ‚Ð½Ð° Ð´ÐµÐºÐ»Ð°Ñ€Ð°Ñ†Ñ–Ñ |
| `INSURANCE` | ðŸ›¡ï¸ | Ð¡Ñ‚Ñ€Ð°Ñ…Ð¾Ð²Ð¸Ð¹ Ð¿Ð¾Ð»Ñ–Ñ |
| `OTHER` | ðŸ“Ž | Ð†Ð½ÑˆÐµ |

### 7.5 Document Actions

| Action | Button Style | Condition |
|--------|--------------|-----------|
| **View** | `btn-sm btn-ghost` | Ð—Ð°Ð²Ð¶Ð´Ð¸ |
| **Verify** | `btn-sm btn-outline` | Status = UPLOADED |
| **Download** | `btn-sm btn-ghost` | Ð—Ð°Ð²Ð¶Ð´Ð¸ |
| **Delete** | `btn-sm btn-danger-ghost` | Owner only, not verified |

---

## 8. Timeline Section

### 8.1 Timeline Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ• Timeline                                              [Ð’ÑÑ– Ð¿Ð¾Ð´Ñ–Ñ— â†’]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â— 12:10 ÑÑŒÐ¾Ð³Ð¾Ð´Ð½Ñ–  SYSTEM                                                 â”‚
â”‚   APPROVAL_CREATED                                                       â”‚
â”‚   Created QUOTE_APPROVAL for review                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â†» 12:10 ÑÑŒÐ¾Ð³Ð¾Ð´Ð½Ñ–  SYSTEM                                                 â”‚
â”‚   STATE_CHANGED                                                          â”‚
â”‚   QUOTE_READY â†’ QUOTE_APPROVAL_PENDING                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ðŸ’° 12:08 ÑÑŒÐ¾Ð³Ð¾Ð´Ð½Ñ–  SYSTEM                                                â”‚
â”‚   QUOTE_CALCULATED                                                       â”‚
â”‚   Quote draft generated: $2,800 total                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ðŸ‘¤ 11:42 ÑÑŒÐ¾Ð³Ð¾Ð´Ð½Ñ–  HUMAN (Ð†Ð²Ð°Ð½ ÐŸ.)                                       â”‚
â”‚   STATE_CHANGED                                                          â”‚
â”‚   CLIENT_INFO_COLLECTED â†’ QUOTE_READY (all required fields confirmed)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ðŸ¤– 10:30 ÑÑŒÐ¾Ð³Ð¾Ð´Ð½Ñ–  AI                                                    â”‚
â”‚   DOC_EXTRACTED                                                          â”‚
â”‚   Extracted cargo data from email attachment (confidence: 92%)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ðŸ‘¤ 09:55 ÑÑŒÐ¾Ð³Ð¾Ð´Ð½Ñ–  HUMAN (Ð†Ð²Ð°Ð½ ÐŸ.)                                       â”‚
â”‚   CASE_CREATED                                                           â”‚
â”‚   Case created from client request                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 Timeline Event Elements

| Ð•Ð»ÐµÐ¼ÐµÐ½Ñ‚ | Ð¢Ð¸Ð¿ | ÐžÐ¿Ð¸Ñ |
|---------|-----|------|
| **Marker** | Icon Circle | ÐœÐ°Ñ€ÐºÐµÑ€ Ñ‚Ð¸Ð¿Ñƒ Ð°ÐºÑ‚Ð¾Ñ€Ð° |
| **Timestamp** | Text | Ð§Ð°Ñ Ð¿Ð¾Ð´Ñ–Ñ— (relative + absolute) |
| **Actor** | Badge | SYSTEM / HUMAN / AI |
| **Event Type** | Text (bold) | Ð¢Ð¸Ð¿ Ð¿Ð¾Ð´Ñ–Ñ— |
| **Details** | Text | Ð”ÐµÑ‚Ð°Ð»Ñ– Ð¿Ð¾Ð´Ñ–Ñ— |

### 8.3 Actor Types

| Actor | Marker Style | Icon | Color |
|-------|--------------|------|-------|
| `SYSTEM` | Circle | âš™ï¸ | `#6B7280` (gray) |
| `HUMAN` | Circle | ðŸ‘¤ | `#007ACC` (blue) |
| `AI` | Circle | ðŸ¤– | `#8B5CF6` (purple) |
| `INTEGRATION` | Circle | ðŸ”— | `#059669` (green) |

### 8.4 Event Types

| Event Type | Icon | Description |
|------------|------|-------------|
| `CASE_CREATED` | âž• | ÐšÐµÐ¹Ñ ÑÑ‚Ð²Ð¾Ñ€ÐµÐ½Ð¾ |
| `STATE_CHANGED` | â†» | Ð—Ð¼Ñ–Ð½Ð° ÑÑ‚Ð°Ð½Ñƒ |
| `APPROVAL_CREATED` | â— | Ð¡Ñ‚Ð²Ð¾Ñ€ÐµÐ½Ð¾ approval |
| `APPROVAL_APPROVED` | âœ“ | Approval Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð¾ |
| `APPROVAL_REJECTED` | âœ— | Approval Ð²Ñ–Ð´Ñ…Ð¸Ð»ÐµÐ½Ð¾ |
| `DOC_UPLOADED` | ðŸ“„ | Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚ Ð·Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶ÐµÐ½Ð¾ |
| `DOC_EXTRACTED` | ðŸ” | Ð”Ð°Ð½Ñ– Ð²Ð¸Ñ‚ÑÐ³Ð½ÑƒÑ‚Ð¾ Ð· Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð° |
| `DOC_VERIFIED` | âœ“ | Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚ Ð²ÐµÑ€Ð¸Ñ„Ñ–ÐºÐ¾Ð²Ð°Ð½Ð¾ |
| `QUOTE_CALCULATED` | ðŸ’° | ÐšÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ†Ñ–ÑŽ ÑÑ‚Ð²Ð¾Ñ€ÐµÐ½Ð¾ |
| `EMAIL_SENT` | âœ‰ï¸ | Email Ð²Ñ–Ð´Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾ |
| `COMMENT_ADDED` | ðŸ’¬ | ÐšÐ¾Ð¼ÐµÐ½Ñ‚Ð°Ñ€ Ð´Ð¾Ð´Ð°Ð½Ð¾ |

### 8.5 Timestamp Format

| Ð£Ð¼Ð¾Ð²Ð° | Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ | ÐŸÑ€Ð¸ÐºÐ»Ð°Ð´ |
|-------|--------|---------|
| Ð¡ÑŒÐ¾Ð³Ð¾Ð´Ð½Ñ– | `HH:MM ÑÑŒÐ¾Ð³Ð¾Ð´Ð½Ñ–` | `12:10 ÑÑŒÐ¾Ð³Ð¾Ð´Ð½Ñ–` |
| Ð’Ñ‡Ð¾Ñ€Ð° | `HH:MM Ð²Ñ‡Ð¾Ñ€Ð°` | `15:30 Ð²Ñ‡Ð¾Ñ€Ð°` |
| Ð¦ÑŒÐ¾Ð³Ð¾ Ñ‚Ð¸Ð¶Ð½Ñ | `Ð”ÐµÐ½ÑŒ, HH:MM` | `ÐŸÐ½, 09:00` |
| Ð¡Ñ‚Ð°Ñ€Ñ–ÑˆÐµ | `DD.MM.YYYY HH:MM` | `05.02.2026 14:22` |

---

## 9. Context Sidebar

### 9.1 Sidebar Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ“¦ Cargo Summary                     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ Packages:      12                    â”‚
â”‚ Declared dims: 3.2 cbm               â”‚
â”‚ Weight:        450 kg                â”‚
â”‚ Stackable:     Yes                   â”‚
â”‚ Dangerous:     No                    â”‚
â”‚ Description:   Consumer electronics  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ðŸŒ Route                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ Mode:          SEA                   â”‚
â”‚ Origin:        Yiwu Warehouse        â”‚
â”‚ Port:          Shenzhen              â”‚
â”‚ Destination:   Kyiv                  â”‚
â”‚ Terminal:      Terminal X            â”‚
â”‚ Broker:        Our broker            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ðŸ‘¤ Client                            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ Company:       ACME Ltd              â”‚
â”‚ Contact:       John Smith            â”‚
â”‚ Email:         john@acme.com         â”‚
â”‚ Phone:         +380 50 123 4567      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ðŸ“… Key Dates                         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ Cargo ready:   2026-02-10            â”‚
â”‚ Created:       2026-02-05            â”‚
â”‚ SLA deadline:  2026-02-07            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âš ï¸ Risk Flags                        â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ ðŸŸ¡ Dimensions not verified           â”‚
â”‚    by warehouse                      â”‚
â”‚ ðŸŸ¢ No dangerous goods declared       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ðŸ”— Integration IDs                   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ 1C Request:    REQ-2026-02451        â”‚
â”‚ Marking:       ALEX-02451            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 Context Cards

| Card | Icon | Fields | Source |
|------|------|--------|--------|
| **Cargo Summary** | ðŸ“¦ | packages, dims, weight, stackable, dangerous, description | `payload.cargo` |
| **Route** | ðŸŒ | mode, origin, port, destination, terminal, broker | `payload.route` |
| **Client** | ðŸ‘¤ | company, contact, email, phone | `payload.client` |
| **Key Dates** | ðŸ“… | cargo_ready, created, sla_deadline | `payload.dates` + `cases` |
| **Risk Flags** | âš ï¸ | List of risks | `computed.risks[]` |
| **Integration IDs** | ðŸ”— | 1c_request_id, marking | `payload.integration` |

### 9.3 Context Card Layout

```css
.context-card {
  background: var(--bg-editor);           /* #FFFFFF */
  border: 1px solid var(--border);        /* #D0D0D0 */
  border-radius: var(--radius-md);        /* 10px */
  margin-bottom: 12px;
}

.context-card-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  border-bottom: 1px solid var(--divider);
}

.context-card-body {
  padding: 8px 12px;
}

.context-item {
  display: flex;
  justify-content: space-between;
  padding: 4px 0;
  font-size: 13px;
}

.context-item-label {
  color: var(--text-secondary);
}

.context-item-value {
  color: var(--text);
  font-weight: 500;
}
```

### 9.4 Risk Flag Variants

| Risk Level | Icon | Background | Text Color |
|------------|------|------------|------------|
| `LOW` | ðŸŸ¢ | `#F0FDF4` | `#166534` |
| `MEDIUM` | ðŸŸ¡ | `#FEF9C3` | `#854D0E` |
| `HIGH` | ðŸ”´ | `#FEE2E2` | `#991B1B` |

---

## 10. Wireframe â€” Case Detail (PoC)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ IMCP â–¸ Case #F1-SEA-2026-02451                                [User Avatar] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ð†ÐœÐ¡Ð                â”‚ [â†] [F1_SEA_IMPORT] F1-SEA-2026-02451           [Ð©Ðµ...] â”‚
â”‚ Case Platform      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ [QUOTE_APPROVAL_PENDING] [OPEN] â± SLA: 2d 4h           â”‚
â”‚                    â”‚ ðŸ‘¤ Owner: Ð†Ð²Ð°Ð½ ÐŸ.  âš ï¸ Urgent  ðŸ”– Client: ACME Ltd       â”‚
â”‚ â–¡ Owner Dashboard  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ â–  ÐšÐµÐ¹ÑÐ¸        12  â”‚                                                         â”‚
â”‚ â–¡ ÐŸÑ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ 3  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â–¡ Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸        â”‚ â”‚ ðŸ”´ Next Best Action                                  â”‚â”‚
â”‚ â–¡ Ð¢Ð°Ð¹Ð¼Ð»Ð°Ð¹Ð½         â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚                    â”‚ â”‚ ÐŸÑ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚Ð¸ ÐºÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ†Ñ–ÑŽ (QUOTE_APPROVAL)             â”‚â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚                                                      â”‚â”‚
â”‚ Ð¦ÐµÐ¹ ÐºÐµÐ¹Ñ           â”‚ â”‚ â€¢ Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¿Ñ–Ð´Ð³Ð¾Ñ‚ÑƒÐ²Ð°Ð»Ð° Ñ€Ð¾Ð·Ñ€Ð°Ñ…ÑƒÐ½Ð¾Ðº Ñ†Ñ–Ð½Ð¸                â”‚â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚ â€¢ Ð¢ÐµÑ€Ð¼Ñ–Ð½ Ð´Ñ–Ñ— Ñ†Ñ–Ð½Ð¸: 7â€“9 Ð´Ð½Ñ–Ð²                          â”‚â”‚
â”‚ âš¡ Next Best Actionâ”‚ â”‚ â€¢ Base: $2,450 + Margin: $350 = Total: $2,800        â”‚â”‚
â”‚ ðŸ“„ Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸       â”‚ â”‚                                                      â”‚â”‚
â”‚ ðŸ• Ð†ÑÑ‚Ð¾Ñ€Ñ–Ñ         â”‚ â”‚ âš ï¸ Ð Ð¸Ð·Ð¸Ðº: Ð³Ð°Ð±Ð°Ñ€Ð¸Ñ‚Ð¸ Ð½Ðµ Ð²ÐµÑ€Ð¸Ñ„Ñ–ÐºÐ¾Ð²Ð°Ð½Ñ– ÑÐºÐ»Ð°Ð´Ð¾Ð¼          â”‚â”‚
â”‚                    â”‚ â”‚                                                      â”‚â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚ [âœ“ Approve]  [âœï¸ Edit & Approve]  [âœ— Reject]         â”‚â”‚
â”‚ ÐÐ°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                                                         â”‚
â”‚ âš™ ÐŸÐµÑ€ÑÐ¾Ð½Ð°Ð»ÑŒÐ½Ñ–      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚                    â”‚ â”‚ ðŸ’° Quote Draft      [v1]    â”‚ ðŸ“¦ Cargo Summary       â”‚â”‚
â”‚                    â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚                    â”‚ â”‚ Base freight:    $1,850     â”‚ Packages:    12        â”‚â”‚
â”‚                    â”‚ â”‚ Terminal:        $350       â”‚ Dims:        3.2 cbm   â”‚â”‚
â”‚                    â”‚ â”‚ Documentation:   $150       â”‚ Weight:      450 kg    â”‚â”‚
â”‚                    â”‚ â”‚ Insurance:       $100       â”‚ Stackable:   Yes       â”‚â”‚
â”‚                    â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚ Dangerous:   No        â”‚â”‚
â”‚                    â”‚ â”‚ Subtotal:        $2,450     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚                    â”‚ â”‚ Margin:          $350       â”‚ ðŸŒ Route               â”‚â”‚
â”‚                    â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚                    â”‚ â”‚ Total:           $2,800 ðŸŸ¢  â”‚ Mode:    SEA           â”‚â”‚
â”‚                    â”‚ â”‚                             â”‚ Origin:  Yiwu          â”‚â”‚
â”‚                    â”‚ â”‚ Assumptions:                â”‚ Dest:    Kyiv          â”‚â”‚
â”‚                    â”‚ â”‚ â€¢ Stackable cargo           â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚                    â”‚ â”‚ â€¢ No dangerous goods        â”‚ âš ï¸ Risk Flags          â”‚â”‚
â”‚                    â”‚ â”‚ â€¢ Standard container        â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚                    â”‚ â”‚                             â”‚ ðŸŸ¡ Dims not verified   â”‚â”‚
â”‚                    â”‚ â”‚ Validity: 7-9 days          â”‚ ðŸŸ¢ No dangerous goods  â”‚â”‚
â”‚                    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚                    â”‚ â”‚ ðŸ“„ Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸                          [+ Ð—Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶Ð¸Ñ‚Ð¸] â”‚â”‚
â”‚                    â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚                    â”‚ â”‚ ðŸ“„ Contract_ACME_2026.pdf  CONTRACT  [VERIFIED] [View]â”‚â”‚
â”‚                    â”‚ â”‚ ðŸ“„ Invoice_INV2026-0451.pdf INVOICE [UPLOADED] [View]â”‚â”‚
â”‚                    â”‚ â”‚ ðŸ“„ Packing_List.xlsx   PACKING_LIST [VERIFIED] [View]â”‚â”‚
â”‚                    â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚                    â”‚ â”‚ ðŸ• Timeline                           [Ð’ÑÑ– Ð¿Ð¾Ð´Ñ–Ñ— â†’]  â”‚â”‚
â”‚                    â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚                    â”‚ â”‚ â— 12:10  SYSTEM   APPROVAL_CREATED                  â”‚â”‚
â”‚                    â”‚ â”‚ â†» 12:10  SYSTEM   STATE_CHANGED                     â”‚â”‚
â”‚                    â”‚ â”‚ ðŸ’° 12:08  SYSTEM   QUOTE_CALCULATED                  â”‚â”‚
â”‚                    â”‚ â”‚ ðŸ‘¤ 11:42  HUMAN    STATE_CHANGED                     â”‚â”‚
â”‚                    â”‚ â”‚ ðŸ¤– 10:30  AI       DOC_EXTRACTED                     â”‚â”‚
â”‚                    â”‚ â”‚ ðŸ‘¤ 09:55  HUMAN    CASE_CREATED                      â”‚â”‚
â”‚                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 11. UX Behavior & Interactions

### 11.1 Page Load

| Step | Action | Result |
|------|--------|--------|
| 1 | Page loads | Show loading skeletons |
| 2 | Fetch case data | Populate all sections |
| 3 | Focus | Scroll to NBA section |

### 11.2 NBA Actions

| Action | Flow | Result |
|--------|------|--------|
| **Approve** | Click â†’ Confirm modal â†’ API call | State change + NBA update |
| **Edit & Approve** | Click â†’ Edit modal â†’ Save â†’ API call | Draft updated + State change |
| **Reject** | Click â†’ Reason modal â†’ API call | State rollback + NBA update |

### 11.3 Approve Flow

```
1. User clicks "Approve"
   â†“
2. Confirmation modal appears:
   "ÐŸÑ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚Ð¸ ÐºÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ†Ñ–ÑŽ $2,800 Ð´Ð»Ñ ACME Ltd?"
   [Ð¡ÐºÐ°ÑÑƒÐ²Ð°Ñ‚Ð¸] [ÐŸÑ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚Ð¸]
   â†“
3. API: POST /approvals/{id}/decide
   { decision: "APPROVED", comment: null }
   â†“
4. Success:
   - Toast: "ÐšÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ†Ñ–ÑŽ Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð¾"
   - State changes: QUOTE_APPROVAL_PENDING â†’ QUOTE_SENT
   - NBA updates to next action
   - Timeline adds APPROVAL_APPROVED event
   â†“
5. Error:
   - Toast: "ÐŸÐ¾Ð¼Ð¸Ð»ÐºÐ°: {message}"
   - NBA state unchanged
```

### 11.4 Edit & Approve Flow

```
1. User clicks "Edit & Approve"
   â†“
2. Edit modal appears with draft fields:
   - Base cost (editable)
   - Margin (editable)
   - Assumptions (editable)
   - Validity (editable)
   â†“
3. User edits and clicks "Save & Approve"
   â†“
4. API: POST /approvals/{id}/decide
   { decision: "APPROVED", decision_snapshot: {...edited_data}, comment: "Adjusted margin" }
   â†“
5. Success â†’ same as Approve flow
```

### 11.5 Reject Flow

```
1. User clicks "Reject"
   â†“
2. Reject modal appears:
   "ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð° Ð²Ñ–Ð´Ñ…Ð¸Ð»ÐµÐ½Ð½Ñ:" (required textarea)
   [Ð¡ÐºÐ°ÑÑƒÐ²Ð°Ñ‚Ð¸] [Ð’Ñ–Ð´Ñ…Ð¸Ð»Ð¸Ñ‚Ð¸]
   â†“
3. User enters reason, clicks "Ð’Ñ–Ð´Ñ…Ð¸Ð»Ð¸Ñ‚Ð¸"
   â†“
4. API: POST /approvals/{id}/decide
   { decision: "REJECTED", comment: "..." }
   â†“
5. Success:
   - Toast: "ÐšÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ†Ñ–ÑŽ Ð²Ñ–Ð´Ñ…Ð¸Ð»ÐµÐ½Ð¾"
   - State changes based on rejection_fallback
   - NBA updates to next action
   - Timeline adds APPROVAL_REJECTED event
```

### 11.6 Document Actions

| Action | Flow | Result |
|--------|------|--------|
| **View** | Click â†’ Open preview/new tab | Document visible |
| **Verify** | Click â†’ Verification modal | Status â†’ VERIFIED |
| **Upload** | Click button â†’ File picker â†’ Upload | New document added |

### 11.7 Navigation

| Element | Action | Result |
|---------|--------|--------|
| Back button | Click | â†’ Navigate to Case List |
| Sidebar anchors | Click | â†’ Scroll to section |
| "Ð’ÑÑ– Ð¿Ð¾Ð´Ñ–Ñ—" link | Click | â†’ Navigate to Timeline page |
| Document "View" | Click | â†’ Open document preview |

### 11.8 Empty States

| Section | Empty State Message |
|---------|---------------------|
| Documents | "ÐÐµÐ¼Ð°Ñ” Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ñ–Ð². Ð—Ð°Ð²Ð°Ð½Ñ‚Ð°Ð¶Ñ‚Ðµ Ð¿ÐµÑ€ÑˆÐ¸Ð¹ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚." |
| Timeline | "Ð†ÑÑ‚Ð¾Ñ€Ñ–Ñ Ð¿Ð¾Ñ€Ð¾Ð¶Ð½Ñ" (Ñ€Ñ–Ð´ÐºÐ¾, Ð·Ð°Ð²Ð¶Ð´Ð¸ Ñ” CASE_CREATED) |
| Risk Flags | No card shown (optional section) |

### 11.9 Loading States

| Component | Loading Behavior |
|-----------|-----------------|
| Case Header | Skeleton for badges, text |
| NBA Card | Skeleton for title, buttons |
| Quote Draft | Skeleton rows |
| Documents | Skeleton list items |
| Timeline | Skeleton timeline items |
| Context Cards | Skeleton cards |

---

## 12. Data Sources (Supabase)

### 12.1 Core Tables

| Ð¢Ð°Ð±Ð»Ð¸Ñ†Ñ | Ð”Ð°Ð½Ñ– Ð´Ð»Ñ Case Detail |
|---------|---------------------|
| `cases` | All case data, status, state, owner, payload, computed |
| `approvals` | Pending approval for NBA |
| `documents` | Documents list with statuses |
| `case_events` | Timeline events |
| `users` | Owner info |
| `clients` | Client info |

### 12.2 Main Query

```sql
-- Fetch case detail with related data
SELECT 
  c.id,
  c.case_number,
  c.case_type,
  c.state,
  c.status,
  c.sla_deadline,
  c.priority,
  c.payload,
  c.computed,
  c.created_at,
  c.updated_at,
  -- Owner
  jsonb_build_object(
    'id', u.id,
    'name', u.raw_user_meta_data->>'full_name',
    'initials', u.raw_user_meta_data->>'initials'
  ) as owner,
  -- Pending approval (for NBA)
  (
    SELECT jsonb_build_object(
      'id', a.id,
      'type', a.approval_type,
      'request_snapshot', a.request_snapshot,
      'requested_at', a.requested_at,
      'auto_drafted', a.auto_drafted
    )
    FROM approvals a
    WHERE a.case_id = c.id AND a.status = 'PENDING'
    ORDER BY a.requested_at ASC
    LIMIT 1
  ) as pending_approval,
  -- Documents count
  (SELECT COUNT(*) FROM documents d WHERE d.case_id = c.id) as documents_count,
  -- Events count
  (SELECT COUNT(*) FROM case_events e WHERE e.case_id = c.id) as events_count
FROM cases c
LEFT JOIN auth.users u ON u.id = c.owner_user_id
WHERE c.id = $case_id;
```

### 12.3 Documents Query

```sql
SELECT 
  id,
  filename,
  doc_type,
  source,
  status,
  file_size,
  created_at,
  verified_at,
  verified_by
FROM documents
WHERE case_id = $case_id
ORDER BY created_at DESC;
```

### 12.4 Timeline Query

```sql
SELECT 
  id,
  event_type,
  actor_type,
  actor_id,
  metadata,
  created_at,
  -- Actor name
  CASE 
    WHEN actor_type = 'HUMAN' THEN (
      SELECT raw_user_meta_data->>'full_name' 
      FROM auth.users 
      WHERE id = actor_id::uuid
    )
    ELSE NULL
  END as actor_name
FROM case_events
WHERE case_id = $case_id
ORDER BY created_at DESC
LIMIT 10;  -- PoC: last 10 events
```

### 12.5 RLS Policies

```sql
-- User can view case if they are owner or have org access
CREATE POLICY "case_detail_read" ON cases
  FOR SELECT
  USING (
    owner_user_id = auth.uid()
    OR org_id = (auth.jwt() ->> 'org_id')::uuid
  );

-- Documents follow case access
CREATE POLICY "documents_read" ON documents
  FOR SELECT
  USING (
    case_id IN (
      SELECT id FROM cases 
      WHERE owner_user_id = auth.uid() 
         OR org_id = (auth.jwt() ->> 'org_id')::uuid
    )
  );
```

---

## 13. UI Components

### 13.1 Case Header Component

```css
.case-header {
  background: var(--bg-editor);
  padding: 16px 20px;
  border-bottom: 1px solid var(--divider);
}

.case-header-top {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.case-id {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 16px;
  font-weight: 600;
}

.case-type-badge {
  display: inline-flex;
  align-items: center;
  padding: 2px 8px;
  font-size: 11px;
  font-weight: 600;
  border-radius: var(--radius-sm);
  background: var(--bg-panel);
  color: var(--text-secondary);
  text-transform: uppercase;
}

.case-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  align-items: center;
}

.case-meta-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  color: var(--text-secondary);
}

.case-meta-item svg {
  width: 14px;
  height: 14px;
}
```

### 13.2 NBA Card Component

```css
.nba-card {
  background: var(--bg-editor);
  border: 2px solid var(--accent);
  border-radius: var(--radius-md);
  padding: 20px;
  margin-bottom: 20px;
  box-shadow: var(--shadow-sm);
}

.nba-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
}

.nba-indicator {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: #EF4444;  /* default: approval required */
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.nba-label {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--text-secondary);
}

.nba-title {
  font-size: 18px;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 12px;
}

.nba-description {
  margin-bottom: 12px;
}

.nba-description ul {
  list-style: disc;
  padding-left: 20px;
  color: var(--text-secondary);
}

.nba-risk {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: #FEF3C7;
  border-radius: var(--radius-sm);
  color: #92400E;
  font-size: 13px;
  margin-bottom: 16px;
}

.nba-actions {
  display: flex;
  gap: 8px;
}
```

### 13.3 Quote Draft Component

```css
.quote-draft {
  background: var(--bg-editor);
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
}

.quote-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--divider);
  font-weight: 600;
}

.quote-body {
  padding: 16px;
}

.quote-row {
  display: flex;
  justify-content: space-between;
  padding: 6px 0;
  font-size: 14px;
}

.quote-row.total {
  border-top: 2px solid var(--border);
  margin-top: 8px;
  padding-top: 12px;
  font-weight: 600;
  font-size: 16px;
}

.quote-label {
  color: var(--text-secondary);
}

.quote-value {
  color: var(--text);
  font-weight: 500;
}

.quote-assumptions {
  margin-top: 16px;
  padding: 12px;
  background: var(--bg-panel);
  border-radius: var(--radius-sm);
}

.quote-assumptions-title {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  margin-bottom: 8px;
}

.quote-notes {
  margin-top: 12px;
  font-size: 13px;
  color: var(--text-secondary);
}
```

### 13.4 Document List Component

```css
.doc-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.doc-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--divider);
}

.doc-item:last-child {
  border-bottom: none;
}

.doc-item:hover {
  background: var(--bg-hover);
}

.doc-icon {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-panel);
  border-radius: var(--radius-sm);
  color: var(--text-secondary);
}

.doc-info {
  flex: 1;
}

.doc-name {
  font-size: 14px;
  font-weight: 500;
  color: var(--text);
}

.doc-meta {
  display: flex;
  gap: 8px;
  font-size: 12px;
  color: var(--text-muted);
  margin-top: 2px;
}

.doc-actions {
  display: flex;
  gap: 8px;
}
```

### 13.5 Timeline Component

```css
.timeline {
  position: relative;
  padding-left: 24px;
}

.timeline::before {
  content: '';
  position: absolute;
  left: 7px;
  top: 0;
  bottom: 0;
  width: 2px;
  background: var(--divider);
}

.timeline-item {
  position: relative;
  padding-bottom: 16px;
}

.timeline-item:last-child {
  padding-bottom: 0;
}

.timeline-marker {
  position: absolute;
  left: -24px;
  top: 2px;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg-editor);
  border: 2px solid var(--border);
}

.timeline-marker.system {
  border-color: #6B7280;
  color: #6B7280;
}

.timeline-marker.human {
  border-color: #007ACC;
  color: #007ACC;
}

.timeline-marker.ai {
  border-color: #8B5CF6;
  color: #8B5CF6;
}

.timeline-marker svg {
  width: 10px;
  height: 10px;
}

.timeline-content {
  padding-left: 8px;
}

.timeline-header {
  display: flex;
  gap: 8px;
  align-items: center;
  margin-bottom: 2px;
}

.timeline-actor {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  color: var(--text-secondary);
}

.timeline-time {
  font-size: 11px;
  color: var(--text-muted);
}

.timeline-event {
  font-size: 13px;
  font-weight: 500;
  color: var(--text);
}

.timeline-details {
  font-size: 13px;
  color: var(--text-secondary);
  margin-top: 2px;
}
```

---

## 14. Accessibility (A11y)

### 14.1 Keyboard Navigation

| Key | Action |
|-----|--------|
| Tab | Navigate through interactive elements |
| Enter/Space | Activate button/link |
| Escape | Close modal |
| Arrow Up/Down | Navigate timeline (MVP) |

### 14.2 ARIA Attributes

```html
<!-- NBA Card -->
<section 
  role="region" 
  aria-labelledby="nba-title"
  aria-live="polite"
>
  <h3 id="nba-title">ÐŸÑ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚Ð¸ ÐºÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ†Ñ–ÑŽ</h3>
  <!-- ... -->
</section>

<!-- Status badges -->
<span 
  class="status-badge status-pending" 
  role="status"
  aria-label="Ð¡Ñ‚Ð°Ð½: Ð¾Ñ‡Ñ–ÐºÑƒÑ” Ð¿Ñ–Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¶ÐµÐ½Ð½Ñ"
>
  QUOTE_APPROVAL_PENDING
</span>

<!-- SLA indicator -->
<span 
  class="sla-warning" 
  aria-label="SLA Ð´ÐµÐ´Ð»Ð°Ð¹Ð½: 2 Ð´Ð½Ñ– 4 Ð³Ð¾Ð´Ð¸Ð½Ð¸"
>
  SLA: 2d 4h
</span>

<!-- Timeline -->
<ol 
  class="timeline" 
  role="list" 
  aria-label="Ð†ÑÑ‚Ð¾Ñ€Ñ–Ñ Ð¿Ð¾Ð´Ñ–Ð¹ ÐºÐµÐ¹ÑÐ°"
>
  <li role="listitem">...</li>
</ol>
```

### 14.3 Focus Management

| Action | Focus Behavior |
|--------|----------------|
| Page load | Focus on NBA primary button |
| Open modal | Focus on first form field |
| Close modal | Return focus to trigger button |
| Approve/Reject | Focus on updated NBA or next action |

---

## 15. Anti-patterns (Ñ‡Ð¾Ð³Ð¾ ÐÐ• Ñ€Ð¾Ð±Ð¸Ñ‚Ð¸)

| âŒ Anti-pattern | ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð° | âœ… Ð Ñ–ÑˆÐµÐ½Ð½Ñ |
|-----------------|----------|------------|
| Ð§Ð°Ñ‚ Ð·Ð°Ð¼Ñ–ÑÑ‚ÑŒ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð¸ | Ð’Ñ‚Ñ€Ð°Ñ‡Ð°Ñ”Ñ‚ÑŒÑÑ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚ | Structured cockpit layout |
| ÐŸÑ€Ð¸Ñ…Ð¾Ð²ÑƒÐ²Ð°Ñ‚Ð¸ Ñ€Ð¸Ð·Ð¸ÐºÐ¸ | ÐœÐµÐ½ÐµÐ´Ð¶ÐµÑ€ Ð½Ðµ Ð±Ð°Ñ‡Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼ | Risk flags Ð·Ð°Ð²Ð¶Ð´Ð¸ Ð²Ð¸Ð´Ð¸Ð¼Ñ– |
| Auto-approve Ð±ÐµÐ· confirm | ÐŸÐ¾Ñ€ÑƒÑˆÑƒÑ” human-in-the-loop | Confirmation modal |
| Ð”Ð¾Ð²Ð³Ñ– AI reasoning | Cognitive overload | Show on demand only |
| Ð Ð¾Ð·Ð¼Ð¸Ñ‚Ñ– ÑÑ‚Ð°Ð½Ð¸ | ÐÐµÐ·Ñ€Ð¾Ð·ÑƒÐ¼Ñ–Ð»Ð¾ Ñ‰Ð¾ Ð´Ð°Ð»Ñ– | Clear state + NBA |
| Multiple primary actions | Decision paralysis | One clear NBA |
| Hidden timeline | No audit trail | Always visible timeline |

---

## 16. Acceptance Criteria (Definition of Done)

### 16.1 PoC Acceptance

Case Detail v0 Ð²Ð²Ð°Ð¶Ð°Ñ”Ñ‚ÑŒÑÑ ÑƒÑÐ¿Ñ–ÑˆÐ½Ð¸Ð¼, ÑÐºÑ‰Ð¾:

**Functional:**
- [ ] ÐœÐµÐ½ÐµÐ´Ð¶ÐµÑ€ Ð±Ð°Ñ‡Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð²Ð½Ð¸Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐºÑÑ‚ ÐºÐµÐ¹ÑÐ° (header, cargo, route, client)
- [ ] NBA Ð¿Ð¾ÐºÐ°Ð·ÑƒÑ” Ð½Ð°ÑÑ‚ÑƒÐ¿Ð½Ñƒ Ð´Ñ–ÑŽ Ð· ÐºÐ½Ð¾Ð¿ÐºÐ°Ð¼Ð¸ Approve/Edit/Reject
- [ ] Quote Draft Ð²Ñ–Ð´Ð¾Ð±Ñ€Ð°Ð¶Ð°Ñ”Ñ‚ÑŒÑÑ Ð· ÑƒÑÑ–Ð¼Ð° Ð´ÐµÑ‚Ð°Ð»ÑÐ¼Ð¸
- [ ] Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¸ Ð¿Ð¾ÐºÐ°Ð·ÑƒÑŽÑ‚ÑŒÑÑ Ð·Ñ– ÑÑ‚Ð°Ñ‚ÑƒÑÐ°Ð¼Ð¸
- [ ] Timeline Ð¿Ð¾ÐºÐ°Ð·ÑƒÑ” Ð¾ÑÑ‚Ð°Ð½Ð½Ñ– Ð¿Ð¾Ð´Ñ–Ñ—
- [ ] Approve flow Ð¿Ñ€Ð°Ñ†ÑŽÑ” Ð· confirmation
- [ ] Reject flow Ð²Ð¸Ð¼Ð°Ð³Ð°Ñ” Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ñƒ

**UX:**
- [ ] Page load < 1s
- [ ] NBA Ð²Ð¸Ð´Ñ–Ð»ÐµÐ½Ð¸Ð¹ Ð²Ñ–Ð·ÑƒÐ°Ð»ÑŒÐ½Ð¾ (border, pulse)
- [ ] Statuses Ð¼Ð°ÑŽÑ‚ÑŒ Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ð½Ñ– ÐºÐ¾Ð»ÑŒÐ¾Ñ€Ð¸
- [ ] SLA at risk Ð¿Ð¾ÐºÐ°Ð·ÑƒÑ” warning/danger
- [ ] Responsive layout (desktop-first)

**Navigation:**
- [ ] Back button Ð¿Ð¾Ð²ÐµÑ€Ñ‚Ð°Ñ” Ð´Ð¾ Case List
- [ ] Sidebar anchors Ð¿Ñ€Ð°Ñ†ÑŽÑŽÑ‚ÑŒ
- [ ] Document View Ð²Ñ–Ð´ÐºÑ€Ð¸Ð²Ð°Ñ” preview

### 16.2 MVP Acceptance (Ð´Ð¾Ð´Ð°Ñ‚ÐºÐ¾Ð²Ð¾)

- [ ] Edit & Approve modal Ð· Ñ€ÐµÐ´Ð°Ð³ÑƒÐ²Ð°Ð½Ð½ÑÐ¼ draft
- [ ] Document preview inline
- [ ] Full timeline Ð· Ñ„Ñ–Ð»ÑŒÑ‚Ñ€Ð°Ð¼Ð¸
- [ ] Comments section
- [ ] Real-time updates (Supabase subscriptions)

---

## 17. Roadmap: v0 â†’ v1 â†’ v2

### v0 (PoC)

| ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ | Ð’ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾ |
|-----------|----------|
| Case Header | âœ… |
| NBA Card | âœ… |
| Quote Draft view | âœ… |
| Documents list | âœ… |
| Timeline (last 10) | âœ… |
| Context Sidebar | âœ… |
| Approve flow | âœ… |
| Reject flow | âœ… |
| Edit & Approve | â€” |

### v1 (MVP)

| ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ | Ð’ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾ |
|-----------|----------|
| v0 features | âœ… |
| Edit & Approve modal | âœ… |
| Document preview | âœ… |
| Document upload | âœ… |
| Full timeline | âœ… |
| Comments | âœ… |
| Real-time updates | âœ… |

### v2 (Scale)

| ÐšÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚ | Ð’ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾ |
|-----------|----------|
| v1 features | âœ… |
| Split view (doc + form) | âœ… |
| AI reasoning (expandable) | âœ… |
| Real-time collaboration | âœ… |
| Keyboard shortcuts | âœ… |
| Version history for drafts | âœ… |

---

## 18. Technical Implementation Notes

### 18.1 Frontend Implementation

| ÐÑÐ¿ÐµÐºÑ‚ | Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ñ–Ñ |
|--------|--------------|
| **Framework** | React + Supabase JS client |
| **State** | React Query for server state |
| **Routing** | `/cases/:id` route |
| **Forms** | React Hook Form for Edit modal |
| **Validation** | Zod schemas |

### 18.2 Real-time Updates

```typescript
// Supabase subscription for case updates
supabase
  .channel(`case_${caseId}`)
  .on(
    'postgres_changes',
    {
      event: '*',
      schema: 'public',
      table: 'cases',
      filter: `id=eq.${caseId}`
    },
    (payload) => {
      queryClient.invalidateQueries(['case', caseId]);
    }
  )
  .on(
    'postgres_changes',
    {
      event: 'INSERT',
      schema: 'public',
      table: 'case_events',
      filter: `case_id=eq.${caseId}`
    },
    (payload) => {
      queryClient.invalidateQueries(['case-events', caseId]);
    }
  )
  .subscribe();
```

### 18.3 Performance Optimizations

| Optimization | Implementation |
|--------------|----------------|
| **Lazy loading** | Documents list loads separately |
| **Skeleton UI** | Show immediately during fetch |
| **Optimistic updates** | Update UI before API response |
| **Prefetch** | Prefetch case on hover in Case List |

---

## 19. Integration Points

### 19.1 Integration with Case List

| Ð’Ð·Ð°Ñ”Ð¼Ð¾Ð´Ñ–Ñ | ÐÐ°Ð¿Ñ€ÑÐ¼Ð¾Ðº | ÐžÐ¿Ð¸Ñ |
|-----------|----------|------|
| Row click | Case List â†’ Detail | Navigate to `/cases/{id}` |
| Back button | Detail â†’ Case List | Browser back or explicit link |
| State change | Detail â†’ Case List | List refreshes to show new state |

### 19.2 Integration with Approvals API

| Endpoint | Method | Purpose |
|----------|--------|---------|
| `/approvals/{id}` | GET | Fetch pending approval |
| `/approvals/{id}/decide` | POST | Submit approval decision |

### 19.3 Integration with Documents API

| Endpoint | Method | Purpose |
|----------|--------|---------|
| `/cases/{id}/documents` | GET | Fetch documents list |
| `/documents` | POST | Upload new document |
| `/documents/{id}/verify` | POST | Verify document |

### 19.4 Integration with N8N Workflows

| Trigger | Workflow |
|---------|----------|
| APPROVAL_APPROVED | Quote sent to client |
| APPROVAL_REJECTED | Notification to owner |
| STATE_CHANGED | Update 1C integration |

---

## 20. End Note

Case Detail (Case Cockpit) Ð² IMCP â€” Ñ†Ðµ **"ÐºÐ°Ð±Ñ–Ð½Ð° Ð¿Ñ–Ð»Ð¾Ñ‚Ð°"** Ð´Ð»Ñ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ð°.

> Ð¡Ñ‚Ð¾Ñ€Ñ–Ð½ÐºÐ° Ð²Ñ–Ð´Ð¿Ð¾Ð²Ñ–Ð´Ð°Ñ” Ð½Ð° Ð³Ð¾Ð»Ð¾Ð²Ð½Ðµ Ð¿Ð¸Ñ‚Ð°Ð½Ð½Ñ: **"Ð©Ð¾ Ñ€Ð¾Ð±Ð¸Ñ‚Ð¸ Ð´Ð°Ð»Ñ– Ð² Ñ†ÑŒÐ¾Ð¼Ñƒ ÐºÐµÐ¹ÑÑ–?"**

ÐšÐ»ÑŽÑ‡Ð¾Ð²Ñ– Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿Ð¸:
- **NBA Ð·Ð°Ð²Ð¶Ð´Ð¸ Ð²Ð¸Ð´Ð¸Ð¼Ð¸Ð¹** â€” Ð½Ð°ÑÑ‚ÑƒÐ¿Ð½Ð° Ð´Ñ–Ñ Ð¾Ñ‡ÐµÐ²Ð¸Ð´Ð½Ð°
- **Draft-First** â€” ÑÐ¸ÑÑ‚ÐµÐ¼Ð° Ð³Ð¾Ñ‚ÑƒÑ”, Ð»ÑŽÐ´Ð¸Ð½Ð° Ð¿ÐµÑ€ÐµÐ²Ñ–Ñ€ÑÑ”
- **Context accessible** â€” Ð²ÑÑ Ñ–Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ñ–Ñ Ð½Ð° Ð¾Ð´Ð½Ð¾Ð¼Ñƒ ÐµÐºÑ€Ð°Ð½Ñ–
- **Audit trail** â€” timeline Ð¿Ð¾ÐºÐ°Ð·ÑƒÑ” Ð²ÑÑ– Ð¿Ð¾Ð´Ñ–Ñ—
- **Human-in-the-Loop** â€” ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡Ð½Ñ– Ñ€Ñ–ÑˆÐµÐ½Ð½Ñ Ñ‡ÐµÑ€ÐµÐ· Approval Gates

---

**ÐŸÐ¾Ð²'ÑÐ·Ð°Ð½Ð° Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ñ–Ñ:**
- [/docs/core/](../core/) â€” core Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ñ–Ñ IMCP
- [/docs/case_templates/](../case_templates/) â€” ÑˆÐ°Ð±Ð»Ð¾Ð½Ð¸ ÐºÐµÐ¹ÑÑ–Ð²
- [ui_style_reference.md](./ui_style_reference.md) â€” Ð´Ð¸Ð·Ð°Ð¹Ð½-Ñ‚Ð¾ÐºÐµÐ½Ð¸
- [case_list_spec.md](./case_list_spec.md) â€” Case List
- [owner_dashboard_spec.md](./owner_dashboard_spec.md) â€” Owner Dashboard
- [personal_settings_spec.md](./personal_settings_spec.md) â€” Ð¿ÐµÑ€ÑÐ¾Ð½Ð°Ð»ÑŒÐ½Ñ– Ð½Ð°Ð»Ð°ÑˆÑ‚ÑƒÐ²Ð°Ð½Ð½Ñ
