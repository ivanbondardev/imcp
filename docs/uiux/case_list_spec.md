# Case List Specification

Операційна черга кейсів для менеджерів.

---

## Scope / Non-scope (для продуктового ревʼю)

**Scope (P0):**
- Пріоритезована черга “що робити зараз”
- Швидке відкриття кейса та швидкі фільтри

**Non-scope (P1+):**
- Складні кастомні вʼю/репорти (це більше Owner Dashboard)

---

## MVP (P0) vs Next (P1)

**P0:**
- Групи за терміновістю (pending approvals, at-risk/SLA, blocked)
- Мінімальні колонки + швидкий пошук/фільтри

**P1:**
- Saved views, розширені фільтри, кастомізація колонок

---

## Entry points / Deep links

- `/cases` (вхід з навігації)
- Клік по рядку: `/cases/:case_number`
- Пошук по `case_number` (див. `platform_ui_contracts.md`)

---

## Мета

Case List — центральний хаб менеджера, що відповідає на питання: **"Що мені робити зараз?"**

### Основні задачі
- **Пріоритезація**: зрозуміти що робити першим (approvals, SLA at risk)
- **Огляд потоку**: бачити всі активні кейси та їх статуси
- **Швидкий доступ**: перейти до кейса за 1 клік
- **Створення**: ініціювати нові кейси

---

## Case List ≠ Owner Dashboard

| Case List | Owner Dashboard |
|-----------|-----------------|
| Мої кейси, моя черга | Весь потік організації |
| Менеджер/оператор | Business Owner, Ops Lead |
| "Що мені робити зараз?" | "Де буксує система?" |

---

## Інформаційна архітектура

### KPI блок
Ключові метрики вгорі:
- Pending approvals (мої)
- SLA at risk
- Активних кейсів
- Завершено за період

Кожна метрика клікабельна → фільтрує список.

### Групи кейсів

Кейси групуються за пріоритетом:

1. **Потребують підтвердження** — кейси з pending approval
2. **В роботі** — активні без блокерів
3. **Очікують зовнішню відповідь** — `cases.status='BLOCKED'` (візуально приглушені)

### Колонки таблиці
Рекомендовані дані для відображення:
- Case ID + type badge
- Client name
- State (бізнес-стан)
- SLA indicator
- Owner
- Action button

---

## UX принципи

### Пріоритезація через групування
Не весь список одразу, а групи за терміновістю.

### SLA завжди видимий
Індикатор з кольоровою градацією за терміновістю.

### NBA (Next Best Action)
Показувати що саме потрібно зробити в кожному кейсі.

### Clickable rows
Весь рядок клікабельний → перехід до Case Cockpit.

---

## Створення кейса

Modal для створення нового кейса:
- Вибір типу кейса (динамічні поля залежно від типу)
- Вибір або створення клієнта
- Обов'язкові поля для старту
- Після створення → redirect на новий кейс

---

## Фільтри

Базові quick filters в sidebar:
- Мої кейси
- Потребують уваги
- SLA скоро

Фільтри адитивні (AND логіка).

---

## Core залежності

Дивись [02_core_data_model.md](../core/02_core_data_model.md) для:
- `cases.status`: `OPEN | BLOCKED | DONE | ARCHIVED`
- `cases.state`: бізнес-стани
- `approvals.status`: `PENDING | APPROVED | REJECTED | CANCELLED`

---

## Edge cases (P0)

- **Немає кейсів у черзі**: пояснити “чому пусто” + CTA “Створити кейс”/“Зняти фільтри”
- **RLS різні видимості**: список ніколи не підказує існування “чужих” кейсів

---

## Product Acceptance Checklist (P0)

- [ ] Є групування: pending approvals / in progress / blocked (зрозуміло, що робити першим)
- [ ] SLA/at-risk сигнал видно без відкриття кейса
- [ ] Рядок клікабельний і веде в `/cases/:case_number`
- [ ] Пошук знаходить кейси по `case_number` (мінімум)
- [ ] Quick filters працюють як AND-логіка і видно активні фільтри
- [ ] Empty state пояснює “чому пусто” і дає 1–2 CTA
