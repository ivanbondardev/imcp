# Personal Settings Specification
## IMCP â€” Manager Preferences for Case Cockpit & Work Inbox

**Ğ’ĞµÑ€ÑÑ–Ñ:** 1.1  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** Spec (PoC â†’ MVP)  
**Ğ¢Ğ¸Ğ¿ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°:** Spec  
**ĞÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ñ–Ñ:** Product, UX/UI, Frontend, Architecture  
**Changelog:**  
- v1.1 â€” ÑƒĞ½Ñ–Ñ„Ñ–ĞºĞ¾Ğ²Ğ°Ğ½Ğ¾ event types, timezone model, save behavior, edge cases, a11y, test scenarios  
- v1.0 â€” initial spec based on draft

**ĞŸĞ¾Ğ¿ĞµÑ€ĞµĞ´Ğ½Ñ– Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¸:**  
- [00_shared_mental_model.md](../core/00_shared_mental_model.md) â€” Ğ¼ĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½Ğ° Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ  
- [01_architecture_overview.md](../core/01_architecture_overview.md) â€” Ğ°Ñ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°  
- [02_core_data_model.md](../core/02_core_data_model.md) â€” Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ´Ğ°Ğ½Ğ¸Ñ…  
- [03_approval_pattern.md](../core/03_approval_pattern.md) â€” Ğ¿Ğ°Ñ‚ĞµÑ€Ğ½ Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½ÑŒ  
- [04_case_cockpit_ux.md](../core/04_case_cockpit_ux.md) â€” UX/UI Case Cockpit  

**ĞŸĞ¾Ğ²'ÑĞ·Ğ°Ğ½Ñ– Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¸:**  
- [UI Style Reference](./ui_style_reference.md) â€” Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½-Ñ‚Ğ¾ĞºĞµĞ½Ğ¸  
- [Owner Dashboard Spec](./owner_dashboard_spec.md) â€” ÑĞ¿ĞµÑ†Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ Owner Dashboard  

---

## 1. Purpose â€” ĞĞ°Ğ²Ñ–Ñ‰Ğ¾ Ğ¿Ğ¾Ñ‚Ñ€Ñ–Ğ±Ğ½Ñ– Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ– Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ

Personal Settings Ğ² IMCP â€” Ñ†Ğµ **Ñ–Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ñ–Ñ— Ñ€Ğ¾Ğ±Ğ¾Ñ‡Ğ¾Ğ³Ğ¾ ÑĞµÑ€ĞµĞ´Ğ¾Ğ²Ğ¸Ñ‰Ğ°** Ğ´Ğ»Ñ Ğ¿Ñ–Ğ´Ğ²Ğ¸Ñ‰ĞµĞ½Ğ½Ñ ĞµÑ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ñ– Ñ‚Ğ° Ğ·Ğ¼ĞµĞ½ÑˆĞµĞ½Ğ½Ñ ĞºĞ¾Ğ³Ğ½Ñ–Ñ‚Ğ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ½Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€Ğ°.

### 1.1 ĞÑĞ½Ğ¾Ğ²Ğ½Ñ– Ñ†Ñ–Ğ»Ñ–

| Ğ¦Ñ–Ğ»ÑŒ | ĞĞ¿Ğ¸Ñ |
|------|------|
| **Ğ—Ğ¼ĞµĞ½ÑˆĞµĞ½Ğ½Ñ "ÑˆÑƒĞ¼Ñƒ"** | Ğ¤Ñ–Ğ»ÑŒÑ‚Ñ€ÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ½ĞµÑ€ĞµĞ»ĞµĞ²Ğ°Ğ½Ñ‚Ğ½Ñ– ÑĞ¿Ğ¾Ğ²Ñ–Ñ‰ĞµĞ½Ğ½Ñ |
| **Ğ¨Ğ²Ğ¸Ğ´ĞºÑ–ÑÑ‚ÑŒ Ñ€ĞµĞ°ĞºÑ†Ñ–Ñ—** | ĞŸÑ€Ñ–Ğ¾Ñ€Ğ¸Ñ‚ĞµĞ·ÑƒĞ²Ğ°Ñ‚Ğ¸ critical events |
| **ĞĞ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ñ–Ñ Ğ¿Ñ–Ğ´ ÑÑ‚Ğ¸Ğ»ÑŒ Ñ€Ğ¾Ğ±Ğ¾Ñ‚Ğ¸** | ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ñ‚Ğ¸ inbox Ñ‚Ğ° UI Ğ¿Ñ–Ğ´ ÑĞµĞ±Ğµ |
| **Ğ—Ñ€ÑƒÑ‡Ğ½Ñ–ÑÑ‚ÑŒ Ñ‰Ğ¾Ğ´ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ** | ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»Ñ–Ğ·Ğ¾Ğ²Ğ°Ğ½Ñ– ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¸, ÑˆĞ²Ğ¸Ğ´ĞºÑ– Ğ´Ñ–Ñ— |

### 1.2 Ğ©Ğ¾ Personal Settings ĞĞ• Ğ·Ğ¼Ñ–Ğ½ÑÑÑ‚ÑŒ

> âš ï¸ **ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ¾:** ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ– Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ **Ğ½Ğµ Ğ²Ğ¿Ğ»Ğ¸Ğ²Ğ°ÑÑ‚ÑŒ Ğ½Ğ° Ğ±Ñ–Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ñ–ĞºÑƒ**.

| ĞĞ• Ğ·Ğ¼Ñ–Ğ½ÑÑ”Ñ‚ÑŒÑÑ | ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ° |
|---------------|---------|
| State machine transitions | Ğ‘Ñ–Ğ·Ğ½ĞµÑ-Ğ¿Ñ€Ğ¾Ñ†ĞµÑ Ñ”Ğ´Ğ¸Ğ½Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ²ÑÑ–Ñ… |
| Approval gates | [03_approval_pattern.md](../core/03_approval_pattern.md) â€” Ğ¾Ğ±Ğ¾Ğ²'ÑĞ·ĞºĞ¾Ğ²Ñ– Ñ‚Ğ¾Ñ‡ĞºĞ¸ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ñ |
| Required fields | Ğ’Ğ¸Ğ·Ğ½Ğ°Ñ‡Ğ°ÑÑ‚ÑŒÑÑ `case_type_configs` |
| RLS policies | ĞŸÑ€Ğ°Ğ²Ğ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ñƒ Ğ²Ğ¸Ğ·Ğ½Ğ°Ñ‡Ğ°ÑÑ‚ÑŒÑÑ Ñ€Ğ¾Ğ»Ğ»Ñ |
| SLA deadlines | Ğ‘Ñ–Ğ·Ğ½ĞµÑ-Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°, Ğ½Ğµ preference |

### 1.3 Ğ©Ğ¾ Personal Settings Ğ·Ğ¼Ñ–Ğ½ÑÑÑ‚ÑŒ

| Ğ—Ğ¼Ñ–Ğ½ÑÑ”Ñ‚ÑŒÑÑ | Ğ¯Ğº ÑĞ°Ğ¼Ğµ |
|------------|---------|
| **Notifications** | ĞšĞ°Ğ½Ğ°Ğ»Ğ¸, Ñ‚Ğ¸Ğ¿Ğ¸ Ğ¿Ğ¾Ğ´Ñ–Ğ¹, quiet hours |
| **Inbox display** | Ğ¤Ñ–Ğ»ÑŒÑ‚Ñ€Ğ¸, ÑĞ¾Ñ€Ñ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ, ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸ |
| **Draft templates** | Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ğ¸ Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½ÑŒ/ĞºĞ¾Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ñ–Ğ² |
| **UI density** | Compact / Comfortable layout |

### 1.4 Ğ’Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ½Ñ–ÑÑ‚ÑŒ Shared Mental Model

Personal Settings Ñ€ĞµĞ°Ğ»Ñ–Ğ·ÑƒÑÑ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ğ¸ [Shared Mental Model](../core/00_shared_mental_model.md):

| ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿ | Ğ ĞµĞ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ Ğ² Personal Settings |
|---------|--------------------------------|
| **Fatigue-Aware Design** | Quiet hours, notification filtering |
| **Human-in-the-Loop** | ĞĞµ Ğ¼Ğ¾Ğ¶Ğ½Ğ° Ğ²Ğ¸Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸ approval notifications |
| **Accountability** | ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ– Ğ·Ğ¼Ñ–Ğ½Ğ¸ (templates) Ğ»Ğ¾Ğ³ÑƒÑÑ‚ÑŒÑÑ ÑĞº `case_events` Ğ¿Ñ€Ğ¸ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ– |
| **Interfaces over Chatbots** | Structured settings UI, Ğ½Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸ Ğ² Ñ‡Ğ°Ñ‚Ñ– |

> **Note:** Audit Ğ´Ğ»Ñ ÑĞ°Ğ¼Ğ¸Ñ… preferences Ñ” Ğ¾Ğ¿Ñ†Ñ–Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¼ (Ğ´Ğ¸Ğ². [Sec. 12.2](#122-audit-events-optional)). ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¸Ğ¹ audit â€” Ñ‡ĞµÑ€ĞµĞ· `case_events` Ğ¿Ñ€Ğ¸ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ– templates.

---

## 2. Scope (PoC vs MVP)

### 2.1 PoC (Minimal Viable)

| Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ–ÑÑ‚ÑŒ | ĞŸÑ€Ñ–Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ | ĞĞ¿Ğ¸Ñ |
|------------------|-----------|------|
| **Notifications** | HIGH | ĞšĞ°Ğ½Ğ°Ğ»Ğ¸ + ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ– Ğ¿Ğ¾Ğ´Ñ–Ñ— + quiet hours |
| **Inbox & Views** | HIGH | Default Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€/ÑĞ¾Ñ€Ñ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ |
| **Draft Templates** | MEDIUM | Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ– ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¸ Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½ÑŒ |
| **Timezone** | HIGH | ĞŸĞ¾Ñ‚Ñ€Ñ–Ğ±ĞµĞ½ Ğ´Ğ»Ñ quiet hours (Ğ¼Ñ–Ğ½Ñ–Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¹ Profile) |

### 2.2 MVP (Extended)

| Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ–ÑÑ‚ÑŒ | ĞŸÑ€Ñ–Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ | ĞĞ¿Ğ¸Ñ |
|------------------|-----------|------|
| PoC features | â€” | Ğ’ÑĞµ Ğ· PoC |
| **Saved Views** | MEDIUM | ĞšÑ–Ğ»ÑŒĞºĞ° "Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½ÑŒ" Inbox |
| **Keyboard Shortcuts** | LOW | Hotkeys Ğ´Ğ»Ñ Ñ‡Ğ°ÑÑ‚Ğ¸Ñ… Ğ´Ñ–Ğ¹ |
| **Language / Timezone** | MEDIUM | Ğ›Ğ¾ĞºĞ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ |
| **UI Density** | LOW | Compact / Comfortable |

### 2.3 v2 (Scale)

| Ğ¤ÑƒĞ½ĞºÑ†Ñ–Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ–ÑÑ‚ÑŒ | ĞĞ¿Ğ¸Ñ |
|------------------|------|
| Personal analytics | "ĞœÑ–Ğ¹ Ñ‡Ğ°Ñ Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ñ–", "ĞœĞ¾Ñ— pending approvals" |
| Team presets | ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ·Ğ° Ñ€Ğ¾Ğ»Ğ»Ñ |
| Shared templates | Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ğ¸ Ğ´Ğ»Ñ Ğ²ÑÑ–Ñ”Ñ— ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸ |
| Policy-driven overrides | ĞĞ´Ğ¼Ñ–Ğ½ Ğ¼Ğ¾Ğ¶Ğµ Ğ½Ğ°ĞºĞ»Ğ°Ğ´Ğ°Ñ‚Ğ¸ Ğ¾Ğ±Ğ¼ĞµĞ¶ĞµĞ½Ğ½Ñ |

---

## 3. UX Principles

### 3.1 ĞÑĞ½Ğ¾Ğ²Ğ½Ñ– Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ğ¸

| ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿ | Ğ ĞµĞ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ |
|---------|------------|
| **Ğ¨Ğ²Ğ¸Ğ´ĞºĞ¾** | ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ â€” Ğ½Ğµ "Ğ´Ñ€ÑƒĞ³Ğ¸Ğ¹ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚", Ğ¼Ñ–Ğ½Ñ–Ğ¼ÑƒĞ¼ ĞºĞ»Ñ–ĞºÑ–Ğ² |
| **Ğ‘ĞµĞ·Ğ¿ĞµÑ‡Ğ½Ğ¾** | ĞĞµ Ğ¼Ğ¾Ğ¶Ğ½Ğ° Ğ²Ğ¸Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒĞ½Ñ– Ñ‚Ğ¾Ñ‡ĞºĞ¸ |
| **ĞŸÑ€Ğ¾Ğ·Ğ¾Ñ€Ğ¾** | ĞÑ‡ĞµĞ²Ğ¸Ğ´Ğ½Ğ¾, Ñ‰Ğ¾ Ğ·Ğ¼Ñ–Ğ½Ğ¸Ñ‚ÑŒÑÑ Ğ¿Ñ–ÑĞ»Ñ Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ |
| **Ğ’Ñ–Ğ´Ğ½Ğ¾Ğ²Ğ»ÑĞ²Ğ°Ğ½Ğ¾** | "Reset to defaults" Ğ´Ğ»Ñ ĞºĞ¾Ğ¶Ğ½Ğ¾Ñ— ÑĞµĞºÑ†Ñ–Ñ— |
| **Ğ”Ñ€ÑƒĞ¶Ğ½ÑŒĞ¾ Ğ´Ğ¾ PoC** | ĞœÑ–Ğ½Ñ–Ğ¼ÑƒĞ¼ Ğ¿Ğ¾Ğ»Ñ–Ğ², Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ñ– |

### 3.2 Ğ©Ğ¾ UI ĞĞ• Ğ¼Ğ°Ñ” Ñ€Ğ¾Ğ±Ğ¸Ñ‚Ğ¸

| âŒ Ğ—Ğ°Ğ±Ğ¾Ñ€Ğ¾Ğ½ĞµĞ½Ğ¾ | Ğ§Ğ¾Ğ¼Ñƒ |
|---------------|------|
| Ğ¥Ğ¾Ğ²Ğ°Ñ‚Ğ¸ critical notifications toggle | ĞœĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ Ğ¿Ğ¾Ğ²Ğ¸Ğ½ĞµĞ½ Ğ·Ğ½Ğ°Ñ‚Ğ¸ Ğ¿Ñ€Ğ¾ approvals |
| Ğ¡ĞºĞ»Ğ°Ğ´Ğ½Ñ– Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ñ–Ñ— | ĞšĞ¾Ğ³Ğ½Ñ–Ñ‚Ğ¸Ğ²Ğ½Ğµ Ğ¿ĞµÑ€ĞµĞ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ |
| ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¸Ğ¹ reset preferences | Ğ’Ñ‚Ñ€Ğ°Ñ‚Ğ° Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½ÑŒ â€” Ñ„Ñ€ÑƒÑÑ‚Ñ€Ğ°Ñ†Ñ–Ñ |
| ĞŸĞ¾ĞºĞ°Ğ·ÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ²ÑÑ– Ğ¾Ğ¿Ñ†Ñ–Ñ— Ğ¾Ğ´Ñ€Ğ°Ğ·Ñƒ | Overwhelm Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ° |

### 3.3 Ğ©Ğ¾ UI Ğ¼Ğ°Ñ” Ñ€Ğ¾Ğ±Ğ¸Ñ‚Ğ¸ Ğ·Ğ°Ğ²Ğ¶Ğ´Ğ¸

| âœ… ĞĞ±Ğ¾Ğ²'ÑĞ·ĞºĞ¾Ğ²Ğ¾ | Ğ ĞµĞ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ |
|----------------|------------|
| ĞŸĞ¾ĞºĞ°Ğ·ÑƒĞ²Ğ°Ñ‚Ğ¸ preview Ğ·Ğ¼Ñ–Ğ½ | "Ğ’Ğ¸ Ğ±Ñ–Ğ»ÑŒÑˆĞµ Ğ½Ğµ Ğ¾Ñ‚Ñ€Ğ¸Ğ¼ÑƒĞ²Ğ°Ñ‚Ğ¸Ğ¼ĞµÑ‚Ğµ..." |
| ĞœĞ°Ñ‚Ğ¸ Reset to defaults | Ğ”Ğ»Ñ ĞºĞ¾Ğ¶Ğ½Ğ¾Ñ— ÑĞµĞºÑ†Ñ–Ñ— Ğ¾ĞºÑ€ĞµĞ¼Ğ¾ |
| Ğ“Ñ€ÑƒĞ¿ÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ»Ğ¾Ğ³Ñ–Ñ‡Ğ½Ğ¾ | Notifications, Inbox, Templates |

### 3.4 Save Behavior (PoC Contract)

> âš ï¸ **Ğ”Ğ»Ñ PoC Ğ·Ğ°Ñ„Ñ–ĞºÑĞ¾Ğ²Ğ°Ğ½Ğ¾:** Explicit Save + Unsaved indicator.

| Ğ¡Ñ‚Ğ°Ğ½ | UI Behavior |
|------|-------------|
| **No changes** | "Save changes" button disabled |
| **Unsaved changes** | Button enabled + "Unsaved changes" badge |
| **Saving** | Button shows spinner + "Saving..." |
| **Saved** | Toast "Settings saved" (2s) + button disabled |
| **Error** | Toast "Failed to save. Retry?" + button enabled |

**Ğ§Ğ¾Ğ¼Ñƒ Ğ½Ğµ auto-save Ğ´Ğ»Ñ PoC:**
- ĞŸÑ€Ğ¾ÑÑ‚Ñ–ÑˆĞ° Ñ–Ğ¼Ğ¿Ğ»ĞµĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ
- ĞœĞµĞ½ÑˆĞµ race conditions
- ĞšĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡ ÑĞ²Ğ½Ğ¾ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑÑ” Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚ Ğ·Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ğ½Ñ
- Auto-save Ğ¼Ğ¾Ğ¶Ğ½Ğ° Ğ´Ğ¾Ğ´Ğ°Ñ‚Ğ¸ Ğ² MVP

> **Note:** Auto-save â‰  real-time sync. Auto-save Ğ·Ğ±ĞµÑ€Ñ–Ğ³Ğ°Ñ” Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ Ñ– ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ñ–Ğ·ÑƒÑ” Ğ· debounce, Ñ‚Ğ¾Ğ´Ñ– ÑĞº real-time sync (anti-pattern) Ğ½Ğ°Ğ¼Ğ°Ğ³Ğ°Ñ”Ñ‚ÑŒÑÑ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ñ–Ğ·ÑƒĞ²Ğ°Ñ‚Ğ¸ ĞºĞ¾Ğ¶Ğ½Ñƒ Ğ·Ğ¼Ñ–Ğ½Ñƒ.

---

## 4. Information Architecture

### 4.1 ĞĞ°Ğ²Ñ–Ğ³Ğ°Ñ†Ñ–Ñ Ğ² Settings

```
Settings
â”œâ”€â”€ Profile (timezone only for PoC)  â† PoC minimal
â”œâ”€â”€ Notifications                    â† PoC priority
â”œâ”€â”€ Inbox & Views                    â† PoC priority
â”œâ”€â”€ Draft Templates                  â† PoC priority
â”œâ”€â”€ UI Preferences                   â† MVP
â””â”€â”€ Advanced (optional)              â† v2
```

### 4.2 PoC Minimal IA

Ğ”Ğ»Ñ PoC Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ½ÑŒĞ¾ Ğ¾Ğ´Ğ½Ñ–Ñ”Ñ— ÑÑ‚Ğ¾Ñ€Ñ–Ğ½ĞºĞ¸ Ğ· tabs:

```
Settings Page
â”œâ”€â”€ Tab: Notifications
â”œâ”€â”€ Tab: Inbox
â””â”€â”€ Tab: Templates
```

### 4.3 Drill-down Model

```
Settings â†’ Section â†’ Edit â†’ Preview â†’ Save
                              â†“
                         Auto-save or
                         Explicit Save button
```

---

## 5. Settings Sections (Detailed Spec)

### 5.1 Profile

**ĞœĞµÑ‚Ğ°:** Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ– Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ– Ğ´Ğ°Ğ½Ñ–.

| ĞŸĞ¾Ğ»Ğµ | Ğ¢Ğ¸Ğ¿ | Editable | PoC | MVP | Ğ”Ğ¶ĞµÑ€ĞµĞ»Ğ¾ |
|------|-----|----------|-----|-----|---------|
| Full name | Text | âŒ readonly | â€” | âœ… | Auth provider |
| Email | Text | âŒ readonly | â€” | âœ… | Auth provider |
| **Timezone** | Select | âœ… | âœ… | âœ… | User preference |
| Language | Select (UA/EN) | âœ… | â€” | âœ… | User preference |
| Role | Badge | âŒ readonly | â€” | âœ… | `user_roles` table |

> âš ï¸ **PoC:** Timezone Ğ¾Ğ±Ğ¾Ğ²'ÑĞ·ĞºĞ¾Ğ²Ğ¸Ğ¹ Ğ´Ğ»Ñ quiet hours. Ğ ĞµÑˆÑ‚Ğ° Profile Ğ¿Ğ¾Ğ»Ñ–Ğ² â€” MVP.

---

### 5.2 Notifications (PoC priority = HIGH)

#### 5.2.1 ĞšĞ°Ğ½Ğ°Ğ»Ğ¸

| ĞšĞ°Ğ½Ğ°Ğ» | Default | PoC | ĞĞ¿Ğ¸Ñ |
|-------|---------|-----|------|
| In-app | âœ… ON | âœ… | Bell icon + notification drawer |
| Email | âŒ OFF | âœ… | Email notifications |
| Messenger | âŒ OFF | â€” (MVP) | Slack/Telegram integration |

**Email Channel Settings (ÑĞºÑ‰Ğ¾ enabled):**

| ĞŸĞ¾Ğ»Ğµ | Type | Default | ĞĞ¿Ğ¸Ñ |
|------|------|---------|------|
| Email mode | Select | `instant` | Ğ ĞµĞ¶Ğ¸Ğ¼ Ğ²Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ |
| Digest time | Time picker | 09:00 | Ğ§Ğ°Ñ Ğ²Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ digest (ÑĞºÑ‰Ğ¾ mode = `digest_daily`) |

**Email Mode Options:**

| Mode | ĞĞ¿Ğ¸Ñ |
|------|------|
| `instant` | Ğ’Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑ‚Ğ¸ Ğ¾Ğ´Ñ€Ğ°Ğ·Ñƒ (Ğ· rate limiting: max 10/hour) |
| `digest_daily` | Ğ—Ğ²ĞµĞ´ĞµĞ½Ğ½Ñ Ñ€Ğ°Ğ· Ğ½Ğ° Ğ´ĞµĞ½ÑŒ Ğ¾ Ğ²ĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ğ¹ Ñ‡Ğ°Ñ |
| `digest_weekly` | Ğ—Ğ²ĞµĞ´ĞµĞ½Ğ½Ñ Ñ€Ğ°Ğ· Ğ½Ğ° Ñ‚Ğ¸Ğ¶Ğ´ĞµĞ½ÑŒ (MVP) |

> **PoC Simplification:** Ğ¯ĞºÑ‰Ğ¾ email ON, Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒĞ²Ğ°Ñ‚Ğ¸ `instant` mode Ğ±ĞµĞ· Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½ÑŒ. Digest â€” MVP.

#### 5.2.2 Ğ¢Ğ¸Ğ¿Ğ¸ Ğ¿Ğ¾Ğ´Ñ–Ğ¹ (Event Types)

Ğ“Ñ€ÑƒĞ¿ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ·Ğ° ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ–ÑÑ‚Ñ Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ½Ğ¾ Ğ´Ğ¾ [02_core_data_model.md](../core/02_core_data_model.md#4-event-taxonomy).

> âš ï¸ **ĞšĞ¾Ğ½Ñ‚Ñ€Ğ°ĞºÑ‚:** Ğ£Ğ½Ñ–Ñ„Ñ–ĞºĞ¾Ğ²Ğ°Ğ½Ñ– ĞºĞ»ÑÑ‡Ñ– Ğ¿Ğ¾Ğ´Ñ–Ğ¹. Ğ¦Ñ– ĞºĞ»ÑÑ‡Ñ– Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑÑ‚ÑŒÑÑ Ğ² UI, JSONB Ñ‚Ğ° n8n workflows.

**Canonical Event Keys:**

| Key (JSONB) | UI Label (UA) | UI Label (EN) | Category |
|-------------|---------------|---------------|----------|
| `approval_required` | ĞŸĞ¾Ñ‚Ñ€Ñ–Ğ±Ğ½Ğµ Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ½Ñ | Approval required | Critical |
| `sla_risk_24h` | SLA < 24 Ğ³Ğ¾Ğ´ | SLA < 24h (At risk) | Critical |
| `data_conflict` | Ğ Ğ¾Ğ·Ğ±Ñ–Ğ¶Ğ½Ñ–ÑÑ‚ÑŒ Ğ´Ğ°Ğ½Ğ¸Ñ… | Data conflict detected | Critical |
| `case_assigned` | ĞšĞµĞ¹Ñ Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¾ Ğ¼ĞµĞ½Ñ– | Case assigned to me | Operational |
| `state_changed` | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ ĞºĞµĞ¹ÑĞ° Ğ·Ğ¼Ñ–Ğ½Ğ¸Ğ²ÑÑ | Case status changed | Operational |
| `doc_uploaded` | Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ¾ | Document uploaded | Operational |
| `integration_failed` | ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ° Ñ–Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ— | Integration failed | Operational |
| `automation_completed` | ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¸Ğ¹ ĞºÑ€Ğ¾Ğº Ğ²Ğ¸ĞºĞ¾Ğ½Ğ°Ğ½Ğ¾ | Automated step completed | Informational |
| `ai_draft_generated` | AI-Ñ‡ĞµÑ€Ğ½ĞµÑ‚ĞºĞ° Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ° | AI draft generated | Informational |

**Critical (Ğ½Ğµ Ğ¼Ğ¾Ğ¶Ğ½Ğ° Ğ¿Ğ¾Ğ²Ğ½Ñ–ÑÑ‚Ñ Ğ²Ğ¸Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸):**

| Key | ĞĞ¿Ğ¸Ñ | Default | Locked |
|-----|------|---------|--------|
| `approval_required` | Approval requires action | âœ… ON | ğŸ”’ Yes |
| `sla_risk_24h` | Ğ”ĞµĞ´Ğ»Ğ°Ğ¹Ğ½ Ğ½Ğ°Ğ±Ğ»Ğ¸Ğ¶Ğ°Ñ”Ñ‚ÑŒÑÑ | âœ… ON | âŒ No |
| `data_conflict` | Ğ Ğ¾Ğ·Ğ±Ñ–Ğ¶Ğ½Ñ–ÑÑ‚ÑŒ client vs warehouse dims | âœ… ON | âŒ No |

> **ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ¾:** `approval_required` Ğ·Ğ°Ğ²Ğ¶Ğ´Ğ¸ locked ON. Ğ†Ğ½ÑˆÑ– critical Ğ¿Ğ¾Ğ´Ñ–Ñ— Ğ¼Ğ¾Ğ¶Ğ½Ğ° Ğ²Ğ¸Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸, Ğ°Ğ»Ğµ Ğ· Ğ¿Ğ¾Ğ¿ĞµÑ€ĞµĞ´Ğ¶ĞµĞ½Ğ½ÑĞ¼.

**Operational:**

| Key | ĞĞ¿Ğ¸Ñ | Default |
|-----|------|---------|
| `case_assigned` | ĞĞ¾Ğ²Ğ¸Ğ¹ ĞºĞµĞ¹Ñ Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¾ Ğ¼ĞµĞ½Ñ– | âœ… ON |
| `state_changed` | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ ĞºĞµĞ¹ÑĞ° Ğ·Ğ¼Ñ–Ğ½Ğ¸Ğ²ÑÑ | âŒ OFF |
| `doc_uploaded` | Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ¾ | âŒ OFF |
| `integration_failed` | ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ° Ñ–Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ— (1C) | âœ… ON |

**Informational:**

| Key | ĞĞ¿Ğ¸Ñ | Default |
|-----|------|---------|
| `automation_completed` | Workflow step done | âŒ OFF |
| `ai_draft_generated` | Ğ§ĞµÑ€Ğ½ĞµÑ‚ĞºĞ° Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ° | âŒ OFF |

#### 5.2.3 Quiet Hours

| ĞŸĞ¾Ğ»Ğµ | Ğ¢Ğ¸Ğ¿ | Default | PoC | ĞĞ¿Ğ¸Ñ |
|------|-----|---------|-----|------|
| Enabled | Toggle | âŒ OFF | âœ… | Ğ£Ğ²Ñ–Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸ Ñ‚Ğ¸Ñ…Ñ– Ğ³Ğ¾Ğ´Ğ¸Ğ½Ğ¸ |
| Start time | Time picker | 22:00 | âœ… | ĞŸĞ¾Ñ‡Ğ°Ñ‚Ğ¾Ğº |
| End time | Time picker | 08:00 | âœ… | ĞšÑ–Ğ½ĞµÑ†ÑŒ |
| Days of week | Checkbox group | All days | â€” (MVP) | Ğ”Ğ½Ñ– Ñ‚Ğ¸Ğ¶Ğ½Ñ |

> âš ï¸ **Timezone Model:** Quiet hours Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑÑ‚ÑŒ `user_preferences.timezone` (Profile level). ĞĞµ Ğ´ÑƒĞ±Ğ»ÑÑ”Ğ¼Ğ¾ timezone Ğ² `quiet_hours` JSONB.

**Edge Cases Ñ‚Ğ° Boundary Rules:**

| Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ñ–Ğ¹ | ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ¾ | ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´ |
|----------|---------|---------|
| **Ğ†Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ» Ñ‡ĞµÑ€ĞµĞ· Ğ¿Ñ–Ğ²Ğ½Ñ–Ñ‡** | `start > end` Ğ¾Ğ·Ğ½Ğ°Ñ‡Ğ°Ñ” "Ğ½Ñ–Ñ‡" | 22:00â€“08:00 = Ğ· 22:00 Ğ´Ğ¾ 08:00 Ğ½Ğ°ÑÑ‚ÑƒĞ¿Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ½Ñ |
| **Ğ’ĞºĞ»ÑÑ‡Ğ½Ñ–ÑÑ‚ÑŒ Ğ¼ĞµĞ¶** | `start <= current_time < end` | 22:00 â€” quiet; 08:00 â€” not quiet |
| **Timezone DST** | Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒĞ²Ğ°Ñ‚Ğ¸ IANA timezone Ğ· DST | `Europe/Kyiv` Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ Ğ²Ñ€Ğ°Ñ…Ğ¾Ğ²ÑƒÑ” DST |
| **ĞĞµĞ²Ğ°Ğ»Ñ–Ğ´Ğ½Ğ¸Ğ¹ Ñ‡Ğ°Ñ** | UI Ğ½Ğµ Ğ´Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑÑ” `start == end` | Validation error |

```typescript
// Quiet hours check logic
function isInQuietHours(now: Date, quietHours: QuietHours, timezone: string): boolean {
  const localTime = toTimezone(now, timezone);
  const currentMinutes = localTime.hours * 60 + localTime.minutes;
  const startMinutes = parseTime(quietHours.start); // e.g., 22:00 â†’ 1320
  const endMinutes = parseTime(quietHours.end);     // e.g., 08:00 â†’ 480
  
  if (startMinutes > endMinutes) {
    // Overnight interval (22:00 - 08:00)
    return currentMinutes >= startMinutes || currentMinutes < endMinutes;
  } else {
    // Same-day interval (09:00 - 18:00)
    return currentMinutes >= startMinutes && currentMinutes < endMinutes;
  }
}
```

#### 5.2.4 Critical Override

| ĞŸĞ¾Ğ»Ğµ | Default | Locked | ĞĞ¿Ğ¸Ñ |
|------|---------|--------|------|
| Always notify about critical events | âœ… ON | ğŸ”’ Yes (PoC) | Ğ†Ğ³Ğ½Ğ¾Ñ€ÑƒĞ²Ğ°Ñ‚Ğ¸ quiet hours Ğ´Ğ»Ñ critical |

> âš ï¸ **PoC Contract:** `critical_override` Ğ·Ğ°Ğ²Ğ¶Ğ´Ğ¸ locked ON. ĞĞµ Ğ¼Ğ¾Ğ¶Ğ½Ğ° Ğ²Ğ¸Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸.

**Rationale:** Ğ¯ĞºÑ‰Ğ¾ Ğ²Ğ¸Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸ critical override, Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ Ğ¼Ğ¾Ğ¶Ğµ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğ¸ approval request Ğ¿Ñ–Ğ´ Ñ‡Ğ°Ñ quiet hours. Ğ¦Ğµ Ğ¿Ğ¾Ñ€ÑƒÑˆÑƒÑ” [Human-in-the-Loop](../core/00_shared_mental_model.md) Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿.

**MVP Ğ¼Ğ¾Ğ¶Ğ»Ğ¸Ğ²Ñ–ÑÑ‚ÑŒ:** Ğ”Ğ¾Ğ·Ğ²Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ OFF, Ğ°Ğ»Ğµ Ñ‚Ğ¾Ğ´Ñ– in-app badge/indicator Ğ²ÑĞµ Ğ¾Ğ´Ğ½Ğ¾ Ğ¿Ğ¾ĞºĞ°Ğ·ÑƒÑ”Ñ‚ÑŒÑÑ (Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ±ĞµĞ· push/Ğ·Ğ²ÑƒĞºÑƒ).

---

### 5.3 Inbox & Views (PoC priority = HIGH)

#### 5.3.1 Default Filters

| Ğ¤Ñ–Ğ»ÑŒÑ‚Ñ€ | Type | Default | ĞĞ¿Ğ¸Ñ |
|--------|------|---------|------|
| My cases only | Toggle | âœ… ON | ĞŸĞ¾ĞºĞ°Ğ·ÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ»Ğ¸ÑˆĞµ Ğ¼Ğ¾Ñ— ĞºĞµĞ¹ÑĞ¸ |
| Show "At risk" first | Toggle | âœ… ON | ĞŸÑ€Ñ–Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ Ñ€Ğ¸Ğ·Ğ¸ĞºĞ¾Ğ²Ğ¸Ñ… ĞºĞµĞ¹ÑÑ–Ğ² |
| Show "Pending approvals" first | Toggle | âœ… ON | ĞŸÑ€Ñ–Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ pending approvals |

**Prioritization Order (ĞºĞ¾Ğ»Ğ¸ Ğ¾Ğ±Ğ¸Ğ´Ğ²Ğ° "first" = ON):**

> âš ï¸ **ĞšĞ¾Ğ½Ñ‚Ñ€Ğ°ĞºÑ‚:** Ğ¯ĞºÑ‰Ğ¾ Ğ¾Ğ±Ğ¸Ğ´Ğ²Ğ° toggles ON, Ğ·Ğ°ÑÑ‚Ğ¾ÑĞ¾Ğ²ÑƒÑ”Ñ‚ÑŒÑÑ Ñ‚Ğ°ĞºĞ¸Ğ¹ Ğ¿Ğ¾Ñ€ÑĞ´Ğ¾Ğº Ğ³Ñ€ÑƒĞ¿:

```
1. Pending approvals (Ğ½Ğ°Ğ¹Ğ²Ğ¸Ñ‰Ğ¸Ğ¹ Ğ¿Ñ€Ñ–Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚)
2. At risk (SLA < 24h, BLOCKED, etc.)
3. Ğ ĞµÑˆÑ‚Ğ° ĞºĞµĞ¹ÑÑ–Ğ²
```

**Ğ’ÑĞµÑ€ĞµĞ´Ğ¸Ğ½Ñ– ĞºĞ¾Ğ¶Ğ½Ğ¾Ñ— Ğ³Ñ€ÑƒĞ¿Ğ¸:** Ğ·Ğ°ÑÑ‚Ğ¾ÑĞ¾Ğ²ÑƒÑ”Ñ‚ÑŒÑÑ `default_sort` (e.g., `sla_asc`).

```sql
-- Sorting logic
ORDER BY 
  CASE 
    WHEN has_pending_approval THEN 1
    WHEN is_at_risk THEN 2
    ELSE 3
  END,
  sla_deadline ASC  -- or other default_sort
```

#### 5.3.2 Default Sorting

| ĞĞ¿Ñ†Ñ–Ñ | ĞĞ¿Ğ¸Ñ |
|-------|------|
| `sla_asc` | By SLA deadline (recommended default) |
| `risk_desc` | By Risk score |
| `updated_desc` | By Last updated |
| `created_desc` | By Created date |

#### 5.3.3 Visible Columns

Checkbox list Ğ´Ğ»Ñ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ñ–Ğ·Ğ°Ñ†Ñ–Ñ— inbox columns:

| Column | Key | Default | Locked | ĞĞ¿Ğ¸Ñ |
|--------|-----|---------|--------|------|
| Case ID | `case_id` | âœ… | ğŸ”’ Yes | Always visible, disabled checkbox |
| Status | `status` | âœ… | âŒ No | State badge |
| Next Best Action | `nba` | âœ… | âŒ No | NBA indicator |
| SLA | `sla` | âœ… | âŒ No | Deadline countdown |
| Owner | `owner` | âŒ | âŒ No | If "My cases only" = ON |
| Client | `client` | âœ… | âŒ No | Client name |
| Risk flags | `risk` | âœ… | âŒ No | Risk indicators |
| Case type | `case_type` | âŒ | âŒ No | Badge F1_SEA_IMPORT |

**Locked Columns UI:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [âœ“] Case ID        ğŸ”’ Required  â”‚  â† disabled, tooltip: "Required column"
â”‚ [âœ“] Status                      â”‚
â”‚ [âœ“] Next Best Action            â”‚
â”‚ ...                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **Minimum columns:** Ğ¯ĞºÑ‰Ğ¾ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡ Ğ²Ğ¸Ğ¼ĞºĞ½Ğµ Ğ·Ğ°Ğ½Ğ°Ğ´Ñ‚Ğ¾ Ğ±Ğ°Ğ³Ğ°Ñ‚Ğ¾, Ğ·Ğ°Ğ»Ğ¸ÑˆĞ°Ñ”Ñ‚ÑŒÑÑ Ğ¼Ñ–Ğ½Ñ–Ğ¼ÑƒĞ¼: `case_id` + `status` + `sla`.

#### 5.3.4 Saved Views (MVP)

ĞšĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡ Ğ¼Ğ¾Ğ¶Ğµ Ğ·Ğ±ĞµÑ€Ñ–Ğ³Ğ°Ñ‚Ğ¸ ĞºĞ¾Ğ¼Ğ±Ñ–Ğ½Ğ°Ñ†Ñ–Ñ— Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€Ñ–Ğ² ÑĞº "views":

| View Name | Filters | Sort |
|-----------|---------|------|
| "My work today" | My cases + At risk | sla_asc |
| "Approvals queue" | Pending approvals | created_desc |
| "At risk" | Risk score > 0 | risk_desc |
| "Waiting for client" | Status = BLOCKED | updated_desc |

---

### 5.4 Draft Templates (PoC priority = MEDIUM-HIGH)

**ĞœĞµÑ‚Ğ°:** Ğ¿Ñ€Ğ¸ÑˆĞ²Ğ¸Ğ´ÑˆĞ¸Ñ‚Ğ¸ Ñ€ÑƒÑ‚Ğ¸Ğ½Ñƒ Ñ– ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ¸Ğ·ÑƒĞ²Ğ°Ñ‚Ğ¸ ĞºĞ¾Ğ¼ÑƒĞ½Ñ–ĞºĞ°Ñ†Ñ–Ñ—.

#### 5.4.1 Template Types

| Type | Use Case |
|------|----------|
| Message to client | Email/message template |
| Quote comment | "Ğ¦Ñ–Ğ½Ğ° Ğ´Ñ–Ñ” 7â€“9 Ğ´Ğ½Ñ–Ğ²" |
| Request for missing data | Checklist request |
| Follow-up reminder | Reminder template |

#### 5.4.2 Template Structure

```typescript
interface DraftTemplate {
  id: string;
  name: string;                    // "Quote validity reminder"
  type: 'MESSAGE' | 'COMMENT' | 'REQUEST' | 'REMINDER';
  content: string;                 // Template body with placeholders
  placeholders: string[];          // ['case_id', 'client_name', 'sla_date']
  created_at: string;
  updated_at: string;
}
```

#### 5.4.3 Available Placeholders

Placeholders Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ Ğ·Ğ°Ğ¿Ğ¾Ğ²Ğ½ÑÑÑ‚ÑŒÑÑ Ğ· `cases.payload` Ñ‚Ğ° `cases.computed`:

| Placeholder | Source | ĞĞ¿Ğ¸Ñ |
|-------------|--------|------|
| `{{case_id}}` | `cases.case_number` | Human-readable case ID |
| `{{case_type}}` | `cases.case_type` | Case type badge |
| `{{client_name}}` | `payload.client.name` | Client name |
| `{{client_contact}}` | `payload.client.contact_name` | Contact person |
| `{{route_origin}}` | `payload.route.origin_warehouse` | Origin |
| `{{route_destination}}` | `payload.route.destination_city` | Destination |
| `{{cargo_cbm}}` | `payload.cargo.total_cbm` | Cargo volume |
| `{{sla_date}}` | `cases.sla_deadline` | SLA deadline |
| `{{quote_total}}` | `computed.quote.total_usd` | Quote amount |
| `{{quote_validity}}` | `computed.quote.validity_days` | Quote validity |

#### 5.4.4 UX Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚

- Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ–Ğ² (list view)
- ĞšĞ½Ğ¾Ğ¿ĞºĞ° "Add template"
- Inline editor Ğ· placeholder hints
- Preview Ğ· Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¸Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ¸Ğ¼Ğ¸ (optional)

> âš ï¸ **Audit trail:** Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñƒ Ğ·Ğ°Ğ¿Ğ¸ÑÑƒÑ”Ñ‚ÑŒÑÑ ÑĞº `case_event` Ğ· `event_type: 'TEMPLATE_USED'`.

#### 5.4.5 Placeholder Validation

**Whitelist Ğ¿Ğ»ĞµĞ¹ÑÑ…Ğ¾Ğ»Ğ´ĞµÑ€Ñ–Ğ²:**

```typescript
const ALLOWED_PLACEHOLDERS = [
  'case_id', 'case_type', 'client_name', 'client_contact',
  'route_origin', 'route_destination', 'cargo_cbm',
  'sla_date', 'quote_total', 'quote_validity'
] as const;
```

**Validation Rules:**

| Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ñ–Ğ¹ | ĞŸĞ¾Ğ²ĞµĞ´Ñ–Ğ½ĞºĞ° | UX |
|----------|-----------|-----|
| Unknown placeholder | âš ï¸ Warning Ğ¿Ñ€Ğ¸ Ğ·Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ğ½Ñ– | "Unknown: {{foo}}. Available: ..." |
| Valid placeholder, no data | Render as empty string | `{{client_contact}}` â†’ "" |
| Missing data highlight | ĞŸÑ–Ğ´ÑĞ²Ñ–Ñ‡ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ¿Ñ€Ğ¸ preview | Yellow background on empty placeholders |

**ĞŸÑ€Ğ¸ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ– ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñƒ (Ğ² Case Cockpit):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ Template Preview                                     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ "Dear {{client_contact}}, quote for {{case_id}}..."    â”‚
â”‚                                                         â”‚
â”‚ âš ï¸ Missing data:                                        â”‚
â”‚ â€¢ client_contact â€” not set                              â”‚
â”‚                                                         â”‚
â”‚ [Insert anyway]  [Edit first]  [Cancel]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ¾:** Ğ”Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑÑ”Ğ¼Ğ¾ insert Ğ½Ğ°Ğ²Ñ–Ñ‚ÑŒ Ğ· missing data (Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ Ğ¼Ğ¾Ğ¶Ğµ Ğ·Ğ°Ğ¿Ğ¾Ğ²Ğ½Ğ¸Ñ‚Ğ¸ Ğ²Ñ€ÑƒÑ‡Ğ½Ñƒ), Ğ°Ğ»Ğµ Ğ¿Ğ¾ĞºĞ°Ğ·ÑƒÑ”Ğ¼Ğ¾ warning.

---

### 5.5 UI Preferences (MVP / optional)

#### 5.5.1 UI Density

| ĞĞ¿Ñ†Ñ–Ñ | ĞĞ¿Ğ¸Ñ | CSS Variable |
|-------|------|--------------|
| Compact | ĞœĞµĞ½ÑˆĞµ padding, 13px font | `--density: compact` |
| Comfortable | Ğ‘Ñ–Ğ»ÑŒÑˆĞµ padding, 14px font | `--density: comfortable` |

#### 5.5.2 Default Panel State

| Panel | Options | Default |
|-------|---------|---------|
| Sidebar | Expanded / Collapsed | Expanded |
| Timeline | Expanded / Collapsed | Collapsed |
| Context Sidebar | Visible / Hidden | Visible |

#### 5.5.3 Theme (optional)

| ĞĞ¿Ñ†Ñ–Ñ | ĞĞ¿Ğ¸Ñ |
|-------|------|
| Light | Default (Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ½Ğ¾ Ğ´Ğ¾ [ui_style_reference.md](./ui_style_reference.md)) |
| Dark | Ğ†Ğ½Ğ²ĞµÑ€Ñ‚Ğ¾Ğ²Ğ°Ğ½Ğ° Ğ¿Ğ°Ğ»Ñ–Ñ‚Ñ€Ğ° (ÑĞºÑ‰Ğ¾ Ğ¿Ñ–Ğ´Ñ‚Ñ€Ğ¸Ğ¼ÑƒÑ”Ñ‚ÑŒÑÑ) |
| System | Ğ’Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ½Ğ¾ Ğ´Ğ¾ OS preference |

---

### 5.6 Advanced (optional)

| Setting | Default | ĞĞ¿Ğ¸Ñ |
|---------|---------|------|
| Keyboard shortcuts | âŒ OFF | Enable vim-like shortcuts |
| Experimental features | âŒ OFF | Feature flags for beta |
| Developer mode | âŒ OFF | Show debug info (internal) |

> âš ï¸ **ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ¾:** Advanced settings Ğ½Ğµ Ğ¼Ñ–ÑÑ‚ÑÑ‚ÑŒ Ğ±Ñ–Ğ·Ğ½ĞµÑ-Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ».

---

## 6. Wireframe â€” Personal Settings Page (PoC)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ IMCP â–¸ ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ                                          [User Avatar]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ĞœĞ•ĞĞ®                  â”‚ Ğ¡ĞŸĞĞ’Ğ†Ğ©Ğ•ĞĞĞ¯                    â— ĞĞµĞ·Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ñ– Ğ·Ğ¼Ñ–Ğ½Ğ¸â”‚ â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚ â”‚                       â”‚                                                  â”‚ â”‚
â”‚ â”‚ â€¢ ĞŸÑ€Ğ¾Ñ„Ñ–Ğ»ÑŒ             â”‚ Ğ§Ğ°ÑĞ¾Ğ²Ğ¸Ğ¹ Ğ¿Ğ¾ÑÑ (Ğ´Ğ»Ñ Ñ‚Ğ¸Ñ…Ğ¸Ñ… Ğ³Ğ¾Ğ´Ğ¸Ğ½)                   â”‚ â”‚
â”‚ â”‚ â€¢ Ğ¡Ğ¿Ğ¾Ğ²Ñ–Ñ‰ĞµĞ½Ğ½Ñ     â—€    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚ â”‚ â€¢ Ğ’Ñ…Ñ–Ğ´Ğ½Ñ–              â”‚ â”‚ [Europe/Kyiv â–¾]                            â”‚   â”‚ â”‚
â”‚ â”‚ â€¢ Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ğ¸             â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚ â”‚                       â”‚                                                  â”‚ â”‚
â”‚ â”‚                       â”‚ ĞšĞ°Ğ½Ğ°Ğ»Ğ¸                                           â”‚ â”‚
â”‚ â”‚                       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚ [âœ“] In-app ÑĞ¿Ğ¾Ğ²Ñ–Ñ‰ĞµĞ½Ğ½Ñ                     â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚ [ ] Email ÑĞ¿Ğ¾Ğ²Ñ–Ñ‰ĞµĞ½Ğ½Ñ                      â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚ [ ] Messenger (Slack/Telegram)  (MVP)     â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚ â”‚                       â”‚                                                  â”‚ â”‚
â”‚ â”‚                       â”‚ Ğ¡Ğ¿Ğ¾Ğ²Ñ–Ñ‰Ğ°Ñ‚Ğ¸ Ğ¼ĞµĞ½Ğµ Ğ¿Ñ€Ğ¾                               â”‚ â”‚
â”‚ â”‚                       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚ ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ–                                  â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚ [âœ“] ĞŸĞ¾Ñ‚Ñ€Ñ–Ğ±Ğ½Ğµ Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ½Ñ       ğŸ”’       â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚ [âœ“] SLA Ğ¿Ñ–Ğ´ Ğ·Ğ°Ğ³Ñ€Ğ¾Ğ·Ğ¾Ñ (< 24 Ğ³Ğ¾Ğ´)           â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚ [âœ“] Ğ Ğ¾Ğ·Ğ±Ñ–Ğ¶Ğ½Ñ–ÑÑ‚ÑŒ Ğ´Ğ°Ğ½Ğ¸Ñ…                     â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚                                           â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚ ĞĞ¿ĞµÑ€Ğ°Ñ†Ñ–Ğ¹Ğ½Ñ–                                â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚ [âœ“] ĞšĞµĞ¹Ñ Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¾ Ğ¼ĞµĞ½Ñ–                  â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚ [ ] Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ ĞºĞµĞ¹ÑĞ° Ğ·Ğ¼Ñ–Ğ½Ğ¸Ğ²ÑÑ                 â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚ [ ] Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ·Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ¾                  â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚ [âœ“] ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ° Ñ–Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ—                    â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚                                           â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚ Ğ†Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ñ–Ğ¹Ğ½Ñ–                              â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚ [ ] ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¸Ğ¹ ĞºÑ€Ğ¾Ğº Ğ²Ğ¸ĞºĞ¾Ğ½Ğ°Ğ½Ğ¾            â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚ [ ] AI-Ñ‡ĞµÑ€Ğ½ĞµÑ‚ĞºĞ° Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ°                    â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚ â”‚                       â”‚                                                  â”‚ â”‚
â”‚ â”‚                       â”‚ Ğ¢Ğ¸Ñ…Ñ– Ğ³Ğ¾Ğ´Ğ¸Ğ½Ğ¸                                      â”‚ â”‚
â”‚ â”‚                       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚ [âœ“] Ğ£Ğ²Ñ–Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸ Ñ‚Ğ¸Ñ…Ñ– Ğ³Ğ¾Ğ´Ğ¸Ğ½Ğ¸                 â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚     Ğ—: [22:00]  Ğ”Ğ¾: [08:00]               â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚                                           â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚ [âœ“] Ğ—Ğ°Ğ²Ğ¶Ğ´Ğ¸ ÑĞ¿Ğ¾Ğ²Ñ–Ñ‰Ğ°Ñ‚Ğ¸ Ğ¿Ñ€Ğ¾ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ–    ğŸ”’   â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚     (Ñ–Ğ³Ğ½Ğ¾Ñ€ÑƒÑ” Ñ‚Ğ¸Ñ…Ñ– Ğ³Ğ¾Ğ´Ğ¸Ğ½Ğ¸)                 â”‚   â”‚ â”‚
â”‚ â”‚                       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚ â”‚                       â”‚                                                  â”‚ â”‚
â”‚ â”‚                       â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚ â”‚                       â”‚ â”‚ Ğ—Ğ±ĞµÑ€ĞµĞ³Ñ‚Ğ¸ Ğ·Ğ¼Ñ–Ğ½Ğ¸   â”‚  â”‚ Ğ¡ĞºĞ¸Ğ½ÑƒÑ‚Ğ¸ Ğ´Ğ¾ ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ğ¸Ñ…â”‚  â”‚ â”‚
â”‚ â”‚                       â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚ â”‚                       â”‚                                                  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **Note:** Wireframe Ğ¿Ğ¾ĞºĞ°Ğ·ÑƒÑ” UA labels. Timezone Ñ‚ĞµĞ¿ĞµÑ€ Ñƒ ÑĞµĞºÑ†Ñ–Ñ— Notifications (Ğ´Ğ»Ñ PoC), Ğ±Ğ¾ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒÑ”Ñ‚ÑŒÑÑ quiet hours.

---

## 7. Wireframe â€” Inbox & Views Section

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ IMCP â–¸ Settings â–¸ Inbox & Views                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚ Default Filters                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ [âœ“] Show only my cases                                                â”‚   â”‚
â”‚ â”‚ [âœ“] Show "At risk" cases first                                        â”‚   â”‚
â”‚ â”‚ [âœ“] Show "Pending approvals" first                                    â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚ Default Sorting                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Sort by: [SLA deadline (nearest first) â–¾]                             â”‚   â”‚
â”‚ â”‚                                                                        â”‚   â”‚
â”‚ â”‚ Options:                                                               â”‚   â”‚
â”‚ â”‚ â€¢ SLA deadline (nearest first)  â† recommended                          â”‚   â”‚
â”‚ â”‚ â€¢ Risk score (highest first)                                           â”‚   â”‚
â”‚ â”‚ â€¢ Last updated (recent first)                                          â”‚   â”‚
â”‚ â”‚ â€¢ Created date (newest first)                                          â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚ Visible Columns                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ [âœ“] Case ID                 [âœ“] Status                                â”‚   â”‚
â”‚ â”‚ [âœ“] Next Best Action        [âœ“] SLA                                   â”‚   â”‚
â”‚ â”‚ [ ] Owner                   [âœ“] Client                                â”‚   â”‚
â”‚ â”‚ [âœ“] Risk flags              [ ] Case type                             â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚ Saved Views (MVP)                                                            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚ â”‚ â”‚ ğŸ“‹ My work today                                    [Edit] [Ã—]  â”‚   â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚ â”‚ â”‚ âœ… Approvals queue                                  [Edit] [Ã—]  â”‚   â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚ â”‚ â”‚ âš ï¸ At risk                                          [Edit] [Ã—]  â”‚   â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚ â”‚                                                                        â”‚   â”‚
â”‚ â”‚ [+ Add new view]                                                       â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Wireframe â€” Draft Templates Section

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ IMCP â–¸ Settings â–¸ Draft Templates                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚ Your Templates                                              [+ Add template] â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚                                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ğŸ“ Quote validity reminder                           MESSAGE           â”‚   â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚ â”‚ "Dear {{client_contact}}, this is a reminder that quote for           â”‚   â”‚
â”‚ â”‚ {{case_id}} is valid for {{quote_validity}} days..."                   â”‚   â”‚
â”‚ â”‚                                                                        â”‚   â”‚
â”‚ â”‚ Placeholders: client_contact, case_id, quote_validity                  â”‚   â”‚
â”‚ â”‚                                                  [Edit]  [Duplicate]  [Ã—]â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ğŸ’¬ Standard quote comment                            COMMENT           â”‚   â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚ â”‚ "Ğ¦Ñ–Ğ½Ğ° Ğ´Ñ–Ñ” 7â€“9 Ğ´Ğ½Ñ–Ğ². ĞœĞ¾Ğ¶Ğ»Ğ¸Ğ²Ñ– ĞºĞ¾Ñ€Ğ¸Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ¿Ñ€Ğ¸ Ğ·Ğ¼Ñ–Ğ½Ñ– Ğ³Ğ°Ğ±Ğ°Ñ€Ğ¸Ñ‚Ñ–Ğ²."         â”‚   â”‚
â”‚ â”‚                                                                        â”‚   â”‚
â”‚ â”‚ Placeholders: none                                                     â”‚   â”‚
â”‚ â”‚                                                  [Edit]  [Duplicate]  [Ã—]â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ğŸ“‹ Missing data request                              REQUEST           â”‚   â”‚
â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚ â”‚ "Ğ”Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ²Ğ¶ĞµĞ½Ğ½Ñ Ğ¾Ğ±Ñ€Ğ¾Ğ±ĞºĞ¸ {{case_id}} Ğ¿Ğ¾Ñ‚Ñ€Ñ–Ğ±Ğ½Ñ– Ñ‚Ğ°ĞºÑ– Ğ´Ğ°Ğ½Ñ–:              â”‚   â”‚
â”‚ â”‚ - Ğ¢Ğ¾Ñ‡Ğ½Ñ– Ğ³Ğ°Ğ±Ğ°Ñ€Ğ¸Ñ‚Ğ¸ Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶Ñƒ                                               â”‚   â”‚
â”‚ â”‚ - Ğ”Ğ°Ñ‚Ğ° Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ½Ğ¾ÑÑ‚Ñ–..."                                                  â”‚   â”‚
â”‚ â”‚                                                                        â”‚   â”‚
â”‚ â”‚ Placeholders: case_id, client_name                                     â”‚   â”‚
â”‚ â”‚                                                  [Edit]  [Duplicate]  [Ã—]â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚ ğŸ’¡ Tip: Use {{placeholder}} syntax. Available: case_id, client_name,         â”‚
â”‚    route_origin, route_destination, sla_date, quote_total, quote_validity    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. Data Model (Supabase)

### 9.1 `user_preferences` Table

```sql
CREATE TABLE user_preferences (
  user_id           UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,
  
  -- Profile preferences
  timezone          TEXT DEFAULT 'Europe/Kyiv',
  language          TEXT DEFAULT 'UA' CHECK (language IN ('UA', 'EN')),
  
  -- Notifications (JSONB)
  -- Note: timezone is at user_preferences.timezone level, not inside quiet_hours
  notifications     JSONB NOT NULL DEFAULT '{
    "channels": {
      "in_app": true, 
      "email": false, 
      "email_mode": "instant",
      "messenger": false
    },
    "events": {
      "approval_required": true,
      "sla_risk_24h": true,
      "data_conflict": true,
      "case_assigned": true,
      "state_changed": false,
      "doc_uploaded": false,
      "integration_failed": true,
      "automation_completed": false,
      "ai_draft_generated": false
    },
    "quiet_hours": {
      "enabled": false,
      "start": "22:00",
      "end": "08:00",
      "critical_override": true
    }
  }'::jsonb,
  
  -- Inbox preferences (JSONB)
  inbox_preferences JSONB NOT NULL DEFAULT '{
    "default_filter": {
      "my_cases_only": true,
      "show_at_risk_first": true,
      "show_pending_approvals_first": true
    },
    "default_sort": "sla_asc",
    "visible_columns": ["case_id", "status", "nba", "sla", "client", "risk"]
  }'::jsonb,
  
  -- UI preferences (JSONB)
  ui_preferences    JSONB NOT NULL DEFAULT '{
    "density": "comfortable",
    "sidebar_expanded": true,
    "timeline_expanded": false,
    "theme": "light"
  }'::jsonb,
  
  -- Timestamps
  created_at        TIMESTAMPTZ NOT NULL DEFAULT now(),
  updated_at        TIMESTAMPTZ NOT NULL DEFAULT now()
);

-- RLS
ALTER TABLE user_preferences ENABLE ROW LEVEL SECURITY;

-- Policy: users can only read/write their own preferences
CREATE POLICY "users_own_preferences" ON user_preferences
  FOR ALL
  USING (user_id = auth.uid())
  WITH CHECK (user_id = auth.uid());

-- Trigger for updated_at
CREATE TRIGGER set_updated_at
  BEFORE UPDATE ON user_preferences
  FOR EACH ROW
  EXECUTE FUNCTION update_updated_at_column();
```

### 9.2 `user_draft_templates` Table

```sql
CREATE TABLE user_draft_templates (
  id              UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id         UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  
  -- Template info
  name            TEXT NOT NULL,
  type            TEXT NOT NULL CHECK (type IN ('MESSAGE', 'COMMENT', 'REQUEST', 'REMINDER')),
  content         TEXT NOT NULL,
  placeholders    JSONB DEFAULT '[]'::jsonb,
  
  -- Metadata
  is_default      BOOLEAN DEFAULT false,
  sort_order      INT DEFAULT 0,
  
  -- Timestamps
  created_at      TIMESTAMPTZ NOT NULL DEFAULT now(),
  updated_at      TIMESTAMPTZ NOT NULL DEFAULT now(),
  
  -- Unique name per user
  UNIQUE(user_id, name)
);

-- Indexes
CREATE INDEX idx_templates_user ON user_draft_templates(user_id, type);

-- RLS
ALTER TABLE user_draft_templates ENABLE ROW LEVEL SECURITY;

CREATE POLICY "users_own_templates" ON user_draft_templates
  FOR ALL
  USING (user_id = auth.uid())
  WITH CHECK (user_id = auth.uid());
```

### 9.3 `user_saved_views` Table (MVP)

```sql
CREATE TABLE user_saved_views (
  id              UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id         UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
  
  -- View definition
  name            TEXT NOT NULL,
  icon_name       TEXT,                      -- Icon name from allowed list (see below)
  filters         JSONB NOT NULL,            -- Filter configuration
  sort            TEXT NOT NULL,             -- Sort key (e.g., 'sla_asc')
  columns         JSONB,                     -- Column visibility array
  
  -- Metadata
  is_default      BOOLEAN DEFAULT false,
  sort_order      INT DEFAULT 0,
  
  -- Timestamps
  created_at      TIMESTAMPTZ NOT NULL DEFAULT now(),
  updated_at      TIMESTAMPTZ NOT NULL DEFAULT now(),
  
  -- Unique name per user
  UNIQUE(user_id, name)
);

-- RLS
ALTER TABLE user_saved_views ENABLE ROW LEVEL SECURITY;

CREATE POLICY "users_own_views" ON user_saved_views
  FOR ALL
  USING (user_id = auth.uid())
  WITH CHECK (user_id = auth.uid());
```

**Icon Names (allowed list):**

```typescript
const ALLOWED_VIEW_ICONS = [
  'clipboard',   // ğŸ“‹ My work
  'check',       // âœ… Approvals
  'warning',     // âš ï¸ At risk
  'clock',       // â° Waiting
  'inbox',       // ğŸ“¥ All cases
  'star',        // â­ Priority
  'archive',     // ğŸ“¦ Done
  'filter'       // ğŸ” Custom
] as const;
```

> **Ğ§Ğ¾Ğ¼Ñƒ Ğ½Ğµ emoji:** Emoji Ğ¼Ğ°ÑÑ‚ÑŒ Ñ€Ñ–Ğ·Ğ½Ğ¸Ğ¹ Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³ Ğ½Ğ° Ñ€Ñ–Ğ·Ğ½Ğ¸Ñ… OS/Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ°Ñ…. Icon names Ğ¼Ğ°Ğ¿Ğ»ÑÑÑ‚ÑŒÑÑ Ğ½Ğ° SVG Ñ–ĞºĞ¾Ğ½ĞºĞ¸ Ğ² UI.

### 9.4 JSONB Schema Contracts

> âš ï¸ **ĞšĞ¾Ğ½Ñ‚Ñ€Ğ°ĞºÑ‚:** ĞšĞ°Ğ½Ğ¾Ğ½Ñ–Ñ‡Ğ½Ñ– ÑÑ…ĞµĞ¼Ğ¸ JSONB. Ğ’ĞµÑ€ÑÑ–Ñ ÑÑ…ĞµĞ¼Ğ¸: 1.

#### 9.4.1 Notifications JSONB Schema

```typescript
interface NotificationsSchema {
  // Version for future migrations
  _version?: 1;
  
  channels: {
    in_app: boolean;           // Required, default: true
    email: boolean;            // Required, default: false
    email_mode?: 'instant' | 'digest_daily' | 'digest_weekly';  // Optional, default: 'instant'
    email_digest_time?: string; // HH:MM, only if email_mode = 'digest_*'
    messenger: boolean;        // Required, default: false
  };
  
  events: {
    // Critical (approval_required cannot be false)
    approval_required: true;   // Locked, always true
    sla_risk_24h: boolean;     // Default: true
    data_conflict: boolean;    // Default: true
    
    // Operational
    case_assigned: boolean;    // Default: true
    state_changed: boolean;    // Default: false
    doc_uploaded: boolean;     // Default: false
    integration_failed: boolean; // Default: true
    
    // Informational
    automation_completed: boolean; // Default: false
    ai_draft_generated: boolean;   // Default: false
  };
  
  quiet_hours: {
    enabled: boolean;          // Default: false
    start: string;             // HH:MM, default: "22:00"
    end: string;               // HH:MM, default: "08:00"
    // Note: timezone is at user_preferences.timezone level
    critical_override: true;   // Locked, always true (PoC)
  };
}
```

**Example:**

```json
{
  "_version": 1,
  "channels": {
    "in_app": true,
    "email": true,
    "email_mode": "digest_daily",
    "email_digest_time": "09:00",
    "messenger": false
  },
  "events": {
    "approval_required": true,
    "sla_risk_24h": true,
    "data_conflict": true,
    "case_assigned": true,
    "state_changed": false,
    "doc_uploaded": false,
    "integration_failed": true,
    "automation_completed": false,
    "ai_draft_generated": false
  },
  "quiet_hours": {
    "enabled": true,
    "start": "22:00",
    "end": "08:00",
    "critical_override": true
  }
}
```

#### 9.4.2 Inbox Preferences JSONB Schema

```typescript
interface InboxPreferencesSchema {
  _version?: 1;
  
  default_filter: {
    my_cases_only: boolean;              // Default: true
    show_at_risk_first: boolean;         // Default: true
    show_pending_approvals_first: boolean; // Default: true
  };
  
  default_sort: 'sla_asc' | 'risk_desc' | 'updated_desc' | 'created_desc';
  
  // Array of column keys, case_id always included
  visible_columns: Array<'case_id' | 'status' | 'nba' | 'sla' | 'owner' | 'client' | 'risk' | 'case_type'>;
}
```

**Example:**

```json
{
  "_version": 1,
  "default_filter": {
    "my_cases_only": true,
    "show_at_risk_first": true,
    "show_pending_approvals_first": true
  },
  "default_sort": "sla_asc",
  "visible_columns": ["case_id", "status", "nba", "sla", "client", "risk"]
}
```

#### 9.4.3 UI Preferences JSONB Schema

```typescript
interface UIPreferencesSchema {
  _version?: 1;
  
  density: 'compact' | 'comfortable';  // Default: 'comfortable'
  sidebar_expanded: boolean;           // Default: true
  timeline_expanded: boolean;          // Default: false
  context_sidebar_visible: boolean;    // Default: true
  theme: 'light' | 'dark' | 'system';  // Default: 'light'
}
```

**Example:**

```json
{
  "_version": 1,
  "density": "comfortable",
  "sidebar_expanded": true,
  "timeline_expanded": false,
  "context_sidebar_visible": true,
  "theme": "light"
}
```

---

## 10. Integration Notes

### 10.1 Integration with Case Cockpit

Personal Settings Ñ–Ğ½Ñ‚ĞµĞ³Ñ€ÑƒÑÑ‚ÑŒÑÑ Ğ· [Case Cockpit](../core/04_case_cockpit_ux.md):

| Ğ†Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ | ĞĞ¿Ğ¸Ñ |
|------------|------|
| **Inbox filtering** | Case list Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€ÑƒÑ”Ñ‚ÑŒÑÑ Ğ·Ğ³Ñ–Ğ´Ğ½Ğ¾ `inbox_preferences` |
| **Column visibility** | Ğ’Ğ¸Ğ´Ğ¸Ğ¼Ñ– ĞºĞ¾Ğ»Ğ¾Ğ½ĞºĞ¸ Ğ· `visible_columns` |
| **Template usage** | Quick insert templates Ğ² comments/messages |
| **UI density** | CSS class applied globally |

### 10.2 Integration with Notification Workflows (n8n)

ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ– Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ²Ğ¿Ğ»Ğ¸Ğ²Ğ°ÑÑ‚ÑŒ Ğ½Ğ° n8n workflows:

| Setting | Workflow Impact |
|---------|-----------------|
| `channels.email = true` | Ğ¢Ñ€Ğ¸Ğ³ĞµÑ€Ğ¸Ñ‚ÑŒ email workflow |
| `channels.messenger = true` | Ğ¢Ñ€Ğ¸Ğ³ĞµÑ€Ğ¸Ñ‚ÑŒ Slack/Telegram |
| `events.doc_uploaded = false` | Workflow Ğ½Ğµ Ğ²Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑ” notification |
| `quiet_hours.enabled = true` | Workflow Ğ¿ĞµÑ€ĞµĞ²Ñ–Ñ€ÑÑ” Ñ‡Ğ°Ñ Ğ¿ĞµÑ€ĞµĞ´ Ğ²Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²ĞºĞ¾Ñ |

**Ğ’Ğ°Ğ¶Ğ»Ğ¸Ğ²Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ¾:**

> âš ï¸ ĞĞ¾Ñ‚Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ— â€” Ñ†Ğµ "Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ½Ñ", Ğ° Ğ½Ğµ "Ğ»Ğ¾Ğ³Ñ–ĞºĞ°".  
> Workflow ĞĞ• Ğ¿Ğ¾Ğ²Ğ¸Ğ½ĞµĞ½ Ğ·Ğ¼Ñ–Ğ½ÑĞ²Ğ°Ñ‚Ğ¸ state ĞºĞµĞ¹ÑĞ° Ñ‡ĞµÑ€ĞµĞ· user preferences.

### 10.3 Notification Workflow Logic

```javascript
// n8n pseudo-code for notification dispatch
// Event types use canonical keys from Section 5.2.2

const CRITICAL_EVENTS = ['approval_required', 'sla_risk_24h', 'data_conflict'];

async function shouldNotify(userId, eventKey) {
  const prefs = await getUserPreferences(userId);
  
  // Check if event is enabled (approval_required always true)
  if (!prefs.notifications.events[eventKey]) {
    return { notify: false, reason: 'event_disabled' };
  }
  
  // Check quiet hours (timezone from user_preferences.timezone, not quiet_hours)
  if (prefs.notifications.quiet_hours.enabled) {
    const now = getCurrentTimeInTimezone(prefs.timezone); // Profile-level timezone
    const inQuietHours = isInQuietHours(now, prefs.notifications.quiet_hours);
    
    if (inQuietHours) {
      // Critical override? (locked ON in PoC)
      if (CRITICAL_EVENTS.includes(eventKey) && prefs.notifications.quiet_hours.critical_override) {
        return { notify: true, channels: ['in_app'], reason: 'critical_override' };
      }
      return { notify: false, reason: 'quiet_hours' };
    }
  }
  
  // Determine channels
  const channels = [];
  if (prefs.notifications.channels.in_app) channels.push('in_app');
  if (prefs.notifications.channels.email) channels.push('email');
  if (prefs.notifications.channels.messenger) channels.push('messenger');
  
  return { notify: true, channels, reason: 'normal' };
}

// Quiet hours check (see Section 5.2.3 for edge cases)
function isInQuietHours(now, quietHours) {
  const currentMinutes = now.hours * 60 + now.minutes;
  const startMinutes = parseTime(quietHours.start);
  const endMinutes = parseTime(quietHours.end);
  
  if (startMinutes > endMinutes) {
    // Overnight: 22:00 - 08:00
    return currentMinutes >= startMinutes || currentMinutes < endMinutes;
  } else {
    // Same day: 09:00 - 18:00
    return currentMinutes >= startMinutes && currentMinutes < endMinutes;
  }
}
```

---

## 11. UI Components (Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ½Ñ–ÑÑ‚ÑŒ Style Reference)

ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¸ Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ°ÑÑ‚ÑŒ [UI Style Reference](./ui_style_reference.md):

### 11.1 Settings Navigation

```css
.settings-nav {
  background: var(--bg-sidebar);      /* #F3F3F3 */
  border-right: 1px solid var(--divider);  /* #E0E0E0 */
  width: 240px;
}

.settings-nav-item {
  padding: 10px 16px;
  font-size: 14px;
  color: var(--text);                 /* #1E1E1E */
  border-radius: var(--radius-sm);    /* 6px */
}

.settings-nav-item:hover {
  background: var(--bg-hover);        /* rgba(0,0,0,0.04) */
}

.settings-nav-item.active {
  background: var(--selection);       /* #ADD6FF */
  color: var(--accent);               /* #007ACC */
}
```

### 11.2 Settings Section

```css
.settings-section {
  background: var(--bg-editor);       /* #FFFFFF */
  border: 1px solid var(--border);    /* #D0D0D0 */
  border-radius: var(--radius-md);    /* 10px */
  padding: 20px;
  margin-bottom: 16px;
}

.settings-section-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 16px;
}
```

### 11.3 Toggle Switch

```css
.toggle-switch {
  width: 40px;
  height: 20px;
  background: var(--border);          /* #D0D0D0 */
  border-radius: 10px;
  position: relative;
  cursor: pointer;
  transition: background 0.2s;
}

.toggle-switch.active {
  background: var(--accent);          /* #007ACC */
}

.toggle-switch::after {
  content: '';
  width: 16px;
  height: 16px;
  background: white;
  border-radius: 50%;
  position: absolute;
  top: 2px;
  left: 2px;
  transition: transform 0.2s;
}

.toggle-switch.active::after {
  transform: translateX(20px);
}
```

### 11.4 Template Card

```css
.template-card {
  background: var(--bg-sidebar);      /* #F3F3F3 */
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  padding: 16px;
  margin-bottom: 12px;
}

.template-card:hover {
  background: var(--bg-hover);
  border-color: var(--accent);
}

.template-type-badge {
  font-size: 11px;
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  background: var(--selection);
  color: var(--accent);
}
```

### 11.5 Action Buttons

```css
/* Primary action */
.btn-save {
  background: var(--accent);          /* #007ACC */
  color: white;
  padding: 8px 16px;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 14px;
  cursor: pointer;
}

.btn-save:hover {
  background: var(--accent-hover);    /* #006BB3 */
}

/* Secondary action */
.btn-reset {
  background: var(--bg-sidebar);
  color: var(--text);
  padding: 8px 16px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: 14px;
  cursor: pointer;
}

.btn-reset:hover {
  background: var(--bg-hover);
}
```

---

## 12. Security & Access Rules

### 12.1 Access Model

| Rule | ĞĞ¿Ğ¸Ñ |
|------|------|
| **Own preferences only** | User Ğ±Ğ°Ñ‡Ğ¸Ñ‚ÑŒ Ñ– Ñ€ĞµĞ´Ğ°Ğ³ÑƒÑ” Ğ»Ğ¸ÑˆĞµ ÑĞ²Ğ¾Ñ— preferences |
| **No org-wide read** | Preferences Ğ½Ğµ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ñ– Ğ´Ğ»Ñ Ñ–Ğ½ÑˆĞ¸Ñ… ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ñ–Ğ² |
| **No admin override** | ĞĞ´Ğ¼Ñ–Ğ½ Ğ½Ğµ Ğ¼Ğ¾Ğ¶Ğµ Ğ·Ğ¼Ñ–Ğ½ÑĞ²Ğ°Ñ‚Ğ¸ Ñ‡ÑƒĞ¶Ñ– preferences (v1) |

### 12.2 Audit Events (optional)

Ğ¯ĞºÑ‰Ğ¾ Ğ¿Ğ¾Ñ‚Ñ€Ñ–Ğ±ĞµĞ½ audit trail Ğ´Ğ»Ñ preferences:

```sql
CREATE TABLE user_preferences_audit (
  id              UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id         UUID NOT NULL,
  action          TEXT NOT NULL,  -- 'UPDATED', 'RESET'
  section         TEXT NOT NULL,  -- 'notifications', 'inbox', 'templates'
  old_value       JSONB,
  new_value       JSONB,
  created_at      TIMESTAMPTZ NOT NULL DEFAULT now()
);
```

> **Note:** Ğ”Ğ»Ñ PoC audit Ğ½Ğµ Ñ” Ğ¾Ğ±Ğ¾Ğ²'ÑĞ·ĞºĞ¾Ğ²Ğ¸Ğ¼. Ğ—Ğ¼Ñ–Ğ½Ğ¸ preferences Ğ½Ğµ Ğ²Ğ¿Ğ»Ğ¸Ğ²Ğ°ÑÑ‚ÑŒ Ğ½Ğ° Ğ±Ñ–Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ñ–ĞºÑƒ.

---

## 13. Anti-patterns (Ñ‡Ğ¾Ğ³Ğ¾ ĞĞ• Ñ€Ğ¾Ğ±Ğ¸Ñ‚Ğ¸)

| âŒ Anti-pattern | ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° | âœ… Ğ Ñ–ÑˆĞµĞ½Ğ½Ñ |
|-----------------|----------|------------|
| Ğ”Ğ¾Ğ·Ğ²Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ Ğ²Ğ¸Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸ approval notifications | ĞœĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ– Ğ´Ñ–Ñ— | Lock `approval_required = true` |
| Ğ—Ğ±ĞµÑ€Ñ–Ğ³Ğ°Ñ‚Ğ¸ preferences Ğ² localStorage | Ğ’Ñ‚Ñ€Ğ°Ñ‚Ğ° Ğ¿Ñ€Ğ¸ Ğ·Ğ¼Ñ–Ğ½Ñ– Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ° | Supabase `user_preferences` |
| ĞŸĞ¾ĞºĞ°Ğ·ÑƒĞ²Ğ°Ñ‚Ğ¸ Ğ²ÑÑ– Ğ¾Ğ¿Ñ†Ñ–Ñ— Ğ¾Ğ´Ñ€Ğ°Ğ·Ñƒ | Overwhelm | Progressive disclosure |
| Ğ—Ğ°ÑÑ‚Ğ¾ÑĞ¾Ğ²ÑƒĞ²Ğ°Ñ‚Ğ¸ preferences Ğ´Ğ¾ Ğ±Ñ–Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ñ–ĞºĞ¸ | ĞŸĞ¾Ñ€ÑƒÑˆĞµĞ½Ğ½Ñ [approval pattern](../core/03_approval_pattern.md) | Preferences = Ñ‚Ñ–Ğ»ÑŒĞºĞ¸ display/notifications |
| Sync preferences Ğ² real-time | Ğ¡ĞºĞ»Ğ°Ğ´Ğ½Ñ–ÑÑ‚ÑŒ, race conditions | Fetch on page load + explicit save |
| Ğ”Ğ¾Ğ·Ğ²Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ Ğ²Ğ¸Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸ Ğ²ÑÑ– notifications | ĞœĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ Ğ½Ğµ Ğ¾Ñ‚Ñ€Ğ¸Ğ¼Ğ°Ñ” ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ– ÑĞ¿Ğ¾Ğ²Ñ–Ñ‰ĞµĞ½Ğ½Ñ | Minimum required notifications |

---

## 14. Acceptance Criteria (Definition of Done)

### 14.1 PoC Acceptance

Personal Settings v0 Ğ²Ğ²Ğ°Ğ¶Ğ°Ñ”Ñ‚ÑŒÑÑ ÑƒÑĞ¿Ñ–ÑˆĞ½Ğ¸Ğ¼, ÑĞºÑ‰Ğ¾:

**Functional:**
- [ ] ĞœĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ Ğ¼Ğ¾Ğ¶Ğµ:
  - [ ] ĞĞ±Ñ€Ğ°Ñ‚Ğ¸ timezone (Ğ´Ğ»Ñ quiet hours)
  - [ ] Ğ£Ğ²Ñ–Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸/Ğ²Ğ¸Ğ¼ĞºĞ½ÑƒÑ‚Ğ¸ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ñ–Ğ¹Ğ½Ñ– Ğ½Ğ¾Ñ‚Ğ¸Ñ„Ñ–ĞºĞ°Ñ†Ñ–Ñ—
  - [ ] ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ñ‚Ğ¸ quiet hours (start/end time)
  - [ ] ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ñ‚Ğ¸ default view inbox (Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€Ğ¸, ÑĞ¾Ñ€Ñ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ)
  - [ ] Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğ¸/Ñ€ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ñ‚Ğ¸ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½ ĞºĞ¾Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ñ/Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ½Ñ
- [ ] Ğ—Ğ¼Ñ–Ğ½Ğ¸ Ğ·Ğ±ĞµÑ€Ñ–Ğ³Ğ°ÑÑ‚ÑŒÑÑ Ğ² Supabase
- [ ] Preferences Ğ·Ğ°ÑÑ‚Ğ¾ÑĞ¾Ğ²ÑƒÑÑ‚ÑŒÑÑ Ğ² Case Cockpit:
  - [ ] Inbox Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€ÑƒÑ”Ñ‚ÑŒÑÑ Ğ·Ğ³Ñ–Ğ´Ğ½Ğ¾ preferences
  - [ ] Notifications Ğ²Ñ–Ğ´Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑÑ‚ÑŒÑÑ Ğ·Ğ³Ñ–Ğ´Ğ½Ğ¾ preferences
  - [ ] Prioritization order: pending approvals â†’ at risk â†’ rest

**Constraints:**
- [ ] **Critical:** `approval_required` notification locked ON
- [ ] **Critical:** `critical_override` for quiet hours locked ON
- [ ] ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ½Ğµ Ğ²Ğ¿Ğ»Ğ¸Ğ²Ğ°ÑÑ‚ÑŒ Ğ½Ğ° approval gates
- [ ] `case_id` column locked visible

**UX:**
- [ ] UI Ğ½Ğµ Ğ¿ĞµÑ€ĞµĞ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ (max 3-4 tabs Ğ´Ğ»Ñ PoC)
- [ ] Ğ„ "Reset to defaults" Ğ´Ğ»Ñ ĞºĞ¾Ğ¶Ğ½Ğ¾Ñ— ÑĞµĞºÑ†Ñ–Ñ—
- [ ] Explicit save Ğ· "Unsaved changes" indicator
- [ ] Locked toggles show ğŸ”’ icon Ñ– disabled
- [ ] Basic keyboard navigation Ğ¿Ñ€Ğ°Ñ†ÑÑ”

### 14.2 MVP Acceptance (Ğ´Ğ¾Ğ´Ğ°Ñ‚ĞºĞ¾Ğ²Ğ¾)

- [ ] Saved Views (ÑÑ‚Ğ²Ğ¾Ñ€ĞµĞ½Ğ½Ñ/Ñ€ĞµĞ´Ğ°Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ/Ğ²Ğ¸Ğ´Ğ°Ğ»ĞµĞ½Ğ½Ñ)
- [ ] UI Density toggle (compact/comfortable)
- [ ] Keyboard shortcuts (optional)
- [ ] Language/Timezone in Profile

### 14.3 Performance Requirements

| Metric | Target |
|--------|--------|
| Load settings page | < 500ms |
| Save preferences | < 300ms |
| Apply preferences to inbox | No visible delay |

---

## 15. Roadmap: v0 â†’ v1 â†’ v2

### v0 (PoC)

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ’ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾ |
|-----------|----------|
| Notifications (channels + events + quiet hours) | âœ… |
| Inbox defaults (filters + sort + columns) | âœ… |
| Draft templates (CRUD) | âœ… |
| Saved Views | â€” |
| UI Preferences | â€” |
| Keyboard shortcuts | â€” |

### v1 (MVP)

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ’ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾ |
|-----------|----------|
| v0 features | âœ… |
| Saved Views | âœ… |
| UI Density | âœ… |
| Profile (timezone, language) | âœ… |
| Template placeholders validation | âœ… |
| Messenger integration (Slack/Telegram) | âœ… |

### v2 (Scale)

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ’ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾ |
|-----------|----------|
| v1 features | âœ… |
| Personal analytics | âœ… |
| Team presets / Role defaults | âœ… |
| Shared templates (org-wide) | âœ… |
| Policy-driven overrides | âœ… |
| Keyboard shortcuts | âœ… |
| Advanced preferences | âœ… |

---

## 16. Technical Implementation Notes

### 16.1 Frontend Implementation

| ĞÑĞ¿ĞµĞºÑ‚ | Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ñ–Ñ |
|--------|--------------|
| **State management** | React Context / Zustand for preferences |
| **Form handling** | React Hook Form Ğ· auto-save |
| **Validation** | Zod schema for JSONB structures |
| **Optimistic updates** | Apply locally, then sync |

### 16.2 Backend Considerations

| ĞÑĞ¿ĞµĞºÑ‚ | Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ñ–Ñ |
|--------|--------------|
| **API** | Supabase client direct access |
| **Caching** | Cache preferences in memory on page load |
| **Migrations** | Use Supabase migrations for schema |
| **Defaults** | DB defaults + application defaults fallback |

### 16.3 Default Values Strategy

```typescript
// Application-level defaults (fallback if DB is empty)
const DEFAULT_PREFERENCES = {
  notifications: {
    channels: { in_app: true, email: false, messenger: false },
    events: {
      approval_required: true,  // Cannot be changed
      sla_risk: true,
      data_conflict: true,
      case_assigned: true,
      // ...
    },
    quiet_hours: {
      enabled: false,
      start: '22:00',
      end: '08:00',
      critical_override: true
    }
  },
  inbox_preferences: {
    default_filter: {
      my_cases_only: true,
      show_at_risk_first: true,
      show_pending_approvals_first: true
    },
    default_sort: 'sla_asc',
    visible_columns: ['case_id', 'status', 'nba', 'sla', 'client', 'risk']
  },
  ui_preferences: {
    density: 'comfortable',
    sidebar_expanded: true,
    timeline_expanded: false,
    theme: 'light'
  }
};

// Merge user preferences with defaults
function getEffectivePreferences(userPrefs) {
  return deepMerge(DEFAULT_PREFERENCES, userPrefs);
}
```

---

## 17. Terminology Glossary (UA/EN)

> Ğ”Ğ²Ğ¾Ğ¼Ğ¾Ğ²Ğ½Ğ¸Ğ¹ Ğ³Ğ»Ğ¾ÑĞ°Ñ€Ñ–Ğ¹ Ğ´Ğ»Ñ ÑƒĞ·Ğ³Ğ¾Ğ´Ğ¶ĞµĞ½Ğ¾ÑÑ‚Ñ– UI Ğ»ĞµĞ¹Ğ±Ğ»Ñ–Ğ² Ñ‚Ğ° Ñ‚ĞµÑ…Ğ½Ñ–Ñ‡Ğ½Ğ¸Ñ… Ñ‚ĞµÑ€Ğ¼Ñ–Ğ½Ñ–Ğ².

| Technical Key | UI Label (EN) | UI Label (UA) | Context |
|---------------|---------------|---------------|---------|
| `personal_settings` | Personal Settings | ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ– Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ | Page title |
| `notifications` | Notifications | Ğ¡Ğ¿Ğ¾Ğ²Ñ–Ñ‰ĞµĞ½Ğ½Ñ | Section |
| `inbox_views` | Inbox & Views | Ğ’Ñ…Ñ–Ğ´Ğ½Ñ– Ñ‚Ğ° Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ñ | Section |
| `draft_templates` | Draft Templates | Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½Ğ¸ Ñ‡ĞµÑ€Ğ½ĞµÑ‚Ğ¾Ğº | Section |
| `ui_preferences` | UI Preferences | ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ñ–Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑÑƒ | Section |
| `quiet_hours` | Quiet Hours | Ğ¢Ğ¸Ñ…Ñ– Ğ³Ğ¾Ğ´Ğ¸Ğ½Ğ¸ | Feature |
| `critical_override` | Override for critical | ĞŸĞµÑ€ĞµĞ²Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ Ğ´Ğ»Ñ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¸Ñ… | Toggle |
| `approval_required` | Approval required | ĞŸĞ¾Ñ‚Ñ€Ñ–Ğ±Ğ½Ğµ Ğ¿Ñ–Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¶ĞµĞ½Ğ½Ñ | Event type |
| `sla_risk_24h` | SLA at risk (< 24h) | SLA Ğ¿Ñ–Ğ´ Ğ·Ğ°Ğ³Ñ€Ğ¾Ğ·Ğ¾Ñ (< 24 Ğ³Ğ¾Ğ´) | Event type |
| `save_changes` | Save changes | Ğ—Ğ±ĞµÑ€ĞµĞ³Ñ‚Ğ¸ Ğ·Ğ¼Ñ–Ğ½Ğ¸ | Button |
| `reset_defaults` | Reset to defaults | Ğ¡ĞºĞ¸Ğ½ÑƒÑ‚Ğ¸ Ğ´Ğ¾ ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ğ¸Ñ… | Button |
| `unsaved_changes` | Unsaved changes | ĞĞµĞ·Ğ±ĞµÑ€ĞµĞ¶ĞµĞ½Ñ– Ğ·Ğ¼Ñ–Ğ½Ğ¸ | Badge |

---

## 18. UI States & Empty States

### 18.1 Component States

| Component | States | UX Behavior |
|-----------|--------|-------------|
| **Settings page** | Loading / Ready / Error | Skeleton loader â†’ Content â†’ Error + Retry |
| **Save button** | Disabled / Enabled / Saving / Saved / Error | See Section 3.4 |
| **Toggle** | Off / On / Disabled (locked) | Locked toggles show ğŸ”’ icon |
| **Template list** | Loading / Empty / Has items | Empty state with CTA |
| **Saved views list** | Loading / Empty / Has items | Empty state with CTA |

### 18.2 Empty States

**No templates:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚           ğŸ“ No templates yet                           â”‚
â”‚                                                         â”‚
â”‚     Create templates to speed up your daily work        â”‚
â”‚                                                         â”‚
â”‚              [+ Create first template]                  â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**No saved views (MVP):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                         â”‚
â”‚           ğŸ“‹ No saved views                             â”‚
â”‚                                                         â”‚
â”‚     Save your favorite filter combinations              â”‚
â”‚     for quick access                                    â”‚
â”‚                                                         â”‚
â”‚              [+ Create first view]                      â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 18.3 Error States

| Error | Message | Recovery |
|-------|---------|----------|
| Load failed | "Couldn't load settings. Please try again." | [Retry] button |
| Save failed | "Failed to save. Please try again." | Toast + button enabled |
| Network error | "No connection. Changes saved locally." | Auto-retry on reconnect |

---

## 19. Accessibility (A11y) Requirements

### 19.1 Minimum A11y for PoC

| Requirement | Implementation |
|-------------|----------------|
| **Keyboard navigation** | Tab order through all interactive elements |
| **Focus styles** | Use `outline: 2px solid var(--accent)` on focus |
| **Toggle accessible** | `role="switch"`, `aria-checked`, keyboard toggle with Space |
| **Locked toggles** | `aria-disabled="true"`, tooltip explaining why locked |
| **Form labels** | All inputs have associated `<label>` elements |
| **Error announcements** | `aria-live="polite"` for save errors |

### 19.2 ARIA Attributes

```html
<!-- Toggle switch -->
<button 
  role="switch" 
  aria-checked="true" 
  aria-label="Enable quiet hours"
  aria-describedby="quiet-hours-description"
>
  <span class="toggle-track">...</span>
</button>

<!-- Locked toggle -->
<button 
  role="switch" 
  aria-checked="true" 
  aria-disabled="true"
  aria-label="Approval notifications (required, cannot be disabled)"
>
  <span class="toggle-track">...</span>
  <span class="lock-icon" aria-hidden="true">ğŸ”’</span>
</button>

<!-- Delete button -->
<button 
  aria-label="Delete template: Quote reminder"
  title="Delete template"
>
  <span aria-hidden="true">Ã—</span>
</button>
```

### 19.3 Focus Management

| Action | Focus Behavior |
|--------|----------------|
| Open settings | Focus on first nav item or search |
| Switch tab | Focus on first interactive element in new tab |
| Save success | Focus remains, toast announced |
| Save error | Focus on Save button, error announced |
| Delete template | Focus on next template or "Add" button |

---

## 20. Test Scenarios

### 20.1 Critical Path Tests

| # | Scenario | Expected Result | Priority |
|---|----------|-----------------|----------|
| 1 | Try to disable `approval_required` notification | Toggle is locked, cannot be changed | P0 |
| 2 | Enable quiet hours 22:00-08:00, trigger approval at 23:00 | Notification delivered (critical override) | P0 |
| 3 | Set quiet hours, trigger non-critical event at 23:00 | Notification NOT delivered | P0 |
| 4 | Both "At risk first" and "Pending approvals first" ON | Pending approvals appear before At risk | P1 |
| 5 | Save settings, refresh page | Settings persisted correctly | P0 |
| 6 | Create template with invalid placeholder `{{foo}}` | Warning shown, save allowed | P1 |
| 7 | Use template with missing `{{client_contact}}` data | Warning shown, insert allowed | P1 |
| 8 | Network error during save | Error toast, retry button works | P1 |

### 20.2 Edge Case Tests

| # | Scenario | Expected Result | Priority |
|---|----------|-----------------|----------|
| 9 | Quiet hours 23:00-01:00 (short overnight) | Correctly calculated as overnight | P1 |
| 10 | Quiet hours 22:00-22:00 (same time) | Validation error, cannot save | P2 |
| 11 | Timezone change with active quiet hours | Quiet hours apply in new timezone | P1 |
| 12 | DST transition during quiet hours | Handled correctly by IANA timezone | P2 |
| 13 | Disable all visible columns except locked | Minimum columns enforced | P2 |
| 14 | Create 50 templates | Performance OK, pagination/scroll | P2 |
| 15 | Concurrent save from two tabs | Last write wins, no data corruption | P2 |

### 20.3 A11y Tests

| # | Scenario | Expected Result | Priority |
|---|----------|-----------------|----------|
| 16 | Navigate settings with keyboard only | All elements reachable | P1 |
| 17 | Screen reader announces locked toggle | "Required, cannot be disabled" | P1 |
| 18 | Save error with screen reader | Error message announced | P1 |

---

## 21. End Note

Personal Settings Ğ² IMCP â€” Ñ†Ğµ Ñ‡Ğ°ÑÑ‚Ğ¸Ğ½Ğ° "ĞºĞ¾ÑÑ‚ÑĞ¼Ğ° Iron Man".

> Ğ’Ğ¾Ğ½Ğ¸ Ğ½Ğµ Ğ·Ğ¼Ñ–Ğ½ÑÑÑ‚ÑŒ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ±Ñ–Ğ·Ğ½ĞµÑÑƒ, Ğ°Ğ»Ğµ Ñ€Ğ¾Ğ±Ğ»ÑÑ‚ÑŒ Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€Ğ° **ÑˆĞ²Ğ¸Ğ´ÑˆĞ¸Ğ¼, ÑƒĞ²Ğ°Ğ¶Ğ½Ñ–ÑˆĞ¸Ğ¼ Ñ– Ğ¼ĞµĞ½Ñˆ Ğ¿ĞµÑ€ĞµĞ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¼**.

ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ´Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑÑÑ‚ÑŒ Ğ°Ğ´Ğ°Ğ¿Ñ‚ÑƒĞ²Ğ°Ñ‚Ğ¸ Ñ€Ğ¾Ğ±Ğ¾Ñ‡Ğµ ÑĞµÑ€ĞµĞ´Ğ¾Ğ²Ğ¸Ñ‰Ğµ Ğ¿Ñ–Ğ´ Ñ–Ğ½Ğ´Ğ¸Ğ²Ñ–Ğ´ÑƒĞ°Ğ»ÑŒĞ½Ğ¸Ğ¹ ÑÑ‚Ğ¸Ğ»ÑŒ Ñ€Ğ¾Ğ±Ğ¾Ñ‚Ğ¸, Ğ·Ğ±ĞµÑ€Ñ–Ğ³Ğ°ÑÑ‡Ğ¸ Ğ¿Ñ€Ğ¸ Ñ†ÑŒĞ¾Ğ¼Ñƒ:
- ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒĞ½Ñ– Ñ‚Ğ¾Ñ‡ĞºĞ¸ ([approval pattern](../core/03_approval_pattern.md))
- Ğ¿Ñ€Ğ¾Ğ·Ğ¾Ñ€Ñ–ÑÑ‚ÑŒ ([audit trail](../core/02_core_data_model.md))
- Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ°Ğ»ÑŒĞ½Ñ–ÑÑ‚ÑŒ ([human-in-the-loop](../core/00_shared_mental_model.md))

---

**ĞŸĞ¾Ğ²'ÑĞ·Ğ°Ğ½Ğ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ:**
- [/docs/core/](../core/) â€” core Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ IMCP
- [/docs/case_templates/](../case_templates/) â€” ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¸ ĞºĞµĞ¹ÑÑ–Ğ²
- [ui_style_reference.md](./ui_style_reference.md) â€” Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½-Ñ‚Ğ¾ĞºĞµĞ½Ğ¸
- [owner_dashboard_spec.md](./owner_dashboard_spec.md) â€” Owner Dashboard
